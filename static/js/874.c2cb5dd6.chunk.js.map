{"version":3,"file":"static/js/874.c2cb5dd6.chunk.js","mappings":"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","sources":["../../node_modules/recorder-core/recorder.wav.min.js","../../node_modules/recorder-core/src/recorder-core.js"],"sourcesContent":["/*\n录音\nhttps://github.com/xiangyuecn/Recorder\nsrc: recorder-core.js,engine/wav.js\n*/\n!function(e){var t=\"object\"==typeof window&&!!window.document,r=t?window:Object;!function(e,w){\"use strict\";var y=function(){},u=function(e){return\"number\"==typeof e},F=function(e){return new f(e)},b=F.LM=\"2024-04-09 19:15\",S=\"https://github.com/xiangyuecn/Recorder\",k=\"Recorder\",x=\"getUserMedia\",U=\"srcSampleRate\",G=\"sampleRate\",i=\"bitRate\",I=\"catch\",t=e[k];if(t&&t.LM==b)return t.CLog(t.i18n.$T(\"K8zP::重复导入{1}\",0,k),3);F.IsOpen=function(){var e=F.Stream;if(e){var t=e.getTracks&&e.getTracks()||e.audioTracks||[],r=t[0];if(r){var n=r.readyState;return\"live\"==n||n==r.LIVE}}return!1},F.BufferSize=4096,F.Destroy=function(){for(var e in N(k+\" Destroy\"),D(),r)r[e]()};var r={};F.BindDestroy=function(e,t){r[e]=t},F.Support=function(){if(!w)return!1;var e=navigator.mediaDevices||{};return e[x]||(e=navigator)[x]||(e[x]=e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia),!!e[x]&&(F.Scope=e,!!F.GetContext())},F.GetContext=function(e){if(!w)return null;var t=window.AudioContext;if(t||(t=window.webkitAudioContext),!t)return null;var r=F.Ctx;if(r&&\"closed\"!=r.state||(r=F.Ctx=new t,F.NewCtxs=F.NewCtxs||[],F.BindDestroy(\"Ctx\",function(){var e=F.Ctx;e&&e.close&&(a(e),F.Ctx=0);var t=F.NewCtxs;F.NewCtxs=[];for(var r=0;r<t.length;r++)a(t[r])})),e&&r.close)try{r=new t,F.NewCtxs.push(r)}catch(e){N(\"GetContext tryNew Error\",1,e)}return r},F.CloseNewCtx=function(e){if(e&&e!=F.Ctx){a(e);for(var t=F.NewCtxs||[],r=t.length,n=0;n<t.length;n++)if(t[n]==e){t.splice(n,1);break}N(V(\"mSxV::剩{1}个GetContext未close\",0,r+\"-1=\"+t.length),t.length?3:0)}};var a=function(e){if(e&&e.close){e._isC=1;try{e.close()}catch(e){N(\"ctx close err\",1,e)}}},L=F.ResumeCtx=function(r,n,a,o){var i=0,s=0,c=0,f=0,u=\"EventListener\",l=\"ResumeCtx \",v=function(e,t){s&&p(),i||(i=1,e&&o(e,f),t&&a(f)),t&&(!r._LsSC&&r[\"add\"+u]&&r[\"add\"+u](\"statechange\",h),r._LsSC=1,c=1)},p=function(e){if(!e||!s){s=e?1:0;for(var t=[\"focus\",\"mousedown\",\"mouseup\",\"touchstart\",\"touchend\"],r=0;r<t.length;r++)window[(e?\"add\":\"remove\")+u](t[r],h,!0)}},h=function(){var e=r.state,t=g(e);if(!i&&!n(t?++f:f))return v();t?(c&&N(l+\"sc \"+e,3),p(1),r.resume().then(function(){c&&N(l+\"sc \"+r.state),v(0,1)})[I](function(e){N(l+\"error\",1,e),g(r.state)||v(e.message||\"error\")})):\"closed\"==e?(c&&!r._isC&&N(l+\"sc \"+e,1),v(\"ctx closed\")):v(0,1)};h()},g=F.CtxSpEnd=function(e){return\"suspended\"==e||\"interrupted\"==e},M=function(e){var t=e.state,r=\"ctx.state=\"+t;return g(t)&&(r+=V(\"nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）\")),r},T=\"ConnectEnableWebM\";F[T]=!0;var A=\"ConnectEnableWorklet\";F[A]=!1;var R=function(e,c){var f=e.BufferSize||F.BufferSize,u=e.Stream,l=u._RC||u._c||F.GetContext(!0);u._c=l;var v,r,p,i=function(e){var t=u._m=l.createMediaStreamSource(u),r=l.destination,n=\"createMediaStreamDestination\";l[n]&&(r=u._d=l[n]()),t.connect(e),e.connect(r)},h=\"\",g=u._call,d=function(e){for(var t in g){for(var r=e.length,n=new Int16Array(r),a=0,o=0;o<r;o++){var i=Math.max(-1,Math.min(1,e[o]));i=i<0?32768*i:32767*i,n[o]=i,a+=Math.abs(i)}for(var s in g)g[s](n,a);return}},m=\"ScriptProcessor\",C=\"audioWorklet\",s=k+\" \"+C,_=\"RecProc\",w=\"MediaRecorder\",y=w+\".WebM.PCM\",b=l.createScriptProcessor||l.createJavaScriptNode,S=V(\"ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。\",0,C),x=function(){r=u.isWorklet=!1,n(u),N(V(\"7TU0::Connect采用老的{1}，\",0,m)+$.get(V(F[A]?\"JwCL::但已设置{1}尝试启用{2}\":\"VGjB::可设置{1}尝试启用{2}\",2),[k+\".\"+A+\"=true\",C])+h+S,3);var e=u._p=b.call(l,f,1,1);i(e),e.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);d(t)}},M=function(){v=u.isWebM=!1,O(u),r=u.isWorklet=!b||F[A];var t=window.AudioWorkletNode;if(r&&l[C]&&t){var n=function(){return r&&u._na},a=u._na=function(){\"\"!==p&&(clearTimeout(p),p=setTimeout(function(){p=0,n()&&(N(V(\"MxX1::{1}未返回任何音频，恢复使用{2}\",0,C,m),3),b&&x())},500))},o=function(){if(n()){var e=u._n=new t(l,_,{processorOptions:{bufferSize:f}});i(e),e.port.onmessage=function(e){p&&(clearTimeout(p),p=\"\"),n()?d(e.data.val):r||N(V(\"XUap::{1}多余回调\",0,C),3)},N(V(\"yOta::Connect采用{1}，设置{2}可恢复老式{3}\",0,C,k+\".\"+A+\"=false\",m)+h+S,3)}},e=function(){if(n())if(l[_])o();else{var e,t,r=(t=\"class \"+_+\" extends AudioWorkletProcessor{\",t+=\"constructor \"+(e=function(e){return e.toString().replace(/^function|DEL_/g,\"\").replace(/\\$RA/g,s)})(function(e){DEL_super(e);var t=this,r=e.processorOptions.bufferSize;t.bufferSize=r,t.buffer=new Float32Array(2*r),t.pos=0,t.port.onmessage=function(e){e.data.kill&&(t.kill=!0,$C.log(\"$RA kill call\"))},$C.log(\"$RA .ctor call\",e)}),t+=\"process \"+e(function(e,t,r){var n=this,a=n.bufferSize,o=n.buffer,i=n.pos;if((e=(e[0]||[])[0]||[]).length){o.set(e,i);var s=~~((i+=e.length)/a)*a;if(s){this.port.postMessage({val:o.slice(0,s)});var c=o.subarray(s,i);(o=new Float32Array(2*a)).set(c),i=c.length,n.buffer=o}n.pos=i}return!n.kill}),t=(t+='}try{registerProcessor(\"'+_+'\", '+_+')}catch(e){$C.error(\"'+s+' Reg Error\",e)}').replace(/\\$C\\./g,\"console.\"),\"data:text/javascript;base64,\"+btoa(unescape(encodeURIComponent(t))));l[C].addModule(r).then(function(e){n()&&(l[_]=1,o(),p&&a())})[I](function(e){N(C+\".addModule Error\",1,e),n()&&x()})}};L(l,function(){return n()},e,e)}else x()};!function(){var e=window[w],t=\"ondataavailable\",r=\"audio/webm; codecs=pcm\";v=u.isWebM=F[T];var n=e&&t in e.prototype&&e.isTypeSupported(r);if(h=n?\"\":V(\"VwPd::（此浏览器不支持{1}）\",0,y),!c||!v||!n)return M();var a=function(){return v&&u._ra},o=(u._ra=function(){\"\"!==p&&(clearTimeout(p),p=setTimeout(function(){a()&&(N(V(\"vHnb::{1}未返回任何音频，降级使用{2}\",0,w,C),3),M())},500))},Object.assign({mimeType:r},F.ConnectWebMOptions)),i=u._r=new e(u,o),s=u._rd={sampleRate:l[G]};i[t]=function(e){var t=new FileReader;t.onloadend=function(){if(a()){var e=z(new Uint8Array(t.result),s);if(!e)return;if(-1==e)return void M();p&&(clearTimeout(p),p=\"\"),d(e)}else v||N(V(\"O9P7::{1}多余回调\",0,w),3)},t.readAsArrayBuffer(e.data)},i.start(~~(f/48)),N(V(\"LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}\",0,y,k+\".\"+T+\"=false\",C,m))}()},o=function(e){e._na&&e._na(),e._ra&&e._ra()},n=function(e){e._na=null,e._n&&(e._n.port.postMessage({kill:!0}),e._n.disconnect(),e._n=null)},O=function(e){if(e._ra=null,e._r){try{e._r.stop()}catch(e){N(\"mr stop err\",1,e)}e._r=null}},D=function(e){var t=(e=e||F)==F,r=e.Stream;r&&(r._m&&(r._m.disconnect(),r._m=null),!r._RC&&r._c&&F.CloseNewCtx(r._c),r._RC=null,r._c=null,r._d&&(s(r._d.stream),r._d=null),r._p&&(r._p.disconnect(),r._p.onaudioprocess=r._p=null),n(r),O(r),t&&s(r)),e.Stream=0},s=F.StopS_=function(e){for(var t=e.getTracks&&e.getTracks()||e.audioTracks||[],r=0;r<t.length;r++){var n=t[r];n.stop&&n.stop()}e.stop&&e.stop()};F.SampleData=function(e,t,r,n,a){var o=\"SampleData\";n||(n={});var i=n.index||0,s=n.offset||0,c=n.filter;if(c&&c.fn&&c.sr!=t&&(c=null,N(V(\"d48C::{1}的filter采样率变了，重设滤波\",0,o),3)),!c){var f=3*t/4<r?0:r/2*3/4;c={fn:f?F.IIRFilter(!0,t,f):0}}c.sr=t;var u=c.fn,l=n.frameNext||[];a||(a={});var v=a.frameSize||1;a.frameType&&(v=\"mp3\"==a.frameType?1152:1);var p=e.length;p+1<i&&N(V(\"tlbC::{1}似乎传入了未重置chunk {2}\",0,o,i+\">\"+p),3);for(var h=0,g=i;g<p;g++)h+=e[g].length;h=Math.max(0,h-Math.floor(s));var d=t/r;1<d?h=Math.floor(h/d):(d=1,r=t),h+=l.length;for(var m=new Int16Array(h),C=0,g=0;g<l.length;g++)m[C]=l[g],C++;for(;i<p;i++){for(var _=e[i],g=s,w=_.length,y=u&&u.Embed,b=0,S=0,x=0,M=0,k=0,I=0;k<w;k++,I++)if(I<w&&(y?(x=_[I],M=y.b0*x+y.b1*y.x1+y.b0*y.x2-y.a1*y.y1-y.a2*y.y2,y.x2=y.x1,y.x1=x,y.y2=y.y1,y.y1=M):M=u?u(_[I]):_[I]),b=S,S=M,0!=I){var L=Math.floor(g);if(k==L){var T=Math.ceil(g),A=g-L,R=b,O=T<w?S:R,D=R+(O-R)*A;32767<D?D=32767:D<-32768&&(D=-32768),m[C]=D,C++,g+=d}}else k--;s=Math.max(0,g-w)}l=null;var z=m.length%v;if(0<z){var E=2*(m.length-z);l=new Int16Array(m.buffer.slice(E)),m=new Int16Array(m.buffer.slice(0,E))}return{index:i,offset:s,filter:c,frameNext:l,sampleRate:r,data:m}},F.IIRFilter=function(e,t,r){var n=2*Math.PI*r/t,a=Math.sin(n),o=Math.cos(n),i=a/2,s=1+i,c=-2*o/s,f=(1-i)/s;if(e)var u=(1-o)/2/s,l=(1-o)/s;else var u=(1+o)/2/s,l=-(1+o)/s;var v=0,p=0,h=0,g=0,d=0,m=function(e){return h=u*e+l*v+u*p-c*g-f*d,p=v,v=e,d=g,g=h};return m.Embed={x1:0,x2:0,y1:0,y2:0,b0:u,b1:l,a1:c,a2:f},m},F.PowerLevel=function(e,t){var r=e/t||0;return r<1251?Math.round(r/1250*10):Math.round(Math.min(100,Math.max(0,100*(1+Math.log(r/1e4)/Math.log(10)))))},F.PowerDBFS=function(e){var t=Math.max(.1,e||0);return t=Math.min(t,32767),t=20*Math.log(t/32767)/Math.log(10),Math.max(-100,Math.round(t))},F.CLog=function(e,t){if(\"object\"==typeof console){var r=new Date,n=(\"0\"+r.getMinutes()).substr(-2)+\":\"+(\"0\"+r.getSeconds()).substr(-2)+\".\"+(\"00\"+r.getMilliseconds()).substr(-3),a=this&&this.envIn&&this.envCheck&&this.id,o=[\"[\"+n+\" \"+k+(a?\":\"+a:\"\")+\"]\"+e],i=arguments,s=F.CLog,c=2,f=s.log||console.log;for(u(t)?f=1==t?s.error||console.error:3==t?s.warn||console.warn:f:c=1;c<i.length;c++)o.push(i[c]);l?f&&f(\"[IsLoser]\"+o[0],1<o.length?o:\"\"):f.apply(console,o)}};var N=function(){F.CLog.apply(this,arguments)},l=!0;try{l=!console.log.apply}catch(e){}var c=0;function f(e){var t=this;t.id=++c,v();var r={type:\"mp3\",onProcess:y};for(var n in e)r[n]=e[n];var a=(t.set=r)[i],o=r[G];(a&&!u(a)||o&&!u(o))&&t.CLog(V.G(\"IllegalArgs-1\",[V(\"VtS4::{1}和{2}必须是数值\",0,G,i)]),1,e),r[i]=+a||16,r[G]=+o||16e3,t.state=0,t._S=9,t.Sync={O:9,C:9}}F.Sync={O:9,C:9},F.prototype=f.prototype={CLog:N,_streamStore:function(){return this.set.sourceStream?this:F},_streamCtx:function(){var e=this._streamStore().Stream;return e&&e._c},open:function(e,r){var n=this,a=n.set,o=n._streamStore(),i=0;e=e||y;var s=function(e,t){t=!!t,n.CLog(V(\"5tWi::录音open失败：\")+e+\",isUserNotAllow:\"+t,1),i&&F.CloseNewCtx(i),r&&r(e,t)};n._streamTag=x;var c=function(){n.CLog(\"open ok, id:\"+n.id+\" stream:\"+n._streamTag),e(),n._SO=0},f=o.Sync,u=++f.O,l=f.C;n._O=n._O_=u,n._SO=n._S;if(w){var t=n.envCheck({envName:\"H5\",canProcess:!0});if(t)s(V(\"A5bm::不能录音：\")+t);else if(a.sourceStream){if(n._streamTag=\"set.sourceStream\",!F.GetContext())return void s(V(\"1iU7::不支持此浏览器从流中获取录音\"));D(o);var v=n.Stream=a.sourceStream;v._RC=a.runningContext,v._call={};try{R(o)}catch(e){return D(o),void s(V(\"BTW2::从流中打开录音失败：\")+e.message)}c()}else{var p=function(e,t){try{window.top.a}catch(e){return void s(V(\"Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})\",0,'allow=\"camera;microphone\"'))}/Permission|Allow/i.test(e)?s(V(\"gyO5::用户拒绝了录音权限\"),!0):!1===window.isSecureContext?s(V(\"oWNo::浏览器禁止不安全页面录音，可开启https解决\")):/Found/i.test(e)?s(t+V(\"jBa9::，无可用麦克风\")):s(t)};if(F.IsOpen())c();else if(F.Support()){var h=a.runningContext;h||(h=i=F.GetContext(!0));var g=function(t){setTimeout(function(){t._call={};var e=F.Stream;e&&(D(),t._call=e._call),(F.Stream=t)._c=h,t._RC=a.runningContext,function(){if(l!=f.C||!n._O){var e=V(\"dFm8::open被取消\");return u==f.O?n.close():e=V(\"VtJO::open被中断\"),s(e),!0}}()||(F.IsOpen()?(e&&n.CLog(V(\"upb8::发现同时多次调用open\"),1),R(o,1),c()):s(V(\"Q1GA::录音功能无效：无音频流\")))},100)},d=function(e){var t=e.name||e.message||e.code+\":\"+e;n.CLog(V(\"xEQR::请求录音权限错误\"),1,e),p(t,V(\"bDOG::无法录音：\")+t)},m=a.audioTrackSet||{};m[G]=h[G];var C={audio:m};try{var _=F.Scope[x](C,g,d)}catch(e){n.CLog(x,3,e),C={audio:!0},_=F.Scope[x](C,g,d)}n.CLog(x+\"(\"+JSON.stringify(C)+\") \"+M(h)+V(\"RiWe::，未配置noiseSuppression和echoCancellation时浏览器可能会自动打开降噪和回声消除，移动端可能会降低系统播放音量（关闭录音后可恢复），请参阅文档中audioTrackSet配置\")+\"(\"+S+\") LM:\"+b+\" UA:\"+navigator.userAgent),_&&_.then&&_.then(g)[I](d)}else p(\"\",V(\"COxc::此浏览器不支持录音\"))}}else s(V.G(\"NonBrowser-1\",[\"open\"])+V(\"EMJq::，可尝试使用RecordApp解决方案\")+\"(\"+S+\"/tree/master/app-support-sample)\")},close:function(e){e=e||y;var t=this,r=t._streamStore();t._stop();var n=\" stream:\"+t._streamTag,a=r.Sync;if(t._O=0,t._O_!=a.O)return t.CLog(V(\"hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）\")+n,3),void e();a.C++,D(r),t.CLog(\"close,\"+n),e()},mock:function(e,t){var r=this;return r._stop(),r.isMock=1,r.mockEnvInfo=null,r.buffers=[e],r.recSize=e.length,r._setSrcSR(t),r._streamTag=\"mock\",r},_setSrcSR:function(e){var t=this.set,r=t[G];e<r?t[G]=e:r=0,this[U]=e,this.CLog(U+\": \"+e+\" set.\"+G+\": \"+t[G]+(r?\" \"+V(\"UHvm::忽略\")+\": \"+r:\"\"),r?3:0)},envCheck:function(e){var t,r=this.set,n=\"CPU_BE\";if(t||F[n]||\"function\"!=typeof Int8Array||new Int8Array(new Int32Array([1]).buffer)[0]||(v(n),t=V(\"Essp::不支持{1}架构\",0,n)),!t){var a=r.type,o=this[a+\"_envCheck\"];r.takeoffEncodeChunk&&(o?e.canProcess||(t=V(\"7uMV::{1}环境不支持实时处理\",0,e.envName)):t=V(\"2XBl::{1}类型不支持设置takeoffEncodeChunk\",0,a)+(this[a]?\"\":V(\"LG7e::(未加载编码器)\"))),!t&&o&&(t=this[a+\"_envCheck\"](e,r))}return t||\"\"},envStart:function(e,t){var r=this,n=r.set;if(r.isMock=e?1:0,r.mockEnvInfo=e,r.buffers=[],r.recSize=0,e&&(r._streamTag=\"env$\"+e.envName),r.state=1,r.envInLast=0,r.envInFirst=0,r.envInFix=0,r.envInFixTs=[],r._setSrcSR(t),r.engineCtx=0,r[n.type+\"_start\"]){var a=r.engineCtx=r[n.type+\"_start\"](n);a&&(a.pcmDatas=[],a.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(e,t){var a=this,o=a.set,i=a.engineCtx;if(1==a.state){var r=a[U],n=e.length,s=F.PowerLevel(t,n),c=a.buffers,f=c.length;c.push(e);var u=c,l=f,v=Date.now(),p=Math.round(n/r*1e3);a.envInLast=v,1==a.buffers.length&&(a.envInFirst=v-p);var h=a.envInFixTs;h.splice(0,0,{t:v,d:p});for(var g=v,d=0,m=0;m<h.length;m++){var C=h[m];if(3e3<v-C.t){h.length=m;break}g=C.t,d+=C.d}var _=h[1],w=v-g,y=w-d;if(w/3<y&&(_&&1e3<w||6<=h.length)){var b=v-_.t-p;if(p/5<b){var S=!o.disableEnvInFix;if(a.CLog(\"[\"+v+\"]\"+$.get(V(S?\"4Kfd::补偿{1}ms\":\"bM5i::未补偿{1}ms\",1),[b]),3),a.envInFix+=b,S){var x=new Int16Array(b*r/1e3);n+=x.length,c.push(x)}}}var M=a.recSize,k=n,I=M+k;if(a.recSize=I,i){var L=F.SampleData(c,r,o[G],i.chunkInfo);i.chunkInfo=L,M=i.pcmSize,k=L.data.length,I=M+k,i.pcmSize=I,c=i.pcmDatas,f=c.length,c.push(L.data),r=L[G]}var T=Math.round(I/r*1e3),A=c.length,R=u.length,O=function(){for(var e=D?0:-k,t=null==c[0],r=f;r<A;r++){var n=c[r];null==n?t=1:(e+=n.length,i&&n.length&&a[o.type+\"_encode\"](i,n))}if(t&&i){var r=l;for(u[0]&&(r=0);r<R;r++)u[r]=null}t&&(e=D?k:0,c[0]=null),i?i.pcmSize+=e:a.recSize+=e},D=0,z=\"rec.set.onProcess\";try{D=o.onProcess(c,s,T,r,f,O)}catch(e){console.error(z+V(\"gFUF::回调出错是不允许的，需保证不会抛异常\"),e)}var E=Date.now()-v;if(10<E&&1e3<a.envInFirst-v&&a.CLog(z+V(\"2ghS::低性能，耗时{1}ms\",0,E),3),!0===D){for(var N=0,m=f;m<A;m++)null==c[m]?N=1:c[m]=new Int16Array(0);N?a.CLog(V(\"ufqH::未进入异步前不能清除buffers\"),3):i?i.pcmSize-=k:a.recSize-=k}else O()}else a.state||a.CLog(\"envIn at state=0\",3)},start:function(){var t=this,e=1;if(t.set.sourceStream?t.Stream||(e=0):F.IsOpen()||(e=0),e){var r=t._streamCtx();if(t.CLog(V(\"kLDN::start 开始录音，\")+M(r)+\" stream:\"+t._streamTag),t._stop(),t.envStart(null,r[G]),t.state=3,t._SO&&t._SO+1!=t._S)t.CLog(V(\"Bp2y::start被中断\"),3);else{t._SO=0;var n=function(){3==t.state&&(t.state=1,t.resume())},a=\"AudioContext resume: \";L(r,function(e){return e&&t.CLog(a+\"wait...\"),3==t.state},function(e){e&&t.CLog(a+r.state),n()},function(e){t.CLog(a+r.state+V(\"upkE::，可能无法录音：\")+e,1),n()})}}else t.CLog(V(\"6WmN::start失败：未open\"),1)},pause:function(){var e=this,t=e._streamStore().Stream;e.state&&(e.state=2,e.CLog(\"pause\"),t&&delete t._call[e.id])},resume:function(){var r=this,t=r._streamStore().Stream,n=\"resume(wait ctx)\";if(3==r.state)r.CLog(n);else if(r.state){r.state=1,r.CLog(\"resume\"),r.envResume(),t&&(t._call[r.id]=function(e,t){1==r.state&&r.envIn(e,t)},o(t));var a=r._streamCtx();a&&L(a,function(e){return e&&r.CLog(n+\"...\"),1==r.state},function(e){e&&r.CLog(n+a.state),o(t)},function(e){r.CLog(n+a.state+\"[err]\"+e,1)})}},_stop:function(e){var t=this,r=t.set;t.isMock||t._S++,t.state&&(t.pause(),t.state=0),!e&&t[r.type+\"_stop\"]&&(t[r.type+\"_stop\"](t.engineCtx),t.engineCtx=0)},stop:function(l,t,e){var v,p=this,h=p.set,r=p.envInLast-p.envInFirst,n=r&&p.buffers.length;p.CLog(V(\"Xq4s::stop 和start时差:\")+(r?r+\"ms \"+V(\"3CQP::补偿:\")+p.envInFix+\"ms envIn:\"+n+\" fps:\"+(n/r*1e3).toFixed(1):\"-\")+\" stream:\"+p._streamTag+\" (\"+S+\") LM:\"+b);var g=function(){p._stop(),e&&p.close()},d=function(e){p.CLog(V(\"u8JG::结束录音失败：\")+e,1),t&&t(e),g()},a=function(e,t,r){var n=\"arraybuffer\",a=\"dataType\",o=\"DefaultDataType\",i=p[a]||F[o]||\"blob\",s=a+\"=\"+i,c=e instanceof ArrayBuffer,f=0,u=c?e.byteLength:e.size;if(i==n?c||(f=1):\"blob\"==i?\"function\"!=typeof Blob?f=V.G(\"NonBrowser-1\",[s])+V(\"1skY::，请设置{1}\",0,k+\".\"+o+'=\"'+n+'\"'):(c&&(e=new Blob([e],{type:t})),e instanceof Blob||(f=1),t=e.type||t):f=V.G(\"NotSupport-1\",[s]),p.CLog(V(\"Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b\",0,Date.now()-v,r,u)+\" \"+s+\",\"+t),f)d(1!=f?f:V(\"Vkbd::{1}编码器返回的不是{2}\",0,h.type,i)+\", \"+s);else{if(h.takeoffEncodeChunk)p.CLog(V(\"QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据\"),3);else if(u<Math.max(50,r/5))return void d(V(\"Sz2H::生成的{1}无效\",0,h.type));l&&l(e,r,t),g()}};if(!p.isMock){var o=3==p.state;if(!p.state||o)return void d(V(\"wf9t::未开始录音\")+(o?V(\"Dl2c::，开始录音前无用户交互导致AudioContext未运行\"):\"\"))}p._stop(!0);var i=p.recSize;if(i)if(p[h.type]){if(p.isMock){var s=p.envCheck(p.mockEnvInfo||{envName:\"mock\",canProcess:!1});if(s)return void d(V(\"AxOH::录音错误：\")+s)}var c=p.engineCtx;if(p[h.type+\"_complete\"]&&c){var f=Math.round(c.pcmSize/h[G]*1e3);return v=Date.now(),void p[h.type+\"_complete\"](c,function(e,t){a(e,t,f)},d)}if(v=Date.now(),p.buffers[0]){var u=F.SampleData(p.buffers,p[U],h[G]);h[G]=u[G];var m=u.data,f=Math.round(m.length/h[G]*1e3);p.CLog(V(\"CxeT::采样:{1} 花:{2}ms\",0,i+\"->\"+m.length,Date.now()-v)),setTimeout(function(){v=Date.now(),p[h.type](m,function(e,t){a(e,t,f)},function(e){d(e)})})}else d(V(\"xkKd::音频buffers被释放\"))}else d(V(\"xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载\",0,h.type,k));else d(V(\"Ltz3::未采集到录音\"))}};var z=function(e,t){t.pos||(t.pos=[0],t.tracks={},t.bytes=[]);var r=t.tracks,n=[t.pos[0]],a=function(){t.pos[0]=n[0]},o=t.bytes.length,i=new Uint8Array(o+e.length);if(i.set(t.bytes),i.set(e,o),t.bytes=i,!t._ht){if(P(i,n),B(i,n),!E(P(i,n),[24,83,128,103]))return;for(P(i,n);n[0]<i.length;){var s=P(i,n),c=B(i,n),f=[0],u=0;if(!c)return;if(E(s,[22,84,174,107])){for(;f[0]<c.length;){var l=P(c,f),v=B(c,f),p=[0],h={channels:0,sampleRate:0};if(E(l,[174]))for(;p[0]<v.length;){var g=P(v,p),d=B(v,p),m=[0];if(E(g,[215])){var C=W(d);h.number=C,r[C]=h}else if(E(g,[131])){var C=W(d);1==C?h.type=\"video\":2==C?(h.type=\"audio\",u||(t.track0=h),h.idx=u++):h.type=\"Type-\"+C}else if(E(g,[134])){for(var _=\"\",w=0;w<d.length;w++)_+=String.fromCharCode(d[w]);h.codec=_}else if(E(g,[225]))for(;m[0]<d.length;){var y=P(d,m),b=B(d,m);if(E(y,[181])){var C=0,S=new Uint8Array(b.reverse()).buffer;4==b.length?C=new Float32Array(S)[0]:8==b.length?C=new Float64Array(S)[0]:N(\"WebM Track !Float\",1,b),h[G]=Math.round(C)}else E(y,[98,100])?h.bitDepth=W(b):E(y,[159])&&(h.channels=W(b))}}}t._ht=1,N(\"WebM Tracks\",r),a();break}}}var x=t.track0;if(x){if(16==x.bitDepth&&/FLOAT/i.test(x.codec)&&(x.bitDepth=32,N(\"WebM 16->32 bit\",3)),x[G]!=t[G]||32!=x.bitDepth||x.channels<1||!/(\\b|_)PCM\\b/i.test(x.codec))return t.bytes=[],t.bad||N(\"WebM Track Unexpected\",3,t),-(t.bad=1);for(var M=[],k=0;n[0]<i.length;){var l=P(i,n),v=B(i,n);if(!v)break;if(E(l,[163])){var I=15&v[0],h=r[I];if(h){if(0===h.idx){for(var L=new Uint8Array(v.length-4),w=4;w<v.length;w++)L[w-4]=v[w];M.push(L),k+=L.length}}else N(\"WebM !Track\"+I,1,r)}a()}if(k){var T=new Uint8Array(i.length-t.pos[0]);T.set(i.subarray(t.pos[0])),t.bytes=T,t.pos[0]=0;for(var L=new Uint8Array(k),w=0,A=0;w<M.length;w++)L.set(M[w],A),A+=M[w].length;var S=new Float32Array(L.buffer);if(1<x.channels){for(var R=[],w=0;w<S.length;)R.push(S[w]),w+=x.channels;S=new Float32Array(R)}return S}}},E=function(e,t){if(!e||e.length!=t.length)return!1;if(1==e.length)return e[0]==t[0];for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0},W=function(e){for(var t=\"\",r=0;r<e.length;r++){var n=e[r];t+=(n<16?\"0\":\"\")+n.toString(16)}return parseInt(t,16)||0},P=function(e,t,r){var n=t[0];if(!(n>=e.length)){var a=e[n],o=(\"0000000\"+a.toString(2)).substr(-8),i=/^(0*1)(\\d*)$/.exec(o);if(i){var s=i[1].length,c=[];if(!(n+s>e.length)){for(var f=0;f<s;f++)c[f]=e[n],n++;return r&&(c[0]=parseInt(i[2]||\"0\",2)),t[0]=n,c}}}},B=function(e,t){var r=P(e,t,1);if(r){var n=W(r),a=t[0],o=[];if(n<2147483647){if(a+n>e.length)return;for(var i=0;i<n;i++)o[i]=e[a],a++}return t[0]=a,o}},$=F.i18n={lang:\"zh-CN\",alias:{\"zh-CN\":\"zh\",\"en-US\":\"en\"},locales:{},data:{},put:function(e,t){var r=k+\".i18n.put: \",n=e.overwrite;n=null==n||n;var a=e.lang;if(!(a=$.alias[a]||a))throw new Error(r+\"set.lang?\");var o=$.locales[a];o||(o={},$.locales[a]=o);for(var i,s=/^([\\w\\-]+):/,c=0;c<t.length;c++){var f=t[c];if(i=s.exec(f)){var u=i[1],f=f.substr(u.length+1);!n&&o[u]||(o[u]=f)}else N(r+\"'key:'? \"+f,3,e)}},get:function(){return $.v_G.apply(null,arguments)},v_G:function(n,a,e){a=a||[],e=e||$.lang,e=$.alias[e]||e;var t=$.locales[e],o=t&&t[n]||\"\";return o||\"zh\"==e?($.lastLang=e,\"=Empty\"==o?\"\":o.replace(/\\{(\\d+)(\\!?)\\}/g,function(e,t,r){return e=a[(t=+t||0)-1],(t<1||t>a.length)&&(e=\"{?}\",N(\"i18n[\"+n+\"] no {\"+t+\"}: \"+o,3)),r?\"\":e})):\"en\"==e?$.v_G(n,a,\"zh\"):$.v_G(n,a,\"en\")},$T:function(){return $.v_T.apply(null,arguments)},v_T:function(){for(var e,t=arguments,r=\"\",n=[],a=0,o=k+\".i18n.$T:\",i=/^([\\w\\-]*):/,s=0;s<t.length;s++){var c=t[s];if(0==s){if(e=i.exec(c),!(r=e&&e[1]))throw new Error(o+\"0 'key:'?\");c=c.substr(r.length+1)}if(-1===a)n.push(c);else{if(a)throw new Error(o+\" bad args\");if(0===c)a=-1;else if(u(c)){if(c<1)throw new Error(o+\" bad args\");a=c}else{var f=1==s?\"en\":s?\"\":\"zh\";if((e=i.exec(c))&&(f=e[1]||f,c=c.substr(e[1].length+1)),!e||!f)throw new Error(o+s+\" 'lang:'?\");$.put({lang:f,overwrite:!1},[r+\":\"+c])}}}return r?0<a?r:$.v_G(r,n):\"\"}},V=$.$T;V.G=$.get,V(\"NonBrowser-1::非浏览器环境，不支持{1}\",1),V(\"IllegalArgs-1::参数错误：{1}\",1),V(\"NeedImport-2::调用{1}需要先导入{2}\",2),V(\"NotSupport-1::不支持：{1}\",1),F.TrafficImgUrl=\"//ia.51.la/go1?id=20469973&pvFlag=1\";var v=F.Traffic=function(e){if(w){e=e?\"/\"+k+\"/Report/\"+e:\"\";var t=F.TrafficImgUrl;if(t){var r=F.Traffic,n=/^(https?:..[^\\/#]*\\/?)[^#]*/i.exec(location.href)||[],a=n[1]||\"http://file/\",o=(n[0]||a)+e;if(0==t.indexOf(\"//\")&&(t=/^https:/i.test(o)?\"https:\"+t:\"http:\"+t),e&&(t=t+\"&cu=\"+encodeURIComponent(a+e)),!r[o]){r[o]=1;var i=new Image;i.src=t,N(\"Traffic Analysis Image: \"+(e||k+\".TrafficImgUrl=\"+F.TrafficImgUrl))}}}};t&&(N(V(\"8HO5::覆盖导入{1}\",0,k),1),t.Destroy());e[k]=F}(r,t),\"function\"==typeof define&&define.amd&&define(function(){return r.Recorder}),\"object\"==typeof module&&module.exports&&(module.exports=r.Recorder)}(),function(e){var t=\"object\"==typeof window&&!!window.document,r=(t?window:Object).Recorder,n=r.i18n;!function(p,e,h,t){\"use strict\";p.prototype.enc_wav={stable:!0,fast:!0,getTestMsg:function(){return h(\"gPSE::支持位数8位、16位（填在比特率里面），采样率取值无限制；此编码器仅在pcm数据前加了一个44字节的wav头，编码出来的16位wav文件去掉开头的44字节即可得到pcm（注：其他wav编码器可能不是44字节）\")}};p.prototype.wav=function(e,t,r){var n=this.set;!function(e){var t=e.bitRate,r=8==t?8:16;t!=r&&p.CLog(h(\"wyw9::WAV Info: 不支持{1}位，已更新成{2}位\",0,t,r),3);e.bitRate=r}(n);var a=e.length,o=n.sampleRate,i=n.bitRate,s=a*(i/8),c=p.wav_header(1,1,o,i,s),f=c.length,u=new Uint8Array(f+s);if(u.set(c),8==i)for(var l=0;l<a;l++){var v=128+(e[l]>>8);u[f++]=v}else(u=new Int16Array(u.buffer)).set(e,f/2);t(u.buffer,\"audio/wav\")},p.wav_header=function(e,t,r,n,a){var o=1==e?0:2,i=new ArrayBuffer(44+o),s=new DataView(i),c=0,f=function(e){for(var t=0;t<e.length;t++,c++)s.setUint8(c,e.charCodeAt(t))},u=function(e){s.setUint16(c,e,!0),c+=2},l=function(e){s.setUint32(c,e,!0),c+=4};return f(\"RIFF\"),l(36+o+a),f(\"WAVE\"),f(\"fmt \"),l(16+o),u(e),u(t),l(r),l(r*(t*n/8)),u(t*n/8),u(n),1!=e&&u(0),f(\"data\"),l(a),new Uint8Array(i)}}(r,0,n.$T)}();","/*\n录音\nhttps://github.com/xiangyuecn/Recorder\n*/\n(function(factory){\n\tvar browser=typeof window==\"object\" && !!window.document;\n\tvar win=browser?window:Object; //非浏览器环境，Recorder挂载在Object下面\n\tfactory(win,browser);\n\t//umd returnExports.js\n\tif(typeof(define)=='function' && define.amd){\n\t\tdefine(function(){\n\t\t\treturn win.Recorder;\n\t\t});\n\t};\n\tif(typeof(module)=='object' && module.exports){\n\t\tmodule.exports=win.Recorder;\n\t};\n}(function(Export,isBrowser){\n\"use strict\";\n\nvar NOOP=function(){};\nvar IsNum=function(v){return typeof v==\"number\"};\n\nvar Recorder=function(set){\n\treturn new initFn(set);\n};\nvar LM=Recorder.LM=\"2024-04-09 19:15\";\nvar GitUrl=\"https://github.com/xiangyuecn/Recorder\";\nvar RecTxt=\"Recorder\";\nvar getUserMediaTxt=\"getUserMedia\";\nvar srcSampleRateTxt=\"srcSampleRate\";\nvar sampleRateTxt=\"sampleRate\";\nvar bitRateTxt=\"bitRate\";\nvar CatchTxt=\"catch\";\n\nvar WRec2=Export[RecTxt];//重复加载js\nif(WRec2&&WRec2.LM==LM){\n\tWRec2.CLog(WRec2.i18n.$T(\"K8zP::重复导入{1}\",0,RecTxt),3);\n\treturn;\n};\n\n\n//是否已经打开了全局的麦克风录音，所有工作都已经准备好了，就等接收音频数据了\nRecorder.IsOpen=function(){\n\tvar stream=Recorder.Stream;\n\tif(stream){\n\t\tvar tracks=stream.getTracks&&stream.getTracks()||stream.audioTracks||[];\n\t\tvar track=tracks[0];\n\t\tif(track){\n\t\t\tvar state=track.readyState;\n\t\t\treturn state==\"live\"||state==track.LIVE;\n\t\t};\n\t};\n\treturn false;\n};\n/*H5录音时的AudioContext缓冲大小。会影响H5录音时的onProcess调用速率，相对于AudioContext.sampleRate=48000时，4096接近12帧/s，调节此参数可生成比较流畅的回调动画。\n\t取值256, 512, 1024, 2048, 4096, 8192, or 16384\n\t注意，取值不能过低，2048开始不同浏览器可能回调速率跟不上造成音质问题。\n\t一般无需调整，调整后需要先close掉已打开的录音，再open时才会生效。\n*/\nRecorder.BufferSize=4096;\n//销毁已持有的所有全局资源，当要彻底移除Recorder时需要显式的调用此方法\nRecorder.Destroy=function(){\n\tCLog(RecTxt+\" Destroy\");\n\tDisconnect();//断开可能存在的全局Stream、资源\n\t\n\tfor(var k in DestroyList){\n\t\tDestroyList[k]();\n\t};\n};\nvar DestroyList={};\n//登记一个需要销毁全局资源的处理方法\nRecorder.BindDestroy=function(key,call){\n\tDestroyList[key]=call;\n};\n//判断浏览器是否支持录音，随时可以调用。注意：仅仅是检测浏览器支持情况，不会判断和调起用户授权，不会判断是否支持特定格式录音。\nRecorder.Support=function(){\n\tif(!isBrowser) return false;\n\tvar scope=navigator.mediaDevices||{};\n\tif(!scope[getUserMediaTxt]){\n\t\tscope=navigator;\n\t\tscope[getUserMediaTxt]||(scope[getUserMediaTxt]=scope.webkitGetUserMedia||scope.mozGetUserMedia||scope.msGetUserMedia);\n\t};\n\tif(!scope[getUserMediaTxt]){\n\t\treturn false;\n\t};\n\tRecorder.Scope=scope;\n\t\n\tif(!Recorder.GetContext()){\n\t\treturn false;\n\t};\n\treturn true;\n};\n//获取全局的AudioContext对象，如果浏览器不支持将返回null。tryNew时尝试创建新的非全局对象并返回，失败时依旧返回全局的；成功时返回新的，注意用完必须自己调用CloseNewCtx(ctx)关闭。注意：非用户操作（触摸、点击等）时调用返回的ctx.state可能是suspended状态，需要在用户操作时调用ctx.resume恢复成running状态，参考rec的runningContext配置\nRecorder.GetContext=function(tryNew){\n\tif(!isBrowser) return null;\n\tvar AC=window.AudioContext;\n\tif(!AC){\n\t\tAC=window.webkitAudioContext;\n\t};\n\tif(!AC){\n\t\treturn null;\n\t};\n\t\n\tvar ctx=Recorder.Ctx;\n\tif(!ctx||ctx.state==\"closed\"){\n\t\t//不能反复构造，低版本number of hardware contexts reached maximum (6)\n\t\tctx=Recorder.Ctx=new AC();\n\t\tRecorder.NewCtxs=Recorder.NewCtxs||[];\n\t\t\n\t\tRecorder.BindDestroy(\"Ctx\",function(){\n\t\t\tvar ctx=Recorder.Ctx;\n\t\t\tif(ctx&&ctx.close){//能关掉就关掉，关不掉就保留着\n\t\t\t\tCloseCtx(ctx);\n\t\t\t\tRecorder.Ctx=0;\n\t\t\t};\n\t\t\tvar arr=Recorder.NewCtxs; Recorder.NewCtxs=[];\n\t\t\tfor(var i=0;i<arr.length;i++)CloseCtx(arr[i]);\n\t\t});\n\t};\n\tif(tryNew && ctx.close){//没法关闭的不允许再创建\n\t\ttry{\n\t\t\tctx=new AC();\n\t\t\tRecorder.NewCtxs.push(ctx);\n\t\t}catch(e){\n\t\t\tCLog(\"GetContext tryNew Error\",1,e);\n\t\t}\n\t};\n\treturn ctx;\n};\n//关闭新创建的AudioContext，如果是全局的不关闭\nRecorder.CloseNewCtx=function(ctx){\n\tif(ctx && ctx!=Recorder.Ctx){\n\t\tCloseCtx(ctx);\n\t\tvar arr=Recorder.NewCtxs||[],L=arr.length;\n\t\tfor(var i=0;i<arr.length;i++){\n\t\t\tif(arr[i]==ctx){ arr.splice(i,1); break; }\n\t\t}\n\t\tCLog($T(\"mSxV::剩{1}个GetContext未close\",0,L+\"-1=\"+arr.length),arr.length?3:0);\n\t}\n};\nvar CloseCtx=function(ctx){\n\tif(ctx && ctx.close){\n\t\tctx._isC=1;\n\t\ttry{ ctx.close() }catch(e){ CLog(\"ctx close err\",1,e) }\n\t}\n};\n//当AudioContext的状态是suspended时，调用resume恢复状态，但如果没有用户操作resume可能没有回调，封装解决此回调问题；check(count)返回true继续尝试resume，返回false终止任务（不回调False）\nvar ResumeCtx=Recorder.ResumeCtx=function(ctx,check,True,False){\n\tvar isEnd=0,isBind=0,isLsSC=0,runC=0,EL=\"EventListener\",Tag=\"ResumeCtx \";\n\tvar end=function(err,ok){\n\t\tif(isBind){ bind() }\n\t\tif(!isEnd){ isEnd=1; //回调结果\n\t\t\terr&&False(err,runC);\n\t\t\tok&&True(runC);\n\t\t}\n\t\tif(ok){ //监听后续状态变化\n\t\t\tif(!ctx._LsSC && ctx[\"add\"+EL]) ctx[\"add\"+EL](\"statechange\",run);\n\t\t\tctx._LsSC=1; isLsSC=1;\n\t\t}\n\t};\n\tvar bind=function(add){\n\t\tif(add && isBind) return; isBind=add?1:0;\n\t\tvar types=[\"focus\",\"mousedown\",\"mouseup\",\"touchstart\",\"touchend\"];\n\t\tfor(var i=0;i<types.length;i++)\n\t\t\twindow[(add?\"add\":\"remove\")+EL](types[i],run,true);\n\t};\n\tvar run=function(){\n\t\tvar sVal=ctx.state,spEnd=CtxSpEnd(sVal);\n\t\tif(!isEnd && !check(spEnd?++runC:runC))return end(); //终止，不回调\n\t\tif(spEnd){\n\t\t\tif(isLsSC)CLog(Tag+\"sc \"+sVal,3);\n\t\t\tbind(1); //绑定用户事件尝试恢复\n\t\t\tctx.resume().then(function(){ //resume回调不可靠\n\t\t\t\tif(isLsSC)CLog(Tag+\"sc \"+ctx.state);\n\t\t\t\tend(0,1);\n\t\t\t})[CatchTxt](function(e){ //出错且无法恢复\n\t\t\t\tCLog(Tag+\"error\",1,e);\n\t\t\t\tif(!CtxSpEnd(ctx.state)){\n\t\t\t\t\tend(e.message||\"error\");\n\t\t\t\t}\n\t\t\t});\n\t\t}else if(sVal==\"closed\"){\n\t\t\tif(isLsSC && !ctx._isC)CLog(Tag+\"sc \"+sVal,1); //无法恢复，打个日志\n\t\t\tend(\"ctx closed\");\n\t\t}else{ end(0,1) }; //running 或老的无state\n\t};\n\trun();\n};\nvar CtxSpEnd=Recorder.CtxSpEnd=function(v){\n\treturn v==\"suspended\"||v==\"interrupted\"; //后面这个仅iOS有\n};\nvar CtxState=function(ctx){\n\tvar v=ctx.state,msg=\"ctx.state=\"+v;\n\tif(CtxSpEnd(v))msg+=$T(\"nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）\");\n\treturn msg;\n};\n\n\n/*是否启用MediaRecorder.WebM.PCM来进行音频采集连接（如果浏览器支持的话），默认启用，禁用或者不支持时将使用AudioWorklet或ScriptProcessor来连接；MediaRecorder采集到的音频数据比其他方式更好，几乎不存在丢帧现象，所以音质明显会好很多，建议保持开启*/\nvar ConnectEnableWebM=\"ConnectEnableWebM\";\nRecorder[ConnectEnableWebM]=true;\n\n/*是否启用AudioWorklet特性来进行音频采集连接（如果浏览器支持的话），默认禁用，禁用或不支持时将使用过时的ScriptProcessor来连接（如果方法还在的话），当前AudioWorklet的实现在移动端没有ScriptProcessor稳健；ConnectEnableWebM如果启用并且有效时，本参数将不起作用*/\nvar ConnectEnableWorklet=\"ConnectEnableWorklet\";\nRecorder[ConnectEnableWorklet]=false;\n\n/*初始化H5音频采集连接。如果自行提供了sourceStream将只进行一次简单的连接处理。如果是普通麦克风录音，此时的Stream是全局的，Safari上断开后就无法再次进行连接使用，表现为静音，因此使用全部使用全局处理避免调用到disconnect；全局处理也有利于屏蔽底层细节，start时无需再调用底层接口，提升兼容、可靠性。*/\nvar Connect=function(streamStore,isUserMedia){\n\tvar bufferSize=streamStore.BufferSize||Recorder.BufferSize;\n\t\n\tvar stream=streamStore.Stream;\n\tvar ctx=stream._RC || stream._c || Recorder.GetContext(true);//2023-06 尽量创建新的ctx，免得Safari再次连接无回调\n\tstream._c=ctx;\n\t\n\tvar mediaConn=function(node){\n\t\tvar media=stream._m=ctx.createMediaStreamSource(stream);\n\t\tvar ctxDest=ctx.destination,cmsdTxt=\"createMediaStreamDestination\";\n\t\tif(ctx[cmsdTxt]){\n\t\t\tctxDest=stream._d=ctx[cmsdTxt]();\n\t\t};\n\t\tmedia.connect(node);\n\t\tnode.connect(ctxDest);\n\t}\n\tvar isWebM,isWorklet,badInt,webMTips=\"\";\n\tvar calls=stream._call;\n\t\n\t//浏览器回传的音频数据处理\n\tvar onReceive=function(float32Arr){\n\t\tfor(var k0 in calls){//has item\n\t\t\tvar size=float32Arr.length;\n\t\t\t\n\t\t\tvar pcm=new Int16Array(size);\n\t\t\tvar sum=0;\n\t\t\tfor(var j=0;j<size;j++){//floatTo16BitPCM \n\t\t\t\tvar s=Math.max(-1,Math.min(1,float32Arr[j]));\n\t\t\t\ts=s<0?s*0x8000:s*0x7FFF;\n\t\t\t\tpcm[j]=s;\n\t\t\t\tsum+=Math.abs(s);\n\t\t\t};\n\t\t\t\n\t\t\tfor(var k in calls){\n\t\t\t\tcalls[k](pcm,sum);\n\t\t\t};\n\t\t\t\n\t\t\treturn;\n\t\t};\n\t};\n\t\n\tvar scriptProcessor=\"ScriptProcessor\";//一堆字符串名字，有利于压缩js\n\tvar audioWorklet=\"audioWorklet\";\n\tvar recAudioWorklet=RecTxt+\" \"+audioWorklet;\n\tvar RecProc=\"RecProc\";\n\tvar MediaRecorderTxt=\"MediaRecorder\";\n\tvar MRWebMPCM=MediaRecorderTxt+\".WebM.PCM\";\n\n\n//===================连接方式三=========================\n\t//古董级别的 ScriptProcessor 处理，目前所有浏览器均兼容，虽然是过时的方法，但更稳健，移动端性能比AudioWorklet强\n\tvar oldFn=ctx.createScriptProcessor||ctx.createJavaScriptNode;\n\tvar oldIsBest=$T(\"ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。\",0,audioWorklet);\n\tvar oldScript=function(){\n\t\tisWorklet=stream.isWorklet=false;\n\t\t_Disconn_n(stream);\n\t\tCLog($T(\"7TU0::Connect采用老的{1}，\",0,scriptProcessor)\n\t\t\t+i18n.get(Recorder[ConnectEnableWorklet]?\n\t\t\t\t$T(\"JwCL::但已设置{1}尝试启用{2}\",2)\n\t\t\t\t:$T(\"VGjB::可设置{1}尝试启用{2}\",2)\n\t\t\t\t,[RecTxt+\".\"+ConnectEnableWorklet+\"=true\",audioWorklet]\n\t\t\t)+webMTips+oldIsBest,3);\n\t\t\n\t\tvar process=stream._p=oldFn.call(ctx,bufferSize,1,1);//单声道，省的数据处理复杂\n\t\tmediaConn(process);\n\t\t\n\t\tprocess.onaudioprocess=function(e){\n\t\t\tvar arr=e.inputBuffer.getChannelData(0);\n\t\t\tonReceive(arr);\n\t\t};\n\t};\n\n\n//===================连接方式二=========================\nvar connWorklet=function(){\n\t//尝试开启AudioWorklet处理\n\tisWebM=stream.isWebM=false;\n\t_Disconn_r(stream);\n\t\n\tisWorklet=stream.isWorklet=!oldFn || Recorder[ConnectEnableWorklet];\n\tvar AwNode=window.AudioWorkletNode;\n\tif(!(isWorklet && ctx[audioWorklet] && AwNode)){\n\t\toldScript();//被禁用 或 不支持，直接使用老的\n\t\treturn;\n\t};\n\tvar clazzUrl=function(){\n\t\tvar xf=function(f){return f.toString().replace(/^function|DEL_/g,\"\").replace(/\\$RA/g,recAudioWorklet)};\n\t\tvar clazz='class '+RecProc+' extends AudioWorkletProcessor{';\n\t\t\tclazz+=\"constructor \"+xf(function(option){\n\t\t\t\tDEL_super(option);\n\t\t\t\tvar This=this,bufferSize=option.processorOptions.bufferSize;\n\t\t\t\tThis.bufferSize=bufferSize;\n\t\t\t\tThis.buffer=new Float32Array(bufferSize*2);//乱给size搞乱缓冲区不管\n\t\t\t\tThis.pos=0;\n\t\t\t\tThis.port.onmessage=function(e){\n\t\t\t\t\tif(e.data.kill){\n\t\t\t\t\t\tThis.kill=true;\n\t\t\t\t\t\t$C.log(\"$RA kill call\");\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t$C.log(\"$RA .ctor call\", option);\n\t\t\t});\n\t\t\t\n\t\t\t//https://developer.mozilla.org/en-US/docs/Web/API/AudioWorkletProcessor/process 每次回调128个采样数据，1秒375次回调，高频导致移动端性能问题，结果就是回调次数缺斤少两，进而导致丢失数据，PC端似乎没有性能问题\n\t\t\tclazz+=\"process \"+xf(function(input,b,c){//需要等到ctx激活后才会有回调\n\t\t\t\tvar This=this,bufferSize=This.bufferSize;\n\t\t\t\tvar buffer=This.buffer,pos=This.pos;\n\t\t\t\tinput=(input[0]||[])[0]||[];\n\t\t\t\tif(input.length){\n\t\t\t\t\tbuffer.set(input,pos);\n\t\t\t\t\tpos+=input.length;\n\t\t\t\t\t\n\t\t\t\t\tvar len=~~(pos/bufferSize)*bufferSize;\n\t\t\t\t\tif(len){\n\t\t\t\t\t\tthis.port.postMessage({ val: buffer.slice(0,len) });\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar more=buffer.subarray(len,pos);\n\t\t\t\t\t\tbuffer=new Float32Array(bufferSize*2);\n\t\t\t\t\t\tbuffer.set(more);\n\t\t\t\t\t\tpos=more.length;\n\t\t\t\t\t\tThis.buffer=buffer;\n\t\t\t\t\t}\n\t\t\t\t\tThis.pos=pos;\n\t\t\t\t}\n\t\t\t\treturn !This.kill;\n\t\t\t});\n\t\tclazz+='}'\n\t\t\t+'try{'\n\t\t\t\t+'registerProcessor(\"'+RecProc+'\", '+RecProc+')'\n\t\t\t+'}catch(e){$C.error(\"'+recAudioWorklet+' Reg Error\",e)}';\n\t\tclazz=clazz.replace(/\\$C\\./g,\"console.\");//一些编译器会文本替换日志函数\n\t\t//URL.createObjectURL 本地有些浏览器会报 Not allowed to load local resource，直接用dataurl\n\t\treturn \"data:text/javascript;base64,\"+btoa(unescape(encodeURIComponent(clazz)));\n\t};\n\t\n\tvar awNext=function(){//可以继续，没有调用断开\n\t\treturn isWorklet && stream._na;\n\t};\n\tvar nodeAlive=stream._na=function(){\n\t\t//start时会调用，只要没有收到数据就断定AudioWorklet有问题，恢复用老的\n\t\tif(badInt!==\"\"){//没有回调过数据\n\t\t\tclearTimeout(badInt);\n\t\t\tbadInt=setTimeout(function(){\n\t\t\t\tbadInt=0;\n\t\t\t\tif(awNext()){\n\t\t\t\t\tCLog($T(\"MxX1::{1}未返回任何音频，恢复使用{2}\",0,audioWorklet,scriptProcessor),3);\n\t\t\t\t\toldFn&&oldScript();//未来没有老的，可能是误判\n\t\t\t\t};\n\t\t\t},500);\n\t\t};\n\t};\n\tvar createNode=function(){\n\t\tif(!awNext())return;\n\t\tvar node=stream._n=new AwNode(ctx, RecProc, {\n\t\t\tprocessorOptions:{bufferSize:bufferSize}\n\t\t});\n\t\tmediaConn(node);\n\t\tnode.port.onmessage=function(e){\n\t\t\tif(badInt){\n\t\t\t\tclearTimeout(badInt);badInt=\"\";\n\t\t\t};\n\t\t\tif(awNext()){\n\t\t\t\tonReceive(e.data.val);\n\t\t\t}else if(!isWorklet){\n\t\t\t\tCLog($T(\"XUap::{1}多余回调\",0,audioWorklet),3);\n\t\t\t};\n\t\t};\n\t\tCLog($T(\"yOta::Connect采用{1}，设置{2}可恢复老式{3}\",0,audioWorklet,RecTxt+\".\"+ConnectEnableWorklet+\"=false\",scriptProcessor)+webMTips+oldIsBest,3);\n\t};\n\t\n\t//如果start时的resume和下面的构造node同时进行，将会导致部分浏览器崩溃 (STATUS_ACCESS_VIOLATION)，源码assets中 ztest_chrome_bug_AudioWorkletNode.html 可测试。所以，将所有代码套到resume里面（不管catch），避免出现这个问题\n\tvar ctxOK=function(){\n\t\tif(!awNext())return;\n\t\tif(ctx[RecProc]){\n\t\t\tcreateNode();\n\t\t\treturn;\n\t\t};\n\t\tvar url=clazzUrl();\n\t\tctx[audioWorklet].addModule(url).then(function(e){\n\t\t\tif(!awNext())return;\n\t\t\tctx[RecProc]=1;\n\t\t\tcreateNode();\n\t\t\tif(badInt){//重新计时\n\t\t\t\tnodeAlive();\n\t\t\t};\n\t\t})[CatchTxt](function(e){ //fix 关键字，保证catch压缩时保持字符串形式\n\t\t\tCLog(audioWorklet+\".addModule Error\",1,e);\n\t\t\tawNext()&&oldScript();\n\t\t});\n\t};\n\tResumeCtx(ctx,function(){ return awNext() } ,ctxOK,ctxOK);\n};\n\n\n//===================连接方式一=========================\nvar connWebM=function(){\n\t//尝试开启MediaRecorder录制webm+pcm处理\n\tvar MR=window[MediaRecorderTxt];\n\tvar onData=\"ondataavailable\";\n\tvar webmType=\"audio/webm; codecs=pcm\";\n\tisWebM=stream.isWebM=Recorder[ConnectEnableWebM];\n\t\n\tvar supportMR=MR && (onData in MR.prototype) && MR.isTypeSupported(webmType);\n\twebMTips=supportMR?\"\":$T(\"VwPd::（此浏览器不支持{1}）\",0,MRWebMPCM);\n\tif(!isUserMedia || !isWebM || !supportMR){\n\t\tconnWorklet(); //非麦克风录音（MediaRecorder采样率不可控） 或 被禁用 或 不支持MediaRecorder 或 不支持webm+pcm\n\t\treturn;\n\t}\n\t\n\tvar mrNext=function(){//可以继续，没有调用断开\n\t\treturn isWebM && stream._ra;\n\t};\n\tvar mrAlive=stream._ra=function(){\n\t\t//start时会调用，只要没有收到数据就断定MediaRecorder有问题，降级处理\n\t\tif(badInt!==\"\"){//没有回调过数据\n\t\t\tclearTimeout(badInt);\n\t\t\tbadInt=setTimeout(function(){\n\t\t\t\t//badInt=0; 保留给nodeAlive继续判断\n\t\t\t\tif(mrNext()){\n\t\t\t\t\tCLog($T(\"vHnb::{1}未返回任何音频，降级使用{2}\",0,MediaRecorderTxt,audioWorklet),3);\n\t\t\t\t\tconnWorklet();\n\t\t\t\t};\n\t\t\t},500);\n\t\t};\n\t};\n\t\n\tvar mrSet=Object.assign({mimeType:webmType}, Recorder.ConnectWebMOptions);\n\tvar mr=stream._r=new MR(stream, mrSet);\n\tvar webmData=stream._rd={sampleRate:ctx[sampleRateTxt]};\n\tmr[onData]=function(e){\n\t\t//提取webm中的pcm数据，提取失败就等着badInt超时降级处理\n\t\tvar reader=new FileReader();\n\t\treader.onloadend=function(){\n\t\t\tif(mrNext()){\n\t\t\t\tvar f32arr=WebM_Extract(new Uint8Array(reader.result),webmData);\n\t\t\t\tif(!f32arr)return;\n\t\t\t\tif(f32arr==-1){//无法提取，立即降级\n\t\t\t\t\tconnWorklet();\n\t\t\t\t\treturn;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif(badInt){\n\t\t\t\t\tclearTimeout(badInt);badInt=\"\";\n\t\t\t\t};\n\t\t\t\tonReceive(f32arr);\n\t\t\t}else if(!isWebM){\n\t\t\t\tCLog($T(\"O9P7::{1}多余回调\",0,MediaRecorderTxt),3);\n\t\t\t};\n\t\t};\n\t\treader.readAsArrayBuffer(e.data);\n\t};\n\tmr.start(~~(bufferSize/48));//按48k时的回调间隔\n\tCLog($T(\"LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}\",0,MRWebMPCM,RecTxt+\".\"+ConnectEnableWebM+\"=false\",audioWorklet,scriptProcessor));\n};\n\n\tconnWebM();\n};\nvar ConnAlive=function(stream){\n\tif(stream._na) stream._na(); //检查AudioWorklet连接是否有效，无效就回滚到老的ScriptProcessor\n\tif(stream._ra) stream._ra(); //检查MediaRecorder连接是否有效，无效就降级处理\n};\nvar _Disconn_n=function(stream){\n\tstream._na=null;\n\tif(stream._n){\n\t\tstream._n.port.postMessage({kill:true});\n\t\tstream._n.disconnect();\n\t\tstream._n=null;\n\t};\n};\nvar _Disconn_r=function(stream){\n\tstream._ra=null;\n\tif(stream._r){\n\t\ttry{ stream._r.stop() }catch(e){ CLog(\"mr stop err\",1,e) }\n\t\tstream._r=null;\n\t};\n};\nvar Disconnect=function(streamStore){\n\tstreamStore=streamStore||Recorder;\n\tvar isGlobal=streamStore==Recorder;\n\t\n\tvar stream=streamStore.Stream;\n\tif(stream){\n\t\tif(stream._m){\n\t\t\tstream._m.disconnect();\n\t\t\tstream._m=null;\n\t\t};\n\t\tif(!stream._RC && stream._c){//提供的runningContext不处理\n\t\t\tRecorder.CloseNewCtx(stream._c);\n\t\t};\n\t\tstream._RC=null; stream._c=null;\n\t\tif(stream._d){\n\t\t\tStopS_(stream._d.stream);\n\t\t\tstream._d=null;\n\t\t};\n\t\tif(stream._p){\n\t\t\tstream._p.disconnect();\n\t\t\tstream._p.onaudioprocess=stream._p=null;\n\t\t};\n\t\t_Disconn_n(stream);\n\t\t_Disconn_r(stream);\n\t\t\n\t\tif(isGlobal){//全局的时候，要把流关掉（麦克风），直接提供的流不处理\n\t\t\tStopS_(stream);\n\t\t};\n\t};\n\tstreamStore.Stream=0;\n};\n//关闭一个音频流\nvar StopS_=Recorder.StopS_=function(stream){\n\tvar tracks=stream.getTracks&&stream.getTracks()||stream.audioTracks||[];\n\tfor(var i=0;i<tracks.length;i++){\n\t\tvar track=tracks[i];\n\t\ttrack.stop&&track.stop();\n\t};\n\tstream.stop&&stream.stop();\n};\n\n/*对pcm数据的采样率进行转换\npcmDatas: [[Int16,...]] pcm片段列表\npcmSampleRate:48000 pcm数据的采样率\nnewSampleRate:16000 需要转换成的采样率，newSampleRate>=pcmSampleRate时不会进行任何处理，小于时会进行重新采样\nprevChunkInfo:{} 可选，上次调用时的返回值，用于连续转换，本次调用将从上次结束位置开始进行处理。或可自行定义一个ChunkInfo从pcmDatas指定的位置开始进行转换\noption:{ 可选，配置项\n\t\tframeSize:123456 帧大小，每帧的PCM Int16的数量，采样率转换后的pcm长度为frameSize的整数倍，用于连续转换。目前仅在mp3格式时才有用，frameSize取值为1152，这样编码出来的mp3时长和pcm的时长完全一致，否则会因为mp3最后一帧录音不够填满时添加填充数据导致mp3的时长变长。\n\t\tframeType:\"\" 帧类型，一般为rec.set.type，提供此参数时无需提供frameSize，会自动使用最佳的值给frameSize赋值，目前仅支持mp3=1152(MPEG1 Layer3的每帧采采样数)，其他类型=1。\n\t\t\t以上两个参数用于连续转换时使用，最多使用一个，不提供时不进行帧的特殊处理，提供时必须同时提供prevChunkInfo才有作用。最后一段数据处理时无需提供帧大小以便输出最后一丁点残留数据。\n\t}\n\n返回ChunkInfo:{\n\t//可定义，从指定位置开始转换到结尾\n\tindex:0 pcmDatas已处理到的索引\n\toffset:0.0 已处理到的index对应的pcm中的偏移的下一个位置\n\t\n\t//可定义，指定的一个滤波配置：默认使用Recorder.IIRFilter低通滤波（可有效抑制混叠产生的杂音，新采样率大于pcm采样率的75%时不默认滤波），如果提供了配置但fn为null时将不滤波；sr为此滤波函数对应的初始化采样率，当采样率和pcmSampleRate参数不一致时将重新设为默认函数\n\tfilter:null||{fn:fn(sample),sr:pcmSampleRate}\n\t\n\t//仅作为返回值\n\tframeNext:null||[Int16,...] 下一帧的部分数据，frameSize设置了的时候才可能会有\n\tsampleRate:16000 结果的采样率，<=newSampleRate\n\tdata:[Int16,...] 转换后的PCM结果；如果是连续转换，并且pcmDatas中并没有新数据时，data的长度可能为0\n}\n*/\nRecorder.SampleData=function(pcmDatas,pcmSampleRate,newSampleRate,prevChunkInfo,option){\n\tvar Txt=\"SampleData\";\n\tprevChunkInfo||(prevChunkInfo={});\n\tvar index=prevChunkInfo.index||0;\n\tvar offset=prevChunkInfo.offset||0;\n\t\n\tvar filter=prevChunkInfo.filter;\n\tif(filter&&filter.fn&&filter.sr!=pcmSampleRate){\n\t\tfilter=null; CLog($T(\"d48C::{1}的filter采样率变了，重设滤波\",0,Txt),3);\n\t};\n\tif(!filter){//采样率差距比较大才开启低通滤波，最高频率用新采样率频率的3/4\n\t\tvar freq=newSampleRate>pcmSampleRate*3/4?0: newSampleRate/2 *3/4;\n\t\tfilter={fn:freq?Recorder.IIRFilter(true,pcmSampleRate,freq):0};\n\t};\n\tfilter.sr=pcmSampleRate;\n\tvar filterFn=filter.fn;\n\t\n\tvar frameNext=prevChunkInfo.frameNext||[];\n\toption||(option={});\n\tvar frameSize=option.frameSize||1;\n\tif(option.frameType){\n\t\tframeSize=option.frameType==\"mp3\"?1152:1;\n\t};\n\t\n\tvar nLen=pcmDatas.length;\n\tif(index>nLen+1){\n\t\tCLog($T(\"tlbC::{1}似乎传入了未重置chunk {2}\",0,Txt,index+\">\"+nLen),3);\n\t};\n\tvar size=0;\n\tfor(var i=index;i<nLen;i++){\n\t\tsize+=pcmDatas[i].length;\n\t};\n\tsize=Math.max(0,size-Math.floor(offset));\n\t\n\t//采样 https://www.cnblogs.com/blqw/p/3782420.html\n\tvar step=pcmSampleRate/newSampleRate;\n\tif(step>1){//新采样低于录音采样，进行抽样\n\t\tsize=Math.floor(size/step);\n\t}else{//新采样高于录音采样不处理，省去了插值处理\n\t\tstep=1;\n\t\tnewSampleRate=pcmSampleRate;\n\t};\n\t\n\tsize+=frameNext.length;\n\tvar res=new Int16Array(size);\n\tvar idx=0;\n\t//添加上一次不够一帧的剩余数据\n\tfor(var i=0;i<frameNext.length;i++){\n\t\tres[idx]=frameNext[i];\n\t\tidx++;\n\t};\n\t//处理数据\n\tfor (;index<nLen;index++) {\n\t\tvar o=pcmDatas[index];\n\t\tvar i=offset,il=o.length;\n\t\tvar F=filterFn&&filterFn.Embed,F1=0,F2=0,Fx=0,Fy=0;//低通滤波后的数据\n\t\tfor(var i0=0,i2=0;i0<il;i0++,i2++){\n\t\t\tif(i2<il){\n\t\t\t\tif(F){//IIRFilter代码内置，比函数调用快4倍\n\t\t\t\t\tFx=o[i2];\n\t\t\t\t\tFy=F.b0 * Fx + F.b1 * F.x1 + F.b0 * F.x2 - F.a1 * F.y1 - F.a2 * F.y2;\n\t\t\t\t\tF.x2 = F.x1; F.x1 = Fx; F.y2 = F.y1; F.y1 = Fy;\n\t\t\t\t}else{ Fy=filterFn?filterFn(o[i2]):o[i2]; }\n\t\t\t}\n\t\t\tF1=F2; F2=Fy;\n\t\t\tif(i2==0){ i0--; continue; } //首次只计算o[0]\n\t\t\t//res[idx]=o[Math.round(i)]; 直接简单抽样\n\t\t\t\n\t\t\t//https://www.cnblogs.com/xiaoqi/p/6993912.html\n\t\t\t//当前点=当前点+到后面一个点之间的增量，音质比直接简单抽样好些\n\t\t\tvar before = Math.floor(i);\n\t\t\tif(i0!=before)continue;\n\t\t\tvar after = Math.ceil(i);\n\t\t\tvar atPoint = i - before;\n\t\t\t\n\t\t\tvar beforeVal=F1;\n\t\t\tvar afterVal=after<il ? F2 : beforeVal; //后个点越界了，忽略不计\n\t\t\tvar val=beforeVal+(afterVal-beforeVal)*atPoint;\n\t\t\t\n\t\t\tif(val>0x7FFF) val=0x7FFF; else if(val<-0x8000) val=-0x8000; //Int16越界处理\n\t\t\tres[idx]=val;\n\t\t\t\n\t\t\tidx++;\n\t\t\ti+=step;//抽样\n\t\t};\n\t\toffset=Math.max(0, i-il); //不太可能出现负数\n\t};\n\t//帧处理\n\tframeNext=null;\n\tvar frameNextSize=res.length%frameSize;\n\tif(frameNextSize>0){\n\t\tvar u8Pos=(res.length-frameNextSize)*2;\n\t\tframeNext=new Int16Array(res.buffer.slice(u8Pos));\n\t\tres=new Int16Array(res.buffer.slice(0,u8Pos));\n\t};\n\t\n\treturn {\n\t\tindex:index\n\t\t,offset:offset\n\t\t,filter:filter\n\t\t\n\t\t,frameNext:frameNext\n\t\t,sampleRate:newSampleRate\n\t\t,data:res\n\t};\n};\n\n/*IIR低通、高通滤波，移植自：https://gitee.com/52jian/digital-audio-filter AudioFilter.java\n\tuseLowPass: true或false，true为低通滤波，false为高通滤波\n\tsampleRate: 待处理pcm的采样率\n\tfreq: 截止频率Hz，最大频率为sampleRate/2，低通时会切掉高于此频率的声音，高通时会切掉低于此频率的声音，注意滤波并非100%的切掉不需要的声音，而是减弱频率对应的声音，离截止频率越远对应声音减弱越厉害，离截止频率越近声音就几乎无衰减\n\t返回的是一个函数，用此函数对pcm的每个采样值按顺序进行处理即可（不同pcm不可共用）；注意此函数返回值可能会越界超过Int16范围，自行限制一下即可：Math.min(Math.max(val,-0x8000),0x7FFF)\n可重新赋值一个函数，来改变Recorder的默认行为，比如SampleData中的低通滤波*/\nRecorder.IIRFilter=function(useLowPass, sampleRate, freq){\n\tvar ov = 2 * Math.PI * freq / sampleRate;\n\tvar sn = Math.sin(ov);\n\tvar cs = Math.cos(ov);\n\tvar alpha = sn / 2;\n\t\n\tvar a0 = 1 + alpha;\n\tvar a1 = (-2 * cs) / a0;\n\tvar a2 = (1 - alpha) / a0;\n\tif(useLowPass){\n\t\tvar b0 = (1 - cs) / 2 / a0;\n\t\tvar b1 = (1 - cs) / a0;\n\t}else{\n\t\tvar b0 = (1 + cs) / 2 / a0;\n\t\tvar b1 = -(1 + cs) / a0;\n\t}\n\t\n\tvar x1=0,x2=0,y=0,y1=0,y2=0;\n\tvar fn=function(x){\n\t\ty = b0 * x + b1 * x1 + b0 * x2 - a1 * y1 - a2 * y2;\n\t\tx2 = x1; x1 = x;\n\t\ty2 = y1; y1 = y;\n\t\treturn y;\n\t};\n\tfn.Embed={x1:0,x2:0,y1:0,y2:0,b0:b0,b1:b1,a1:a1,a2:a2};\n\treturn fn;\n};\n\n\n/*计算音量百分比的一个方法\npcmAbsSum: pcm Int16所有采样的绝对值的和\npcmLength: pcm长度\n返回值：0-100，主要当做百分比用\n注意：这个不是分贝，因此没用volume当做名称*/\nRecorder.PowerLevel=function(pcmAbsSum,pcmLength){\n\t/*计算音量 https://blog.csdn.net/jody1989/article/details/73480259\n\t更高灵敏度算法:\n\t\t限定最大感应值10000\n\t\t\t线性曲线：低音量不友好\n\t\t\t\tpower/10000*100 \n\t\t\t对数曲线：低音量友好，但需限定最低感应值\n\t\t\t\t(1+Math.log10(power/10000))*100\n\t*/\n\tvar power=(pcmAbsSum/pcmLength) || 0;//NaN\n\tvar level;\n\tif(power<1251){//1250的结果10%，更小的音量采用线性取值\n\t\tlevel=Math.round(power/1250*10);\n\t}else{\n\t\tlevel=Math.round(Math.min(100,Math.max(0,(1+Math.log(power/10000)/Math.log(10))*100)));\n\t};\n\treturn level;\n};\n\n/*计算音量，单位dBFS（满刻度相对电平）\nmaxSample: 为16位pcm采样的绝对值中最大的一个（计算峰值音量），或者为pcm中所有采样的绝对值的平局值\n返回值：-100~0 （最大值0dB，最小值-100代替-∞）\n*/\nRecorder.PowerDBFS=function(maxSample){\n\tvar val=Math.max(0.1, maxSample||0),Pref=0x7FFF;\n\tval=Math.min(val,Pref);\n\t//https://www.logiclocmusic.com/can-you-tell-the-decibel/\n\t//https://blog.csdn.net/qq_17256689/article/details/120442510\n\tval=20*Math.log(val/Pref)/Math.log(10);\n\treturn Math.max(-100,Math.round(val));\n};\n\n\n\n\n//带时间的日志输出，可设为一个空函数来屏蔽日志输出\n//CLog(msg,errOrLogMsg, logMsg...) err为数字时代表日志类型1:error 2:log默认 3:warn，否则当做内容输出，第一个参数不能是对象因为要拼接时间，后面可以接无数个输出参数\nRecorder.CLog=function(msg,err){\n\tif(typeof console!=\"object\")return;\n\tvar now=new Date();\n\tvar t=(\"0\"+now.getMinutes()).substr(-2)\n\t\t+\":\"+(\"0\"+now.getSeconds()).substr(-2)\n\t\t+\".\"+(\"00\"+now.getMilliseconds()).substr(-3);\n\tvar recID=this&&this.envIn&&this.envCheck&&this.id;\n\tvar arr=[\"[\"+t+\" \"+RecTxt+(recID?\":\"+recID:\"\")+\"]\"+msg];\n\tvar a=arguments,cwe=Recorder.CLog;\n\tvar i=2,fn=cwe.log||console.log;\n\tif(IsNum(err)){\n\t\tfn=err==1?cwe.error||console.error:err==3?cwe.warn||console.warn:fn;\n\t}else{\n\t\ti=1;\n\t};\n\tfor(;i<a.length;i++){\n\t\tarr.push(a[i]);\n\t};\n\tif(IsLoser){//古董浏览器，仅保证基本的可执行不代码异常\n\t\tfn&&fn(\"[IsLoser]\"+arr[0],arr.length>1?arr:\"\");\n\t}else{\n\t\tfn.apply(console,arr);\n\t};\n};\nvar CLog=function(){ Recorder.CLog.apply(this,arguments); };\nvar IsLoser=true;try{IsLoser=!console.log.apply;}catch(e){};\n\n\n\n\nvar ID=0;\nfunction initFn(set){\n\tvar This=this; This.id=++ID;\n\t\n\t//如果开启了流量统计，这里将发送一个图片请求\n\tTraffic();\n\t\n\t\n\tvar o={\n\t\ttype:\"mp3\" //输出类型：mp3,wav，wav输出文件尺寸超大不推荐使用，但mp3编码支持会导致js文件超大，如果不需支持mp3可以使js文件大幅减小\n\t\t//,bitRate:16 //比特率 wav:16或8位，MP3：8kbps 1k/s，8kbps 2k/s 录音文件很小\n\t\t\n\t\t//,sampleRate:16000 //采样率，wav格式大小=sampleRate*时间；mp3此项对低比特率有影响，高比特率几乎无影响。\n\t\t\t\t\t//wav任意值，mp3取值范围：48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000\n\t\t\t\t\t//采样率参考https://www.cnblogs.com/devin87/p/mp3-recorder.html\n\t\t\n\t\t,onProcess:NOOP //fn(buffers,powerLevel,bufferDuration,bufferSampleRate,newBufferIdx,asyncEnd) buffers=[[Int16,...],...]：缓冲的PCM数据，为从开始录音到现在的所有pcm片段；powerLevel：当前缓冲的音量级别0-100，bufferDuration：已缓冲时长，bufferSampleRate：缓冲使用的采样率（当type支持边录边转码(Worker)时，此采样率和设置的采样率相同，否则不一定相同）；newBufferIdx:本次回调新增的buffer起始索引；asyncEnd:fn() 如果onProcess是异步的(返回值为true时)，处理完成时需要调用此回调，如果不是异步的请忽略此参数，此方法回调时必须是真异步（不能真异步时需用setTimeout包裹）。onProcess返回值：如果返回true代表开启异步模式，在某些大量运算的场合异步是必须的，必须在异步处理完成时调用asyncEnd(不能真异步时需用setTimeout包裹)，在onProcess执行后新增的buffer会全部替换成空数组，因此本回调开头应立即将newBufferIdx到本次回调结尾位置的buffer全部保存到另外一个数组内，处理完成后写回buffers中本次回调的结尾位置。\n\t\t\n\t\t//*******高级设置******\n\t\t//,sourceStream:MediaStream Object\n\t\t\t\t//可选直接提供一个媒体流，从这个流中录制、实时处理音频数据（当前Recorder实例独享此流）；不提供时为普通的麦克风录音，由getUserMedia提供音频流（所有Recorder实例共享同一个流）\n\t\t\t\t//比如：audio、video标签dom节点的captureStream方法（实验特性，不同浏览器支持程度不高）返回的流；WebRTC中的remote流；自己创建的流等\n\t\t\t\t//注意：流内必须至少存在一条音轨(Audio Track)，比如audio标签必须等待到可以开始播放后才会有音轨，否则open会失败\n\t\t\n\t\t//,runningContext:AudioContext\n\t\t\t\t//可选提供一个state为running状态的AudioContext对象(ctx)；默认会在rec.open时自动创建一个新的ctx，无用户操作（触摸、点击等）时调用rec.open的ctx.state可能为suspended，会在rec.start时尝试进行ctx.resume，如果也无用户操作ctx.resume可能不会恢复成running状态（目前仅iOS上有此兼容性问题），导致无法去读取媒体流，这时请提前在用户操作时调用Recorder.GetContext(true)来得到一个running状态AudioContext（用完需调用CloseNewCtx(ctx)关闭）\n\t\t\n\t\t//,audioTrackSet:{ deviceId:\"\",groupId:\"\", autoGainControl:true, echoCancellation:true, noiseSuppression:true }\n\t\t\t\t//普通麦克风录音时getUserMedia方法的audio配置参数，比如指定设备id，回声消除、降噪开关；注意：提供的任何配置值都不一定会生效\n\t\t\t\t//由于麦克风是全局共享的，所以新配置后需要close掉以前的再重新open\n\t\t\t\t//更多参考: https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints\n\t\t\n\t\t//,disableEnvInFix:false 内部参数，禁用设备卡顿时音频输入丢失补偿功能\n\t\t\n\t\t//,takeoffEncodeChunk:NOOP //fn(chunkBytes) chunkBytes=[Uint8,...]：实时编码环境下接管编码器输出，当编码器实时编码出一块有效的二进制音频数据时实时回调此方法；参数为二进制的Uint8Array，就是编码出来的音频数据片段，所有的chunkBytes拼接在一起即为完整音频。本实现的想法最初由QQ2543775048提出\n\t\t\t\t//当提供此回调方法时，将接管编码器的数据输出，编码器内部将放弃存储生成的音频数据；如果当前编码器或环境不支持实时编码处理，将在open时直接走fail逻辑\n\t\t\t\t//因此提供此回调后调用stop方法将无法获得有效的音频数据，因为编码器内没有音频数据，因此stop时返回的blob将是一个字节长度为0的blob\n\t\t\t\t//大部分录音格式编码器都支持实时编码（边录边转码），比如mp3格式：会实时的将编码出来的mp3片段通过此方法回调，所有的chunkBytes拼接到一起即为完整的mp3，此种拼接的结果比mock方法实时生成的音质更加，因为天然避免了首尾的静默\n\t\t\t\t//不支持实时编码的录音格式不可以提供此回调（wav格式不支持，因为wav文件头中需要提供文件最终长度），提供了将在open时直接走fail逻辑\n\t};\n\t\n\tfor(var k in set){\n\t\to[k]=set[k];\n\t};\n\tThis.set=o;\n\t\n\tvar vB=o[bitRateTxt],vS=o[sampleRateTxt]; //校验配置参数\n\tif(vB&&!IsNum(vB) || vS&&!IsNum(vS)){\n\t\tThis.CLog($T.G(\"IllegalArgs-1\",[$T(\"VtS4::{1}和{2}必须是数值\",0,sampleRateTxt,bitRateTxt)]),1,set);\n\t};\n\to[bitRateTxt]=+vB||16;\n\to[sampleRateTxt]=+vS||16000;\n\t\n\tThis.state=0;//运行状态，0未录音 1录音中 2暂停 3等待ctx激活\n\tThis._S=9;//stop同步锁，stop可以阻止open过程中还未运行的start\n\tThis.Sync={O:9,C:9};//和Recorder.Sync一致，只不过这个是非全局的，仅用来简化代码逻辑，无实际作用\n};\n//同步锁，控制对Stream的竞争；用于close时中断异步的open；一个对象open如果变化了都要阻止close，Stream的控制权交个新的对象\nRecorder.Sync={/*open*/O:9,/*close*/C:9};\n\nRecorder.prototype=initFn.prototype={\n\tCLog:CLog\n\t\n\t//流相关的数据存储在哪个对象里面；如果提供了sourceStream，数据直接存储在当前对象中，否则存储在全局\n\t,_streamStore:function(){\n\t\tif(this.set.sourceStream){\n\t\t\treturn this;\n\t\t}else{\n\t\t\treturn Recorder;\n\t\t}\n\t}\n\t//当前实例用到的AudioContext，可能是全局的，也可能是独享的\n\t,_streamCtx:function(){\n\t\tvar m=this._streamStore().Stream;\n\t\treturn m&&m._c;\n\t}\n\t\n\t//打开录音资源True(),False(msg,isUserNotAllow)，需要调用close。注意：此方法是异步的；一般使用时打开，用完立即关闭；可重复调用，可用来测试是否能录音；open和start至少有一个应当在用户操作（触摸、点击等）下进行调用，原因参考runningContext配置\n\t,open:function(True,False){\n\t\tvar This=this,set=This.set,streamStore=This._streamStore(),newCtx=0;\n\t\tTrue=True||NOOP;\n\t\tvar failCall=function(errMsg,isUserNotAllow){\n\t\t\tisUserNotAllow=!!isUserNotAllow;\n\t\t\tThis.CLog($T(\"5tWi::录音open失败：\")+errMsg+\",isUserNotAllow:\"+isUserNotAllow,1);\n\t\t\tif(newCtx)Recorder.CloseNewCtx(newCtx);\n\t\t\tFalse&&False(errMsg,isUserNotAllow);\n\t\t};\n\t\t\n\t\tThis._streamTag=getUserMediaTxt;\n\t\tvar ok=function(){\n\t\t\tThis.CLog(\"open ok, id:\"+This.id+\" stream:\"+This._streamTag);\n\t\t\tTrue();\n\t\t\t\n\t\t\tThis._SO=0;//解除stop对open中的start调用的阻止\n\t\t};\n\t\t\n\t\t\n\t\t//同步锁\n\t\tvar Lock=streamStore.Sync;\n\t\tvar lockOpen=++Lock.O,lockClose=Lock.C;\n\t\tThis._O=This._O_=lockOpen;//记住当前的open，如果变化了要阻止close，这里假定了新对象已取代当前对象并且不再使用\n\t\tThis._SO=This._S;//记住open过程中的stop，中途任何stop调用后都不能继续open中的start\n\t\tvar lockFail=function(){\n\t\t\t//允许多次open，但不允许任何一次close，或者自身已经调用了关闭\n\t\t\tif(lockClose!=Lock.C || !This._O){\n\t\t\t\tvar err=$T(\"dFm8::open被取消\");\n\t\t\t\tif(lockOpen==Lock.O){\n\t\t\t\t\t//无新的open，已经调用了close进行取消，此处应让上次的close明确生效\n\t\t\t\t\tThis.close();\n\t\t\t\t}else{\n\t\t\t\t\terr=$T(\"VtJO::open被中断\");\n\t\t\t\t};\n\t\t\t\tfailCall(err);\n\t\t\t\treturn true;\n\t\t\t};\n\t\t};\n\t\t\n\t\t//环境配置检查\n\t\tif(!isBrowser){\n\t\t\tfailCall($T.G(\"NonBrowser-1\",[\"open\"])+$T(\"EMJq::，可尝试使用RecordApp解决方案\")+\"(\"+GitUrl+\"/tree/master/app-support-sample)\");\n\t\t\treturn;\n\t\t};\n\t\tvar checkMsg=This.envCheck({envName:\"H5\",canProcess:true});\n\t\tif(checkMsg){\n\t\t\tfailCall($T(\"A5bm::不能录音：\")+checkMsg);\n\t\t\treturn;\n\t\t};\n\t\t\n\t\t\n\t\t//***********已直接提供了音频流************\n\t\tif(set.sourceStream){\n\t\t\tThis._streamTag=\"set.sourceStream\";\n\t\t\tif(!Recorder.GetContext()){\n\t\t\t\tfailCall($T(\"1iU7::不支持此浏览器从流中获取录音\"));\n\t\t\t\treturn;\n\t\t\t};\n\t\t\t\n\t\t\tDisconnect(streamStore);//可能已open过，直接先尝试断开\n\t\t\tvar stream=This.Stream=set.sourceStream;\n\t\t\tstream._RC=set.runningContext;\n\t\t\tstream._call={};\n\t\t\t\n\t\t\ttry{\n\t\t\t\tConnect(streamStore);\n\t\t\t}catch(e){\n\t\t\t\tDisconnect(streamStore);\n\t\t\t\tfailCall($T(\"BTW2::从流中打开录音失败：\")+e.message);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tok();\n\t\t\treturn;\n\t\t};\n\t\t\n\t\t\n\t\t//***********打开麦克风得到全局的音频流************\n\t\tvar codeFail=function(code,msg){\n\t\t\ttry{//跨域的优先检测一下\n\t\t\t\twindow.top.a;\n\t\t\t}catch(e){\n\t\t\t\tfailCall($T(\"Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})\",0,'allow=\"camera;microphone\"'));\n\t\t\t\treturn;\n\t\t\t};\n\t\t\t\n\t\t\tif(/Permission|Allow/i.test(code)){\n\t\t\t\tfailCall($T(\"gyO5::用户拒绝了录音权限\"),true);\n\t\t\t}else if(window.isSecureContext===false){\n\t\t\t\tfailCall($T(\"oWNo::浏览器禁止不安全页面录音，可开启https解决\"));\n\t\t\t}else if(/Found/i.test(code)){//可能是非安全环境导致的没有设备\n\t\t\t\tfailCall(msg+$T(\"jBa9::，无可用麦克风\"));\n\t\t\t}else{\n\t\t\t\tfailCall(msg);\n\t\t\t};\n\t\t};\n\t\t\n\t\t\n\t\t//如果已打开并且有效就不要再打开了\n\t\tif(Recorder.IsOpen()){\n\t\t\tok();\n\t\t\treturn;\n\t\t};\n\t\tif(!Recorder.Support()){\n\t\t\tcodeFail(\"\",$T(\"COxc::此浏览器不支持录音\"));\n\t\t\treturn;\n\t\t};\n\t\t//尽量先创建好ctx，不然异步下创建可能不是running状态\n\t\tvar ctx=set.runningContext;\n\t\tif(!ctx)ctx=newCtx=Recorder.GetContext(true);\n\t\t\n\t\t//请求权限，如果从未授权，一般浏览器会弹出权限请求弹框\n\t\tvar f1=function(stream){\n\t\t\t//https://github.com/xiangyuecn/Recorder/issues/14 获取到的track.readyState!=\"live\"，刚刚回调时可能是正常的，但过一下可能就被关掉了，原因不明。延迟一下保证真异步。对正常浏览器不影响\n\t\t\tsetTimeout(function(){\n\t\t\t\tstream._call={};\n\t\t\t\tvar oldStream=Recorder.Stream;\n\t\t\t\tif(oldStream){\n\t\t\t\t\tDisconnect(); //直接断开已存在的，旧的Connect未完成会自动终止\n\t\t\t\t\tstream._call=oldStream._call;\n\t\t\t\t};\n\t\t\t\tRecorder.Stream=stream;\n\t\t\t\tstream._c=ctx;\n\t\t\t\tstream._RC=set.runningContext;\n\t\t\t\tif(lockFail())return;\n\t\t\t\t\n\t\t\t\tif(Recorder.IsOpen()){\n\t\t\t\t\tif(oldStream)This.CLog($T(\"upb8::发现同时多次调用open\"),1);\n\t\t\t\t\t\n\t\t\t\t\tConnect(streamStore,1);\n\t\t\t\t\tok();\n\t\t\t\t}else{\n\t\t\t\t\tfailCall($T(\"Q1GA::录音功能无效：无音频流\"));\n\t\t\t\t};\n\t\t\t},100);\n\t\t};\n\t\tvar f2=function(e){\n\t\t\tvar code=e.name||e.message||e.code+\":\"+e;\n\t\t\tThis.CLog($T(\"xEQR::请求录音权限错误\"),1,e);\n\t\t\t\n\t\t\tcodeFail(code,$T(\"bDOG::无法录音：\")+code);\n\t\t};\n\t\t\n\t\tvar trackSet=set.audioTrackSet||{};\n\t\ttrackSet[sampleRateTxt]=ctx[sampleRateTxt];//必须指明采样率，不然手机上MediaRecorder采样率16k\n\t\t\n\t\tvar mSet={audio:trackSet};\n\t\ttry{\n\t\t\tvar pro=Recorder.Scope[getUserMediaTxt](mSet,f1,f2);\n\t\t}catch(e){//不能设置trackSet就算了\n\t\t\tThis.CLog(getUserMediaTxt,3,e);\n\t\t\tmSet={audio:true};\n\t\t\tpro=Recorder.Scope[getUserMediaTxt](mSet,f1,f2);\n\t\t};\n\t\tThis.CLog(getUserMediaTxt+\"(\"+JSON.stringify(mSet)+\") \"+CtxState(ctx)\n\t\t\t+$T(\"RiWe::，未配置noiseSuppression和echoCancellation时浏览器可能会自动打开降噪和回声消除，移动端可能会降低系统播放音量（关闭录音后可恢复），请参阅文档中audioTrackSet配置\")\n\t\t\t+\"(\"+GitUrl+\") LM:\"+LM+\" UA:\"+navigator.userAgent);\n\t\tif(pro&&pro.then){\n\t\t\tpro.then(f1)[CatchTxt](f2); //fix 关键字，保证catch压缩时保持字符串形式\n\t\t};\n\t}\n\t//关闭释放录音资源\n\t,close:function(call){\n\t\tcall=call||NOOP;\n\t\t\n\t\tvar This=this,streamStore=This._streamStore();\n\t\tThis._stop();\n\t\tvar sTag=\" stream:\"+This._streamTag;\n\t\t\n\t\tvar Lock=streamStore.Sync;\n\t\tThis._O=0;\n\t\tif(This._O_!=Lock.O){\n\t\t\t//唯一资源Stream的控制权已交给新对象，这里不能关闭。此处在每次都弹权限的浏览器内可能存在泄漏，新对象被拒绝权限可能不会调用close，忽略这种不处理\n\t\t\tThis.CLog($T(\"hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）\")+sTag,3);\n\t\t\tcall();\n\t\t\treturn;\n\t\t};\n\t\tLock.C++;//获得控制权\n\t\t\n\t\tDisconnect(streamStore);\n\t\t\n\t\tThis.CLog(\"close,\"+sTag);\n\t\tcall();\n\t}\n\t\n\t\n\t\n\t\n\t\n\t/*模拟一段录音数据，后面可以调用stop进行编码，需提供pcm数据[1,2,3...]，pcm的采样率*/\n\t,mock:function(pcmData,pcmSampleRate){\n\t\tvar This=this;\n\t\tThis._stop();//清理掉已有的资源\n\t\t\n\t\tThis.isMock=1;\n\t\tThis.mockEnvInfo=null;\n\t\tThis.buffers=[pcmData];\n\t\tThis.recSize=pcmData.length;\n\t\tThis._setSrcSR(pcmSampleRate);\n\t\tThis._streamTag=\"mock\";\n\t\treturn This;\n\t}\n\t,_setSrcSR:function(sampleRate){\n\t\tvar This=this,set=This.set;\n\t\tvar setSr=set[sampleRateTxt];\n\t\tif(setSr>sampleRate){\n\t\t\tset[sampleRateTxt]=sampleRate;\n\t\t}else{ setSr=0 }\n\t\tThis[srcSampleRateTxt]=sampleRate;\n\t\tThis.CLog(srcSampleRateTxt+\": \"+sampleRate+\" set.\"+sampleRateTxt+\": \"+set[sampleRateTxt]+(setSr?\" \"+$T(\"UHvm::忽略\")+\": \"+setSr:\"\"), setSr?3:0);\n\t}\n\t,envCheck:function(envInfo){//平台环境下的可用性检查，任何时候都可以调用检查，返回errMsg:\"\"正常，\"失败原因\"\n\t\t//envInfo={envName:\"H5\",canProcess:true}\n\t\tvar errMsg,This=this,set=This.set;\n\t\t\n\t\t//检测CPU的数字字节序，TypedArray字节序是个迷，直接拒绝罕见的大端模式，因为找不到这种CPU进行测试\n\t\tvar tag=\"CPU_BE\";\n\t\tif(!errMsg && !Recorder[tag] && typeof Int8Array==\"function\" && !new Int8Array(new Int32Array([1]).buffer)[0]){\n\t\t\tTraffic(tag); //如果开启了流量统计，这里将发送一个图片请求\n\t\t\terrMsg=$T(\"Essp::不支持{1}架构\",0,tag);\n\t\t};\n\t\t\n\t\t//编码器检查环境下配置是否可用\n\t\tif(!errMsg){\n\t\t\tvar type=set.type,hasFn=This[type+\"_envCheck\"];\n\t\t\tif(set.takeoffEncodeChunk){//需要实时编码返回数据，此时需要检查环境是否有实时特性、和是否可实时编码\n\t\t\t\tif(!hasFn){\n\t\t\t\t\terrMsg=$T(\"2XBl::{1}类型不支持设置takeoffEncodeChunk\",0,type)+(This[type]?\"\":$T(\"LG7e::(未加载编码器)\"));\n\t\t\t\t}else if(!envInfo.canProcess){\n\t\t\t\t\terrMsg=$T(\"7uMV::{1}环境不支持实时处理\",0,envInfo.envName);\n\t\t\t\t};\n\t\t\t};\n\t\t\t\n\t\t\tif(!errMsg && hasFn){//编码器已实现环境检查\n\t\t\t\terrMsg=This[type+\"_envCheck\"](envInfo,set);\n\t\t\t};\n\t\t};\n\t\t\n\t\treturn errMsg||\"\";\n\t}\n\t,envStart:function(mockEnvInfo,sampleRate){//平台环境相关的start调用\n\t\tvar This=this,set=This.set;\n\t\tThis.isMock=mockEnvInfo?1:0;//非H5环境需要启用mock，并提供envCheck需要的环境信息\n\t\tThis.mockEnvInfo=mockEnvInfo;\n\t\tThis.buffers=[];//数据缓冲\n\t\tThis.recSize=0;//数据大小\n\t\tif(mockEnvInfo){\n\t\t\tThis._streamTag=\"env$\"+mockEnvInfo.envName;\n\t\t};\n\t\t\n\t\tThis.state=1;//运行状态，0未录音 1录音中 2暂停 3等待ctx激活\n\t\tThis.envInLast=0;//envIn接收到最后录音内容的时间\n\t\tThis.envInFirst=0;//envIn接收到的首个录音内容的录制时间\n\t\tThis.envInFix=0;//补偿的总时间\n\t\tThis.envInFixTs=[];//补偿计数列表\n\t\t\n\t\t//engineCtx需要提前确定最终的采样率\n\t\tThis._setSrcSR(sampleRate);\n\t\t\n\t\tThis.engineCtx=0;\n\t\t//此类型有边录边转码(Worker)支持\n\t\tif(This[set.type+\"_start\"]){\n\t\t\tvar engineCtx=This.engineCtx=This[set.type+\"_start\"](set);\n\t\t\tif(engineCtx){\n\t\t\t\tengineCtx.pcmDatas=[];\n\t\t\t\tengineCtx.pcmSize=0;\n\t\t\t};\n\t\t};\n\t}\n\t,envResume:function(){//和平台环境无关的恢复录音\n\t\t//重新开始计数\n\t\tthis.envInFixTs=[];\n\t}\n\t,envIn:function(pcm,sum){//和平台环境无关的pcm[Int16]输入\n\t\tvar This=this,set=This.set,engineCtx=This.engineCtx;\n\t\tif(This.state!=1){\n\t\t\tif(!This.state)This.CLog(\"envIn at state=0\",3);\n\t\t\treturn;\n\t\t};\n\t\tvar bufferSampleRate=This[srcSampleRateTxt];\n\t\tvar size=pcm.length;\n\t\tvar powerLevel=Recorder.PowerLevel(sum,size);\n\t\t\n\t\tvar buffers=This.buffers;\n\t\tvar bufferFirstIdx=buffers.length;//之前的buffer都是经过onProcess处理好的，不允许再修改\n\t\tbuffers.push(pcm);\n\t\t\n\t\t//有engineCtx时会被覆盖，这里保存一份\n\t\tvar buffersThis=buffers;\n\t\tvar bufferFirstIdxThis=bufferFirstIdx;\n\t\t\n\t\t//卡顿丢失补偿：因为设备很卡的时候导致H5接收到的数据量不够造成播放时候变速，结果比实际的时长要短，此处保证了不会变短，但不能修复丢失的音频数据造成音质变差。当前算法采用输入时间侦测下一帧是否需要添加补偿帧，需要(6次输入||超过1秒)以上才会开始侦测，如果滑动窗口内丢失超过1/3就会进行补偿\n\t\tvar now=Date.now();\n\t\tvar pcmTime=Math.round(size/bufferSampleRate*1000);\n\t\tThis.envInLast=now;\n\t\tif(This.buffers.length==1){//记下首个录音数据的录制时间\n\t\t\tThis.envInFirst=now-pcmTime;\n\t\t};\n\t\tvar envInFixTs=This.envInFixTs;\n\t\tenvInFixTs.splice(0,0,{t:now,d:pcmTime});\n\t\t//保留3秒的计数滑动窗口，另外超过3秒的停顿不补偿\n\t\tvar tsInStart=now,tsPcm=0;\n\t\tfor(var i=0;i<envInFixTs.length;i++){\n\t\t\tvar o=envInFixTs[i];\n\t\t\tif(now-o.t>3000){\n\t\t\t\tenvInFixTs.length=i;\n\t\t\t\tbreak;\n\t\t\t};\n\t\t\ttsInStart=o.t;\n\t\t\ttsPcm+=o.d;\n\t\t};\n\t\t//达到需要的数据量，开始侦测是否需要补偿\n\t\tvar tsInPrev=envInFixTs[1];\n\t\tvar tsIn=now-tsInStart;\n\t\tvar lost=tsIn-tsPcm;\n\t\tif( lost>tsIn/3 && (tsInPrev&&tsIn>1000 || envInFixTs.length>=6) ){\n\t\t\t//丢失过多，开始执行补偿\n\t\t\tvar addTime=now-tsInPrev.t-pcmTime;//距离上次输入丢失这么多ms\n\t\t\tif(addTime>pcmTime/5){//丢失超过本帧的1/5\n\t\t\t\tvar fixOpen=!set.disableEnvInFix;\n\t\t\t\tThis.CLog(\"[\"+now+\"]\"+i18n.get(fixOpen?$T(\"4Kfd::补偿{1}ms\",1):$T(\"bM5i::未补偿{1}ms\",1),[addTime]),3);\n\t\t\t\tThis.envInFix+=addTime;\n\t\t\t\t\n\t\t\t\t//用静默进行补偿\n\t\t\t\tif(fixOpen){\n\t\t\t\t\tvar addPcm=new Int16Array(addTime*bufferSampleRate/1000);\n\t\t\t\t\tsize+=addPcm.length;\n\t\t\t\t\tbuffers.push(addPcm);\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t\t\n\t\t\n\t\tvar sizeOld=This.recSize,addSize=size;\n\t\tvar bufferSize=sizeOld+addSize;\n\t\tThis.recSize=bufferSize;//此值在onProcess后需要修正，可能新数据被修改\n\t\t\n\t\t\n\t\t//此类型有边录边转码(Worker)支持，开启实时转码\n\t\tif(engineCtx){\n\t\t\t//转换成set的采样率\n\t\t\tvar chunkInfo=Recorder.SampleData(buffers,bufferSampleRate,set[sampleRateTxt],engineCtx.chunkInfo);\n\t\t\tengineCtx.chunkInfo=chunkInfo;\n\t\t\t\n\t\t\tsizeOld=engineCtx.pcmSize;\n\t\t\taddSize=chunkInfo.data.length;\n\t\t\tbufferSize=sizeOld+addSize;\n\t\t\tengineCtx.pcmSize=bufferSize;//此值在onProcess后需要修正，可能新数据被修改\n\t\t\t\n\t\t\tbuffers=engineCtx.pcmDatas;\n\t\t\tbufferFirstIdx=buffers.length;\n\t\t\tbuffers.push(chunkInfo.data);\n\t\t\tbufferSampleRate=chunkInfo[sampleRateTxt];\n\t\t};\n\t\t\n\t\tvar duration=Math.round(bufferSize/bufferSampleRate*1000);\n\t\tvar bufferNextIdx=buffers.length;\n\t\tvar bufferNextIdxThis=buffersThis.length;\n\t\t\n\t\t//允许异步处理buffer数据\n\t\tvar asyncEnd=function(){\n\t\t\t//重新计算size，异步的早已减去添加的，同步的需去掉本次添加的然后重新计算\n\t\t\tvar num=asyncBegin?0:-addSize;\n\t\t\tvar hasClear=buffers[0]==null;\n\t\t\tfor(var i=bufferFirstIdx;i<bufferNextIdx;i++){\n\t\t\t\tvar buffer=buffers[i];\n\t\t\t\tif(buffer==null){//已被主动释放内存，比如长时间实时传输录音时\n\t\t\t\t\thasClear=1;\n\t\t\t\t}else{\n\t\t\t\t\tnum+=buffer.length;\n\t\t\t\t\t\n\t\t\t\t\t//推入后台边录边转码\n\t\t\t\t\tif(engineCtx&&buffer.length){\n\t\t\t\t\t\tThis[set.type+\"_encode\"](engineCtx,buffer);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\t\t\t\n\t\t\t//同步清理This.buffers，不管buffers到底清了多少个，buffersThis是使用不到的进行全清\n\t\t\tif(hasClear && engineCtx){\n\t\t\t\tvar i=bufferFirstIdxThis;\n\t\t\t\tif(buffersThis[0]){\n\t\t\t\t\ti=0;\n\t\t\t\t};\n\t\t\t\tfor(;i<bufferNextIdxThis;i++){\n\t\t\t\t\tbuffersThis[i]=null;\n\t\t\t\t};\n\t\t\t};\n\t\t\t\n\t\t\t//统计修改后的size，如果异步发生clear要原样加回来，同步的无需操作\n\t\t\tif(hasClear){\n\t\t\t\tnum=asyncBegin?addSize:0;\n\t\t\t\t\n\t\t\t\tbuffers[0]=null;//彻底被清理\n\t\t\t};\n\t\t\tif(engineCtx){\n\t\t\t\tengineCtx.pcmSize+=num;\n\t\t\t}else{\n\t\t\t\tThis.recSize+=num;\n\t\t\t};\n\t\t};\n\t\t//实时回调处理数据，允许修改或替换上次回调以来新增的数据 ，但是不允许修改已处理过的，不允许增删第一维数组 ，允许将第二维数组任意修改替换成空数组也可以\n\t\tvar asyncBegin=0,procTxt=\"rec.set.onProcess\";\n\t\ttry{\n\t\t\tasyncBegin=set.onProcess(buffers,powerLevel,duration,bufferSampleRate,bufferFirstIdx,asyncEnd);\n\t\t}catch(e){\n\t\t\t//此错误显示不要用CLog，这样控制台内相同内容不会重复打印\n\t\t\tconsole.error(procTxt+$T(\"gFUF::回调出错是不允许的，需保证不会抛异常\"),e);\n\t\t};\n\t\t\n\t\tvar slowT=Date.now()-now;\n\t\tif(slowT>10 && This.envInFirst-now>1000){ //1秒后开始onProcess性能监测\n\t\t\tThis.CLog(procTxt+$T(\"2ghS::低性能，耗时{1}ms\",0,slowT),3);\n\t\t};\n\t\t\n\t\tif(asyncBegin===true){\n\t\t\t//开启了异步模式，onProcess已接管buffers新数据，立即清空，避免出现未处理的数据\n\t\t\tvar hasClear=0;\n\t\t\tfor(var i=bufferFirstIdx;i<bufferNextIdx;i++){\n\t\t\t\tif(buffers[i]==null){//已被主动释放内存，比如长时间实时传输录音时 ，但又要开启异步模式，此种情况是非法的\n\t\t\t\t\thasClear=1;\n\t\t\t\t}else{\n\t\t\t\t\tbuffers[i]=new Int16Array(0);\n\t\t\t\t};\n\t\t\t};\n\t\t\t\n\t\t\tif(hasClear){\n\t\t\t\tThis.CLog($T(\"ufqH::未进入异步前不能清除buffers\"),3);\n\t\t\t}else{\n\t\t\t\t//还原size，异步结束后再统计仅修改后的size，如果发生clear要原样加回来\n\t\t\t\tif(engineCtx){\n\t\t\t\t\tengineCtx.pcmSize-=addSize;\n\t\t\t\t}else{\n\t\t\t\t\tThis.recSize-=addSize;\n\t\t\t\t};\n\t\t\t};\n\t\t}else{\n\t\t\tasyncEnd();\n\t\t};\n\t}\n\t\n\t\n\t\n\t\n\t//开始录音，需先调用open；只要open成功时，调用此方法是安全的，如果未open强行调用导致的内部错误将不会有任何提示，stop时自然能得到错误；注意：open和start至少有一个应当在用户操作（触摸、点击等）下进行调用，原因参考runningContext配置\n\t,start:function(){\n\t\tvar This=this;\n\t\t\n\t\tvar isOpen=1;\n\t\tif(This.set.sourceStream){//直接提供了流，仅判断是否调用了open\n\t\t\tif(!This.Stream){\n\t\t\t\tisOpen=0;\n\t\t\t}\n\t\t}else if(!Recorder.IsOpen()){//监测全局麦克风是否打开并且有效\n\t\t\tisOpen=0;\n\t\t};\n\t\tif(!isOpen){\n\t\t\tThis.CLog($T(\"6WmN::start失败：未open\"),1);\n\t\t\treturn;\n\t\t};\n\t\tvar ctx=This._streamCtx();\n\t\tThis.CLog($T(\"kLDN::start 开始录音，\")+CtxState(ctx)+\" stream:\"+This._streamTag);\n\t\t\n\t\tThis._stop();\n\t\tThis.envStart(null, ctx[sampleRateTxt]);\n\t\tThis.state=3;//0未录音 1录音中 2暂停 3等待ctx激活\n\t\t\n\t\t//检查open过程中stop是否已经调用过\n\t\tif(This._SO&&This._SO+1!=This._S){//上面调用过一次 _stop\n\t\t\t//open未完成就调用了stop，此种情况终止start。也应尽量避免出现此情况\n\t\t\tThis.CLog($T(\"Bp2y::start被中断\"),3);\n\t\t\treturn;\n\t\t};\n\t\tThis._SO=0;\n\t\t\n\t\tvar end=function(){\n\t\t\tif(This.state==3){\n\t\t\t\tThis.state=1;\n\t\t\t\tThis.resume();\n\t\t\t}\n\t\t};\n\t\tvar tag=\"AudioContext resume: \";\n\t\tResumeCtx(ctx,function(runC){\n\t\t\trunC&&This.CLog(tag+\"wait...\");\n\t\t\treturn This.state==3;\n\t\t},function(runC){\n\t\t\trunC&&This.CLog(tag+ctx.state);\n\t\t\tend();\n\t\t},function(err){ //比较少见，可能对录音没有影响\n\t\t\tThis.CLog(tag+ctx.state+$T(\"upkE::，可能无法录音：\")+err,1);\n\t\t\tend();\n\t\t});\n\t}\n\t\n\t\n\t\n\t/*暂停录音*/\n\t,pause:function(){\n\t\tvar This=this,stream=This._streamStore().Stream;\n\t\tif(This.state){\n\t\t\tThis.state=2;\n\t\t\tThis.CLog(\"pause\");\n\t\t\tif(stream) delete stream._call[This.id];\n\t\t};\n\t}\n\t/*恢复录音*/\n\t,resume:function(){\n\t\tvar This=this,stream=This._streamStore().Stream;\n\t\tvar tag=\"resume\",tag3=tag+\"(wait ctx)\";\n\t\tif(This.state==3){ //start还在等ctx恢复\n\t\t\tThis.CLog(tag3);\n\t\t}else if(This.state){\n\t\t\tThis.state=1;\n\t\t\tThis.CLog(tag);\n\t\t\tThis.envResume();\n\t\t\t\n\t\t\tif(stream){\n\t\t\t\tstream._call[This.id]=function(pcm,sum){\n\t\t\t\t\tif(This.state==1){\n\t\t\t\t\t\tThis.envIn(pcm,sum);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t\tConnAlive(stream);//AudioWorklet只会在ctx激活后运行\n\t\t\t};\n\t\t\t\n\t\t\tvar ctx=This._streamCtx();\n\t\t\tif(ctx){ //AudioContext如果被暂停，尽量恢复\n\t\t\t\tResumeCtx(ctx,function(runC){\n\t\t\t\t\trunC&&This.CLog(tag3+\"...\");\n\t\t\t\t\treturn This.state==1;\n\t\t\t\t},function(runC){\n\t\t\t\t\trunC&&This.CLog(tag3+ctx.state);\n\t\t\t\t\tConnAlive(stream);\n\t\t\t\t},function(err){\n\t\t\t\t\tThis.CLog(tag3+ctx.state+\"[err]\"+err,1);\n\t\t\t\t});\n\t\t\t};\n\t\t};\n\t}\n\t\n\t\n\t\n\t\n\t,_stop:function(keepEngine){\n\t\tvar This=this,set=This.set;\n\t\tif(!This.isMock){\n\t\t\tThis._S++;\n\t\t};\n\t\tif(This.state){\n\t\t\tThis.pause();\n\t\t\tThis.state=0;\n\t\t};\n\t\tif(!keepEngine && This[set.type+\"_stop\"]){\n\t\t\tThis[set.type+\"_stop\"](This.engineCtx);\n\t\t\tThis.engineCtx=0;\n\t\t};\n\t}\n\t/*\n\t结束录音并返回录音数据blob对象\n\t\tTrue(blob,duration,mime)\n\t\t\tblob：录音数据audio/mp3|wav格式；默认是Blob对象，可设置rec.dataType=\"arraybuffer\"改成ArrayBuffer\n\t\t\tduration：录音时长，单位毫秒\n\t\t\tmime：\"auido/mp3\" blob数据的类型，方便ArrayBuffer时区分类型\n\t\tFalse(msg)\n\t\tautoClose:false 可选，是否自动调用close，默认为false\n\t*/\n\t,stop:function(True,False,autoClose){\n\t\tvar This=this,set=This.set,t1;\n\t\tvar envInMS=This.envInLast-This.envInFirst, envInLen=envInMS&&This.buffers.length; //可能未start\n\t\tThis.CLog($T(\"Xq4s::stop 和start时差:\")\n\t\t\t+(envInMS?envInMS+\"ms \"+$T(\"3CQP::补偿:\")+This.envInFix+\"ms\"\n\t\t\t\t+\" envIn:\"+envInLen+\" fps:\"+(envInLen/envInMS*1000).toFixed(1)\n\t\t\t:\"-\")+\" stream:\"+This._streamTag+\" (\"+GitUrl+\") LM:\"+LM);\n\t\t\n\t\tvar end=function(){\n\t\t\tThis._stop();//彻底关掉engineCtx\n\t\t\tif(autoClose){\n\t\t\t\tThis.close();\n\t\t\t};\n\t\t};\n\t\tvar err=function(msg){\n\t\t\tThis.CLog($T(\"u8JG::结束录音失败：\")+msg,1);\n\t\t\tFalse&&False(msg);\n\t\t\tend();\n\t\t};\n\t\tvar ok=function(blob,mime,duration){\n\t\t\tvar tBlob=\"blob\",tABuf=\"arraybuffer\",tDT=\"dataType\",tDDT=\"DefaultDataType\";\n\t\t\tvar dType=This[tDT]||Recorder[tDDT]||tBlob,dTag=tDT+\"=\"+dType;\n\t\t\tvar isAB=blob instanceof ArrayBuffer,dErr=0;\n\t\t\tvar dLen=isAB?blob.byteLength:blob.size;\n\t\t\tif(dType==tABuf){\n\t\t\t\tif(!isAB) dErr=1;\n\t\t\t}else if(dType==tBlob){\n\t\t\t\tif(typeof Blob!=\"function\"){\n\t\t\t\t\tdErr=$T.G(\"NonBrowser-1\",[dTag])+$T(\"1skY::，请设置{1}\",0,RecTxt+\".\"+tDDT+'=\"'+tABuf+'\"');\n\t\t\t\t}else{\n\t\t\t\t\tif(isAB) blob=new Blob([blob],{type:mime});\n\t\t\t\t\tif(!(blob instanceof Blob)) dErr=1;\n\t\t\t\t\tmime=blob.type||mime;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tdErr=$T.G(\"NotSupport-1\",[dTag]);\n\t\t\t};\n\t\t\t\n\t\t\tThis.CLog($T(\"Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b\",0,Date.now()-t1,duration,dLen)+\" \"+dTag+\",\"+mime);\n\t\t\tif(dErr){\n\t\t\t\terr(dErr!=1?dErr:$T(\"Vkbd::{1}编码器返回的不是{2}\",0,set.type,dType)+\", \"+dTag);\n\t\t\t\treturn;\n\t\t\t};\n\t\t\tif(set.takeoffEncodeChunk){//接管了输出，此时blob长度为0\n\t\t\t\tThis.CLog($T(\"QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据\"),3);\n\t\t\t}else if(dLen<Math.max(50,duration/5)){//1秒小于0.2k？\n\t\t\t\terr($T(\"Sz2H::生成的{1}无效\",0,set.type));\n\t\t\t\treturn;\n\t\t\t};\n\t\t\t\n\t\t\tTrue&&True(blob,duration,mime);\n\t\t\tend();\n\t\t};\n\t\tif(!This.isMock){\n\t\t\tvar isCtxWait=This.state==3;\n\t\t\tif(!This.state || isCtxWait){\n\t\t\t\terr($T(\"wf9t::未开始录音\")+(isCtxWait?$T(\"Dl2c::，开始录音前无用户交互导致AudioContext未运行\"):\"\"));\n\t\t\t\treturn;\n\t\t\t};\n\t\t};\n\t\tThis._stop(true); //将录音状态改成未录音\n\t\tvar size=This.recSize;\n\t\tif(!size){\n\t\t\terr($T(\"Ltz3::未采集到录音\"));\n\t\t\treturn;\n\t\t};\n\t\tif(!This[set.type]){\n\t\t\terr($T(\"xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载\",0,set.type,RecTxt));\n\t\t\treturn;\n\t\t};\n\t\t\n\t\t//环境配置检查，此处仅针对mock调用，因为open已经检查过了\n\t\tif(This.isMock){\n\t\t\tvar checkMsg=This.envCheck(This.mockEnvInfo||{envName:\"mock\",canProcess:false});//没有提供环境信息的mock时没有onProcess回调\n\t\t\tif(checkMsg){\n\t\t\t\terr($T(\"AxOH::录音错误：\")+checkMsg);\n\t\t\t\treturn;\n\t\t\t};\n\t\t};\n\t\t\n\t\t//此类型有边录边转码(Worker)支持\n\t\tvar engineCtx=This.engineCtx;\n\t\tif(This[set.type+\"_complete\"]&&engineCtx){\n\t\t\tvar duration=Math.round(engineCtx.pcmSize/set[sampleRateTxt]*1000);//采用后的数据长度和buffers的长度可能微小的不一致，是采样率连续转换的精度问题\n\t\t\t\n\t\t\tt1=Date.now();\n\t\t\tThis[set.type+\"_complete\"](engineCtx,function(blob,mime){\n\t\t\t\tok(blob,mime,duration);\n\t\t\t},err);\n\t\t\treturn;\n\t\t};\n\t\t\n\t\t//标准UI线程转码，调整采样率\n\t\tt1=Date.now();\n\t\tif(!This.buffers[0]){\n\t\t\terr($T(\"xkKd::音频buffers被释放\"));\n\t\t\treturn;\n\t\t};\n\t\tvar chunk=Recorder.SampleData(This.buffers,This[srcSampleRateTxt],set[sampleRateTxt]);\n\t\t\n\t\tset[sampleRateTxt]=chunk[sampleRateTxt];\n\t\tvar res=chunk.data;\n\t\tvar duration=Math.round(res.length/set[sampleRateTxt]*1000);\n\t\t\n\t\tThis.CLog($T(\"CxeT::采样:{1} 花:{2}ms\",0,size+\"->\"+res.length,Date.now()-t1));\n\t\t\n\t\tsetTimeout(function(){\n\t\t\tt1=Date.now();\n\t\t\tThis[set.type](res,function(blob,mime){\n\t\t\t\tok(blob,mime,duration);\n\t\t\t},function(msg){\n\t\t\t\terr(msg);\n\t\t\t});\n\t\t});\n\t}\n\n};\n\n\n\n\n\n//=======从WebM字节流中提取pcm数据，提取成功返回Float32Array，失败返回null||-1=====\nvar WebM_Extract=function(inBytes, scope){\n\tif(!scope.pos){\n\t\tscope.pos=[0]; scope.tracks={}; scope.bytes=[];\n\t};\n\tvar tracks=scope.tracks, position=[scope.pos[0]];\n\tvar endPos=function(){ scope.pos[0]=position[0] };\n\t\n\tvar sBL=scope.bytes.length;\n\tvar bytes=new Uint8Array(sBL+inBytes.length);\n\tbytes.set(scope.bytes); bytes.set(inBytes,sBL);\n\tscope.bytes=bytes;\n\t\n\t//先读取文件头和Track信息\n\tif(!scope._ht){\n\t\treadMatroskaVInt(bytes, position);//EBML Header\n\t\treadMatroskaBlock(bytes, position);//跳过EBML Header内容\n\t\tif(!BytesEq(readMatroskaVInt(bytes, position), [0x18,0x53,0x80,0x67])){\n\t\t\treturn;//未识别到Segment\n\t\t}\n\t\treadMatroskaVInt(bytes, position);//跳过Segment长度值\n\t\twhile(position[0]<bytes.length){\n\t\t\tvar eid0=readMatroskaVInt(bytes, position);\n\t\t\tvar bytes0=readMatroskaBlock(bytes, position);\n\t\t\tvar pos0=[0],audioIdx=0;\n\t\t\tif(!bytes0)return;//数据不全，等待缓冲\n\t\t\t//Track完整数据，循环读取TrackEntry\n\t\t\tif(BytesEq(eid0, [0x16,0x54,0xAE,0x6B])){\n\t\t\t\twhile(pos0[0]<bytes0.length){\n\t\t\t\t\tvar eid1=readMatroskaVInt(bytes0, pos0);\n\t\t\t\t\tvar bytes1=readMatroskaBlock(bytes0, pos0);\n\t\t\t\t\tvar pos1=[0],track={channels:0,sampleRate:0};\n\t\t\t\t\tif(BytesEq(eid1, [0xAE])){//TrackEntry\n\t\t\t\t\t\twhile(pos1[0]<bytes1.length){\n\t\t\t\t\t\t\tvar eid2=readMatroskaVInt(bytes1, pos1);\n\t\t\t\t\t\t\tvar bytes2=readMatroskaBlock(bytes1, pos1);\n\t\t\t\t\t\t\tvar pos2=[0];\n\t\t\t\t\t\t\tif(BytesEq(eid2, [0xD7])){//Track Number\n\t\t\t\t\t\t\t\tvar val=BytesInt(bytes2);\n\t\t\t\t\t\t\t\ttrack.number=val;\n\t\t\t\t\t\t\t\ttracks[val]=track;\n\t\t\t\t\t\t\t}else if(BytesEq(eid2, [0x83])){//Track Type\n\t\t\t\t\t\t\t\tvar val=BytesInt(bytes2);\n\t\t\t\t\t\t\t\tif(val==1) track.type=\"video\";\n\t\t\t\t\t\t\t\telse if(val==2) {\n\t\t\t\t\t\t\t\t\ttrack.type=\"audio\";\n\t\t\t\t\t\t\t\t\tif(!audioIdx) scope.track0=track;\n\t\t\t\t\t\t\t\t\ttrack.idx=audioIdx++;\n\t\t\t\t\t\t\t\t}else track.type=\"Type-\"+val;\n\t\t\t\t\t\t\t}else if(BytesEq(eid2, [0x86])){//Track Codec\n\t\t\t\t\t\t\t\tvar str=\"\";\n\t\t\t\t\t\t\t\tfor(var i=0;i<bytes2.length;i++){\n\t\t\t\t\t\t\t\t\tstr+=String.fromCharCode(bytes2[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttrack.codec=str;\n\t\t\t\t\t\t\t}else if(BytesEq(eid2, [0xE1])){\n\t\t\t\t\t\t\t\twhile(pos2[0]<bytes2.length){//循环读取 Audio 属性\n\t\t\t\t\t\t\t\t\tvar eid3=readMatroskaVInt(bytes2, pos2);\n\t\t\t\t\t\t\t\t\tvar bytes3=readMatroskaBlock(bytes2, pos2);\n\t\t\t\t\t\t\t\t\t//采样率、位数、声道数\n\t\t\t\t\t\t\t\t\tif(BytesEq(eid3, [0xB5])){\n\t\t\t\t\t\t\t\t\t\tvar val=0,arr=new Uint8Array(bytes3.reverse()).buffer;\n\t\t\t\t\t\t\t\t\t\tif(bytes3.length==4) val=new Float32Array(arr)[0];\n\t\t\t\t\t\t\t\t\t\telse if(bytes3.length==8) val=new Float64Array(arr)[0];\n\t\t\t\t\t\t\t\t\t\telse CLog(\"WebM Track !Float\",1,bytes3);\n\t\t\t\t\t\t\t\t\t\ttrack[sampleRateTxt]=Math.round(val);\n\t\t\t\t\t\t\t\t\t}else if(BytesEq(eid3, [0x62,0x64])) track.bitDepth=BytesInt(bytes3);\n\t\t\t\t\t\t\t\t\telse if(BytesEq(eid3, [0x9F])) track.channels=BytesInt(bytes3);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tscope._ht=1;\n\t\t\t\tCLog(\"WebM Tracks\",tracks);\n\t\t\t\tendPos();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//校验音频参数信息，如果不符合代码要求，统统拒绝处理\n\tvar track0=scope.track0;\n\tif(!track0)return;\n\tif(track0.bitDepth==16 && /FLOAT/i.test(track0.codec)){\n\t\ttrack0.bitDepth=32; //chrome v66 实际为浮点数\n\t\tCLog(\"WebM 16->32 bit\",3);\n\t}\n\tif(track0[sampleRateTxt]!=scope[sampleRateTxt] || track0.bitDepth!=32 || track0.channels<1 || !/(\\b|_)PCM\\b/i.test(track0.codec)){\n\t\tscope.bytes=[];//格式非预期 无法处理，清空缓冲数据\n\t\tif(!scope.bad)CLog(\"WebM Track Unexpected\",3,scope);\n\t\tscope.bad=1;\n\t\treturn -1;\n\t}\n\t\n\t//循环读取Cluster内的SimpleBlock\n\tvar datas=[],dataLen=0;\n\twhile(position[0]<bytes.length){\n\t\tvar eid1=readMatroskaVInt(bytes, position);\n\t\tvar bytes1=readMatroskaBlock(bytes, position);\n\t\tif(!bytes1)break;//数据不全，等待缓冲\n\t\tif(BytesEq(eid1, [0xA3])){//SimpleBlock完整数据\n\t\t\tvar trackNo=bytes1[0]&0xf;\n\t\t\tvar track=tracks[trackNo];\n\t\t\tif(!track){//不可能没有，数据出错？\n\t\t\t\tCLog(\"WebM !Track\"+trackNo,1,tracks);\n\t\t\t}else if(track.idx===0){\n\t\t\t\tvar u8arr=new Uint8Array(bytes1.length-4);\n\t\t\t\tfor(var i=4;i<bytes1.length;i++){\n\t\t\t\t\tu8arr[i-4]=bytes1[i];\n\t\t\t\t}\n\t\t\t\tdatas.push(u8arr); dataLen+=u8arr.length;\n\t\t\t}\n\t\t}\n\t\tendPos();\n\t}\n\t\n\tif(dataLen){\n\t\tvar more=new Uint8Array(bytes.length-scope.pos[0]);\n\t\tmore.set(bytes.subarray(scope.pos[0]));\n\t\tscope.bytes=more; //清理已读取了的缓冲数据\n\t\tscope.pos[0]=0;\n\t\t\n\t\tvar u8arr=new Uint8Array(dataLen); //已获取的音频数据\n\t\tfor(var i=0,i2=0;i<datas.length;i++){\n\t\t\tu8arr.set(datas[i],i2);\n\t\t\ti2+=datas[i].length;\n\t\t}\n\t\tvar arr=new Float32Array(u8arr.buffer);\n\t\t\n\t\tif(track0.channels>1){//多声道，提取一个声道\n\t\t\tvar arr2=[];\n\t\t\tfor(var i=0;i<arr.length;){\n\t\t\t\tarr2.push(arr[i]);\n\t\t\t\ti+=track0.channels;\n\t\t\t}\n\t\t\tarr=new Float32Array(arr2);\n\t\t};\n\t\treturn arr;\n\t}\n};\n//两个字节数组内容是否相同\nvar BytesEq=function(bytes1,bytes2){\n\tif(!bytes1 || bytes1.length!=bytes2.length) return false;\n\tif(bytes1.length==1) return bytes1[0]==bytes2[0];\n\tfor(var i=0;i<bytes1.length;i++){\n\t\tif(bytes1[i]!=bytes2[i]) return false;\n\t}\n\treturn true;\n};\n//字节数组BE转成int数字\nvar BytesInt=function(bytes){\n\tvar s=\"\";//0-8字节，js位运算只支持4字节\n\tfor(var i=0;i<bytes.length;i++){var n=bytes[i];s+=(n<16?\"0\":\"\")+n.toString(16)};\n\treturn parseInt(s,16)||0;\n};\n//读取一个可变长数值字节数组\nvar readMatroskaVInt=function(arr,pos,trim){\n\tvar i=pos[0];\n\tif(i>=arr.length)return;\n\tvar b0=arr[i],b2=(\"0000000\"+b0.toString(2)).substr(-8);\n\tvar m=/^(0*1)(\\d*)$/.exec(b2);\n\tif(!m)return;\n\tvar len=m[1].length, val=[];\n\tif(i+len>arr.length)return;\n\tfor(var i2=0;i2<len;i2++){ val[i2]=arr[i]; i++; }\n\tif(trim) val[0]=parseInt(m[2]||'0',2);\n\tpos[0]=i;\n\treturn val;\n};\n//读取一个自带长度的内容字节数组\nvar readMatroskaBlock=function(arr,pos){\n\tvar lenVal=readMatroskaVInt(arr,pos,1);\n\tif(!lenVal)return;\n\tvar len=BytesInt(lenVal);\n\tvar i=pos[0], val=[];\n\tif(len<0x7FFFFFFF){ //超大值代表没有长度\n\t\tif(i+len>arr.length)return;\n\t\tfor(var i2=0;i2<len;i2++){ val[i2]=arr[i]; i++; }\n\t}\n\tpos[0]=i;\n\treturn val;\n};\n//=====End WebM读取=====\n\n\n//=====i18n 简版国际化多语言支持=====\nvar i18n=Recorder.i18n={\n\tlang: \"zh-CN\" //默认中文\n\t,alias:{\"zh-CN\":\"zh\",\"en-US\":\"en\"} //别名配置，映射到一个语言实例\n\t,locales:{} //语言实例：zh:{key:\"text\"}\n\t,data:{} //各种数据，desc$xx：语言描述，rtl$xx：文本方向是否从右到左 rtl$zh:false rtl$ar:true\n\t//添加语言文本内容，set={lang:\"\",overwrite:true}，texts=[\"key:text{1}\",...]\n\t,put:function(set,texts){\n\t\tvar tag=RecTxt+\".i18n.put: \";\n\t\tvar overwrite=set.overwrite; overwrite=overwrite==null||overwrite;\n\t\tvar lang=set.lang; lang=i18n.alias[lang]||lang;\n\t\tif(!lang)throw new Error(tag+\"set.lang?\");\n\t\tvar locale=i18n.locales[lang];\n\t\tif(!locale){ locale={}; i18n.locales[lang]=locale };\n\t\tvar exp=/^([\\w\\-]+):/,m;\n\t\tfor(var i=0;i<texts.length;i++){\n\t\t\tvar v=texts[i]; m=exp.exec(v);\n\t\t\tif(!m){ CLog(tag+\"'key:'? \"+v,3,set); continue }\n\t\t\tvar key=m[1],v=v.substr(key.length+1);\n\t\t\tif(!overwrite && locale[key]) continue;\n\t\t\tlocale[key]=v;\n\t\t}\n\t}\n\t//获取key对应的文本，如果没有对应文本，将返回en的，en的也没有将返回zh的\n\t,get:function(/*key,args,lang*/){\n\t\treturn i18n.v_G.apply(null,arguments);\n\t}, v_G:function(key,args,lang){ //全局可重写get\n\t\targs=args||[];\n\t\tlang=lang||i18n.lang; lang=i18n.alias[lang]||lang;\n\t\tvar locale=i18n.locales[lang];\n\t\tvar val=locale&&locale[key]||\"\";\n\t\tif(!val&&lang!=\"zh\"){\n\t\t\tif(lang==\"en\")return i18n.v_G(key,args,\"zh\");\n\t\t\treturn i18n.v_G(key,args,\"en\");\n\t\t}\n\t\ti18n.lastLang=lang;\n\t\tif(val==\"=Empty\")return \"\";\n\t\treturn val.replace(/\\{(\\d+)(\\!?)\\}/g,function(v,a,b){\n\t\t\ta=+a||0; v=args[a-1];\n\t\t\tif(a<1 || a>args.length){ v=\"{?}\"; CLog(\"i18n[\"+key+\"] no {\"+a+\"}: \"+val,3) }\n\t\t\treturn b?\"\":v;\n\t\t});\n\t}\n\t/**返回一个国际化文本，返回的文本取决于i18n.lang。\n\t\t调用参数：T(\"key:[lang]:中文{1}\",\"[lang]:英文{1}\",...,0,\"args1\",\"args2\")，除了key:，其他都是可选的，文本如果在语言实例中不存在会push进去，第一个文本无lang时默认zh，第二个无lang时默认en，文本中用{1-n}来插入args\n\t\t第一个args前面这个参数必须是0；也可以不提供args，这个参数填args的数量，此时不返回文本，只返回key，再用i18n.get提供参数获取文本\n\t\t本函数调用，第一个文本需中文，调用尽量简单，不要换行，方便后续自动提取翻译列表\n\t\targs如果旧的参数位置发生了变更，应当使用新的key，让旧的翻译失效，增加args无需更换key\n\t\tkey的生成使用随机字符串，不同源码里面可以搞个不同前缀:\n\t\t\ts=\"\";L=4; for(var i=0,n;i<L;i++){ n=~~(Math.random()*62);s+=n<10?n:String.fromCharCode(n<36?55+n:61+n); }; s\n\t**/\n\t,$T:function(){\n\t\treturn i18n.v_T.apply(null,arguments);\n\t} ,v_T:function(){ //全局可重写$T\n\t\tvar a=arguments,key=\"\",args=[],isArgs=0,tag=RecTxt+\".i18n.$T:\";\n\t\tvar exp=/^([\\w\\-]*):/,m;\n\t\tfor(var i=0;i<a.length;i++){\n\t\t\tvar v=a[i];\n\t\t\tif(i==0){\n\t\t\t\tm=exp.exec(v); key=m&&m[1];\n\t\t\t\tif(!key)throw new Error(tag+\"0 'key:'?\");\n\t\t\t\tv=v.substr(key.length+1);\n\t\t\t}\n\t\t\tif(isArgs===-1) args.push(v);\n\t\t\telse if(isArgs) throw new Error(tag+\" bad args\");\n\t\t\telse if(v===0) isArgs=-1;\n\t\t\telse if(IsNum(v)){\n\t\t\t\tif(v<1) throw new Error(tag+\" bad args\");\n\t\t\t\tisArgs=v;\n\t\t\t}else{\n\t\t\t\tvar lang=i==1?\"en\":i?\"\":\"zh\";\n\t\t\t\tm=exp.exec(v); if(m){ lang=m[1]||lang; v=v.substr(m[1].length+1); }\n\t\t\t\tif(!m || !lang)throw new Error(tag+i+\" 'lang:'?\");\n\t\t\t\ti18n.put({lang:lang,overwrite:false},[key+\":\"+v]);\n\t\t\t}\n\t\t}\n\t\tif(!key)return \"\";\n\t\tif(isArgs>0)return key;\n\t\treturn i18n.v_G(key,args);\n\t}\n};\nvar $T=i18n.$T; $T.G=i18n.get;\n//预定义文本\n$T(\"NonBrowser-1::非浏览器环境，不支持{1}\",1);\n$T(\"IllegalArgs-1::参数错误：{1}\",1);\n$T(\"NeedImport-2::调用{1}需要先导入{2}\",2);\n$T(\"NotSupport-1::不支持：{1}\",1);\n//=====End i18n=====\n\n\n\n//流量统计用1像素图片地址，设置为空将不参与统计\nRecorder.TrafficImgUrl=\"//ia.51.la/go1?id=20469973&pvFlag=1\";\nvar Traffic=Recorder.Traffic=function(report){\n\tif(!isBrowser)return;\n\treport=report?\"/\"+RecTxt+\"/Report/\"+report:\"\";\n\tvar imgUrl=Recorder.TrafficImgUrl;\n\tif(imgUrl){\n\t\tvar data=Recorder.Traffic;\n\t\tvar m=/^(https?:..[^\\/#]*\\/?)[^#]*/i.exec(location.href)||[];\n\t\tvar host=(m[1]||\"http://file/\");\n\t\tvar idf=(m[0]||host)+report;\n\t\t\n\t\tif(imgUrl.indexOf(\"//\")==0){\n\t\t\t//给url加上http前缀，如果是file协议下，不加前缀没法用\n\t\t\tif(/^https:/i.test(idf)){\n\t\t\t\timgUrl=\"https:\"+imgUrl;\n\t\t\t}else{\n\t\t\t\timgUrl=\"http:\"+imgUrl;\n\t\t\t};\n\t\t};\n\t\tif(report){\n\t\t\timgUrl=imgUrl+\"&cu=\"+encodeURIComponent(host+report);\n\t\t};\n\t\t\n\t\tif(!data[idf]){\n\t\t\tdata[idf]=1;\n\t\t\t\n\t\t\tvar img=new Image();\n\t\t\timg.src=imgUrl;\n\t\t\tCLog(\"Traffic Analysis Image: \"+(report||RecTxt+\".TrafficImgUrl=\"+Recorder.TrafficImgUrl));\n\t\t};\n\t};\n};\n\n\n\nif(WRec2){\n\tCLog($T(\"8HO5::覆盖导入{1}\",0,RecTxt),1);\n\tWRec2.Destroy();\n};\nExport[RecTxt]=Recorder;\n\n}));"],"names":["t","window","document","r","Object","e","w","y","u","F","f","b","LM","S","k","x","U","G","i","I","CLog","i18n","$T","IsOpen","Stream","getTracks","audioTracks","n","readyState","LIVE","BufferSize","Destroy","N","D","BindDestroy","Support","navigator","mediaDevices","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","Scope","GetContext","AudioContext","webkitAudioContext","Ctx","state","NewCtxs","close","a","length","push","CloseNewCtx","splice","V","_isC","L","ResumeCtx","o","s","c","l","v","p","_LsSC","h","g","resume","then","message","CtxSpEnd","M","T","A","R","_RC","_c","_m","createMediaStreamSource","destination","_d","connect","_call","d","Int16Array","Math","max","min","abs","m","C","_","createScriptProcessor","createJavaScriptNode","isWorklet","$","get","_p","call","onaudioprocess","inputBuffer","getChannelData","isWebM","O","AudioWorkletNode","_na","clearTimeout","setTimeout","_n","processorOptions","bufferSize","port","onmessage","data","val","toString","replace","DEL_super","this","buffer","Float32Array","pos","kill","$C","log","set","postMessage","slice","subarray","btoa","unescape","encodeURIComponent","addModule","prototype","isTypeSupported","_ra","assign","mimeType","ConnectWebMOptions","_r","_rd","sampleRate","FileReader","onloadend","z","Uint8Array","result","readAsArrayBuffer","start","disconnect","stop","stream","StopS_","SampleData","index","offset","filter","fn","sr","IIRFilter","frameNext","frameSize","frameType","floor","Embed","b0","b1","x1","x2","a1","y1","a2","y2","ceil","E","PI","sin","cos","PowerLevel","round","PowerDBFS","console","Date","getMinutes","substr","getSeconds","getMilliseconds","envIn","envCheck","id","arguments","error","warn","apply","type","onProcess","_S","Sync","_streamStore","sourceStream","_streamCtx","open","_streamTag","_SO","_O","_O_","envName","canProcess","runningContext","top","test","isSecureContext","name","code","audioTrackSet","audio","JSON","stringify","userAgent","_stop","mock","isMock","mockEnvInfo","buffers","recSize","_setSrcSR","Int8Array","Int32Array","takeoffEncodeChunk","envStart","envInLast","envInFirst","envInFix","envInFixTs","engineCtx","pcmDatas","pcmSize","envResume","now","disableEnvInFix","chunkInfo","pause","toFixed","ArrayBuffer","byteLength","size","Blob","tracks","bytes","_ht","P","B","channels","W","number","track0","idx","String","fromCharCode","codec","reverse","Float64Array","bitDepth","bad","parseInt","exec","lang","alias","locales","put","overwrite","Error","v_G","lastLang","v_T","TrafficImgUrl","Traffic","location","href","indexOf","Image","src","define","Recorder","module","exports","enc_wav","stable","fast","getTestMsg","wav","bitRate","wav_header","DataView","setUint8","charCodeAt","setUint16","setUint32","browser","win","Export","isBrowser","NOOP","IsNum","initFn","GitUrl","RecTxt","getUserMediaTxt","srcSampleRateTxt","sampleRateTxt","bitRateTxt","CatchTxt","WRec2","track","Disconnect","DestroyList","key","scope","tryNew","AC","ctx","CloseCtx","arr","check","True","False","isEnd","isBind","isLsSC","runC","EL","Tag","end","err","ok","bind","run","add","types","sVal","spEnd","CtxState","msg","ConnectEnableWebM","ConnectEnableWorklet","Connect","streamStore","isUserMedia","badInt","mediaConn","node","media","ctxDest","cmsdTxt","webMTips","calls","onReceive","float32Arr","k0","pcm","sum","j","scriptProcessor","audioWorklet","recAudioWorklet","RecProc","MediaRecorderTxt","MRWebMPCM","oldFn","oldIsBest","oldScript","_Disconn_n","process","connWorklet","_Disconn_r","AwNode","clazzUrl","xf","clazz","option","This","input","len","more","awNext","nodeAlive","createNode","ctxOK","url","MR","onData","webmType","supportMR","mrNext","mrSet","mr","webmData","reader","f32arr","WebM_Extract","connWebM","ConnAlive","isGlobal","pcmSampleRate","newSampleRate","prevChunkInfo","Txt","freq","filterFn","nLen","step","res","il","F1","F2","Fx","Fy","i0","i2","before","frameNextSize","u8Pos","useLowPass","ov","sn","cs","alpha","a0","pcmAbsSum","pcmLength","power","maxSample","Pref","recID","cwe","IsLoser","ID","vB","vS","newCtx","failCall","errMsg","isUserNotAllow","Lock","lockOpen","lockClose","lockFail","checkMsg","codeFail","f1","oldStream","f2","trackSet","mSet","pro","sTag","pcmData","setSr","envInfo","tag","hasFn","bufferSampleRate","powerLevel","bufferFirstIdx","buffersThis","bufferFirstIdxThis","pcmTime","tsInStart","tsPcm","tsInPrev","tsIn","addTime","fixOpen","addPcm","sizeOld","addSize","duration","bufferNextIdx","bufferNextIdxThis","asyncEnd","num","asyncBegin","hasClear","procTxt","slowT","isOpen","tag3","keepEngine","autoClose","t1","envInMS","envInLen","blob","mime","tBlob","tABuf","tDT","tDDT","dType","dTag","isAB","dErr","dLen","isCtxWait","chunk","inBytes","position","endPos","sBL","readMatroskaVInt","readMatroskaBlock","BytesEq","eid0","bytes0","pos0","audioIdx","eid1","bytes1","pos1","eid2","bytes2","pos2","BytesInt","str","eid3","bytes3","datas","dataLen","trackNo","u8arr","arr2","trim","b2","lenVal","texts","locale","exp","args","isArgs","report","imgUrl","host","idf","factory"],"sourceRoot":""}