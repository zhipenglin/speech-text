(self.webpackChunk_kne_components_speech_text=self.webpackChunk_kne_components_speech_text||[]).push([[232],{458:(e,t,r)=>{var n;!function(){var a="object"==typeof window&&!!window.document,o=a?window:Object;!function(e,t){"use strict";var r=function(){},n=function(e){return"number"==typeof e},a=function(e){return new A(e)},o=a.LM="2024-04-09 19:15",i="https://github.com/xiangyuecn/Recorder",s="Recorder",c="getUserMedia",f="srcSampleRate",u="sampleRate",l="bitRate",v="catch",p=e[s];if(p&&p.LM==o)return p.CLog(p.i18n.$T("K8zP::\u91cd\u590d\u5bfc\u5165{1}",0,s),3);a.IsOpen=function(){var e=a.Stream;if(e){var t=(e.getTracks&&e.getTracks()||e.audioTracks||[])[0];if(t){var r=t.readyState;return"live"==r||r==t.LIVE}}return!1},a.BufferSize=4096,a.Destroy=function(){for(var e in I(s+" Destroy"),k(),h)h[e]()};var h={};a.BindDestroy=function(e,t){h[e]=t},a.Support=function(){if(!t)return!1;var e=navigator.mediaDevices||{};return e[c]||(e=navigator)[c]||(e[c]=e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia),!!e[c]&&(a.Scope=e,!!a.GetContext())},a.GetContext=function(e){if(!t)return null;var r=window.AudioContext;if(r||(r=window.webkitAudioContext),!r)return null;var n=a.Ctx;if(n&&"closed"!=n.state||(n=a.Ctx=new r,a.NewCtxs=a.NewCtxs||[],a.BindDestroy("Ctx",(function(){var e=a.Ctx;e&&e.close&&(g(e),a.Ctx=0);var t=a.NewCtxs;a.NewCtxs=[];for(var r=0;r<t.length;r++)g(t[r])}))),e&&n.close)try{n=new r,a.NewCtxs.push(n)}catch(e){I("GetContext tryNew Error",1,e)}return n},a.CloseNewCtx=function(e){if(e&&e!=a.Ctx){g(e);for(var t=a.NewCtxs||[],r=t.length,n=0;n<t.length;n++)if(t[n]==e){t.splice(n,1);break}I(N("mSxV::\u5269{1}\u4e2aGetContext\u672aclose",0,r+"-1="+t.length),t.length?3:0)}};var g=function(e){if(e&&e.close){e._isC=1;try{e.close()}catch(e){I("ctx close err",1,e)}}},d=a.ResumeCtx=function(e,t,r,n){var a=0,o=0,i=0,s=0,c="EventListener",f="ResumeCtx ",u=function(t,f){o&&l(),a||(a=1,t&&n(t,s),f&&r(s)),f&&(!e._LsSC&&e["add"+c]&&e["add"+c]("statechange",p),e._LsSC=1,i=1)},l=function(e){if(!e||!o){o=e?1:0;for(var t=["focus","mousedown","mouseup","touchstart","touchend"],r=0;r<t.length;r++)window[(e?"add":"remove")+c](t[r],p,!0)}},p=function(){var r=e.state,n=m(r);if(!a&&!t(n?++s:s))return u();n?(i&&I(f+"sc "+r,3),l(1),e.resume().then((function(){i&&I(f+"sc "+e.state),u(0,1)}))[v]((function(t){I(f+"error",1,t),m(e.state)||u(t.message||"error")}))):"closed"==r?(i&&!e._isC&&I(f+"sc "+r,1),u("ctx closed")):u(0,1)};p()},m=a.CtxSpEnd=function(e){return"suspended"==e||"interrupted"==e},C=function(e){var t=e.state,r="ctx.state="+t;return m(t)&&(r+=N("nMIy::\uff08\u6ce8\u610f\uff1actx\u4e0d\u662frunning\u72b6\u6001\uff0crec.open\u548cstart\u81f3\u5c11\u8981\u6709\u4e00\u4e2a\u5728\u7528\u6237\u64cd\u4f5c(\u89e6\u6478\u3001\u70b9\u51fb\u7b49)\u65f6\u8fdb\u884c\u8c03\u7528\uff0c\u5426\u5219\u5c06\u5728rec.start\u65f6\u5c1d\u8bd5\u8fdb\u884cctx.resume\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u517c\u5bb9\u6027\u95ee\u9898(\u4ec5iOS)\uff0c\u8bf7\u53c2\u9605\u6587\u6863\u4e2drunningContext\u914d\u7f6e\uff09")),r},_="ConnectEnableWebM";a[_]=!0;var y="ConnectEnableWorklet";a[y]=!1;var w=function(e,t){var r=e.BufferSize||a.BufferSize,n=e.Stream,o=n._RC||n._c||a.GetContext(!0);n._c=o;var i,c,f,l=function(e){var t=n._m=o.createMediaStreamSource(n),r=o.destination,a="createMediaStreamDestination";o[a]&&(r=n._d=o[a]()),t.connect(e),e.connect(r)},p="",h=n._call,g=function(e){for(var t in h){for(var r=e.length,n=new Int16Array(r),a=0,o=0;o<r;o++){var i=Math.max(-1,Math.min(1,e[o]));i=i<0?32768*i:32767*i,n[o]=i,a+=Math.abs(i)}for(var s in h)h[s](n,a);return}},m="ScriptProcessor",C="audioWorklet",w=s+" "+C,b="RecProc",k="MediaRecorder",M=k+".WebM.PCM",L=o.createScriptProcessor||o.createJavaScriptNode,T=N("ZGlf::\u3002\u7531\u4e8e{1}\u5185\u90e81\u79d2375\u6b21\u56de\u8c03\uff0c\u5728\u79fb\u52a8\u7aef\u53ef\u80fd\u4f1a\u6709\u6027\u80fd\u95ee\u9898\u5bfc\u81f4\u56de\u8c03\u4e22\u5931\u5f55\u97f3\u53d8\u77ed\uff0cPC\u7aef\u65e0\u5f71\u54cd\uff0c\u6682\u4e0d\u5efa\u8bae\u5f00\u542f{1}\u3002",0,C),A=function(){c=n.isWorklet=!1,S(n),I(N("7TU0::Connect\u91c7\u7528\u8001\u7684{1}\uff0c",0,m)+E.get(N(a[y]?"JwCL::\u4f46\u5df2\u8bbe\u7f6e{1}\u5c1d\u8bd5\u542f\u7528{2}":"VGjB::\u53ef\u8bbe\u7f6e{1}\u5c1d\u8bd5\u542f\u7528{2}",2),[s+"."+y+"=true",C])+p+T,3);var e=n._p=L.call(o,r,1,1);l(e),e.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);g(t)}},D=function(){i=n.isWebM=!1,x(n),c=n.isWorklet=!L||a[y];var e=window.AudioWorkletNode;if(c&&o[C]&&e){var t=function(){return c&&n._na},u=n._na=function(){""!==f&&(clearTimeout(f),f=setTimeout((function(){f=0,t()&&(I(N("MxX1::{1}\u672a\u8fd4\u56de\u4efb\u4f55\u97f3\u9891\uff0c\u6062\u590d\u4f7f\u7528{2}",0,C,m),3),L&&A())}),500))},h=function(){if(t()){var a=n._n=new e(o,b,{processorOptions:{bufferSize:r}});l(a),a.port.onmessage=function(e){f&&(clearTimeout(f),f=""),t()?g(e.data.val):c||I(N("XUap::{1}\u591a\u4f59\u56de\u8c03",0,C),3)},I(N("yOta::Connect\u91c7\u7528{1}\uff0c\u8bbe\u7f6e{2}\u53ef\u6062\u590d\u8001\u5f0f{3}",0,C,s+"."+y+"=false",m)+p+T,3)}},_=function(){if(t())if(o[b])h();else{var e,r,n=(r="class "+b+" extends AudioWorkletProcessor{",r+="constructor "+(e=function(e){return e.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,w)})((function(e){DEL_super(e);var t=this,r=e.processorOptions.bufferSize;t.bufferSize=r,t.buffer=new Float32Array(2*r),t.pos=0,t.port.onmessage=function(e){e.data.kill&&(t.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",e)})),r+="process "+e((function(e,t,r){var n=this,a=n.bufferSize,o=n.buffer,i=n.pos;if((e=(e[0]||[])[0]||[]).length){o.set(e,i);var s=~~((i+=e.length)/a)*a;if(s){this.port.postMessage({val:o.slice(0,s)});var c=o.subarray(s,i);(o=new Float32Array(2*a)).set(c),i=c.length,n.buffer=o}n.pos=i}return!n.kill})),r=(r+='}try{registerProcessor("'+b+'", '+b+')}catch(e){$C.error("'+w+' Reg Error",e)}').replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(r))));o[C].addModule(n).then((function(e){t()&&(o[b]=1,h(),f&&u())}))[v]((function(e){I(C+".addModule Error",1,e),t()&&A()}))}};d(o,(function(){return t()}),_,_)}else A()};!function(){var e=window[k],c="ondataavailable",l="audio/webm; codecs=pcm";i=n.isWebM=a[_];var v=e&&c in e.prototype&&e.isTypeSupported(l);if(p=v?"":N("VwPd::\uff08\u6b64\u6d4f\u89c8\u5668\u4e0d\u652f\u6301{1}\uff09",0,M),!t||!i||!v)return D();var h=function(){return i&&n._ra},d=(n._ra=function(){""!==f&&(clearTimeout(f),f=setTimeout((function(){h()&&(I(N("vHnb::{1}\u672a\u8fd4\u56de\u4efb\u4f55\u97f3\u9891\uff0c\u964d\u7ea7\u4f7f\u7528{2}",0,k,C),3),D())}),500))},Object.assign({mimeType:l},a.ConnectWebMOptions)),y=n._r=new e(n,d),w=n._rd={sampleRate:o[u]};y[c]=function(e){var t=new FileReader;t.onloadend=function(){if(h()){var e=R(new Uint8Array(t.result),w);if(!e)return;if(-1==e)return void D();f&&(clearTimeout(f),f=""),g(e)}else i||I(N("O9P7::{1}\u591a\u4f59\u56de\u8c03",0,k),3)},t.readAsArrayBuffer(e.data)},y.start(~~(r/48)),I(N("LMEm::Connect\u91c7\u7528{1}\uff0c\u8bbe\u7f6e{2}\u53ef\u6062\u590d\u4f7f\u7528{3}\u6216\u8001\u5f0f{4}",0,M,s+"."+_+"=false",C,m))}()},b=function(e){e._na&&e._na(),e._ra&&e._ra()},S=function(e){e._na=null,e._n&&(e._n.port.postMessage({kill:!0}),e._n.disconnect(),e._n=null)},x=function(e){if(e._ra=null,e._r){try{e._r.stop()}catch(e){I("mr stop err",1,e)}e._r=null}},k=function(e){var t=(e=e||a)==a,r=e.Stream;r&&(r._m&&(r._m.disconnect(),r._m=null),!r._RC&&r._c&&a.CloseNewCtx(r._c),r._RC=null,r._c=null,r._d&&(M(r._d.stream),r._d=null),r._p&&(r._p.disconnect(),r._p.onaudioprocess=r._p=null),S(r),x(r),t&&M(r)),e.Stream=0},M=a.StopS_=function(e){for(var t=e.getTracks&&e.getTracks()||e.audioTracks||[],r=0;r<t.length;r++){var n=t[r];n.stop&&n.stop()}e.stop&&e.stop()};a.SampleData=function(e,t,r,n,o){var i="SampleData";n||(n={});var s=n.index||0,c=n.offset||0,f=n.filter;if(f&&f.fn&&f.sr!=t&&(f=null,I(N("d48C::{1}\u7684filter\u91c7\u6837\u7387\u53d8\u4e86\uff0c\u91cd\u8bbe\u6ee4\u6ce2",0,i),3)),!f){var u=3*t/4<r?0:r/2*3/4;f={fn:u?a.IIRFilter(!0,t,u):0}}f.sr=t;var l=f.fn,v=n.frameNext||[];o||(o={});var p=o.frameSize||1;o.frameType&&(p="mp3"==o.frameType?1152:1);var h=e.length;h+1<s&&I(N("tlbC::{1}\u4f3c\u4e4e\u4f20\u5165\u4e86\u672a\u91cd\u7f6echunk {2}",0,i,s+">"+h),3);for(var g=0,d=s;d<h;d++)g+=e[d].length;g=Math.max(0,g-Math.floor(c));var m=t/r;1<m?g=Math.floor(g/m):(m=1,r=t),g+=v.length;var C=new Int16Array(g),_=0;for(d=0;d<v.length;d++)C[_]=v[d],_++;for(;s<h;s++){for(var y=e[s],w=(d=c,y.length),b=l&&l.Embed,S=0,x=0,k=0,M=0,L=0,T=0;L<w;L++,T++)if(T<w&&(b?(k=y[T],M=b.b0*k+b.b1*b.x1+b.b0*b.x2-b.a1*b.y1-b.a2*b.y2,b.x2=b.x1,b.x1=k,b.y2=b.y1,b.y1=M):M=l?l(y[T]):y[T]),S=x,x=M,0!=T){var A=Math.floor(d);if(L==A){var R=S+((Math.ceil(d)<w?x:S)-S)*(d-A);32767<R?R=32767:R<-32768&&(R=-32768),C[_]=R,_++,d+=m}}else L--;c=Math.max(0,d-w)}v=null;var D=C.length%p;if(0<D){var O=2*(C.length-D);v=new Int16Array(C.buffer.slice(O)),C=new Int16Array(C.buffer.slice(0,O))}return{index:s,offset:c,filter:f,frameNext:v,sampleRate:r,data:C}},a.IIRFilter=function(e,t,r){var n=2*Math.PI*r/t,a=Math.sin(n),o=Math.cos(n),i=a/2,s=1+i,c=-2*o/s,f=(1-i)/s;if(e)var u=(1-o)/2/s,l=(1-o)/s;else u=(1+o)/2/s,l=-(1+o)/s;var v=0,p=0,h=0,g=0,d=0,m=function(e){return h=u*e+l*v+u*p-c*g-f*d,p=v,v=e,d=g,g=h};return m.Embed={x1:0,x2:0,y1:0,y2:0,b0:u,b1:l,a1:c,a2:f},m},a.PowerLevel=function(e,t){var r=e/t||0;return r<1251?Math.round(r/1250*10):Math.round(Math.min(100,Math.max(0,100*(1+Math.log(r/1e4)/Math.log(10)))))},a.PowerDBFS=function(e){var t=Math.max(.1,e||0);return t=Math.min(t,32767),t=20*Math.log(t/32767)/Math.log(10),Math.max(-100,Math.round(t))},a.CLog=function(e,t){if("object"==typeof console){var r=new Date,o=("0"+r.getMinutes()).substr(-2)+":"+("0"+r.getSeconds()).substr(-2)+"."+("00"+r.getMilliseconds()).substr(-3),i=this&&this.envIn&&this.envCheck&&this.id,c=["["+o+" "+s+(i?":"+i:"")+"]"+e],f=arguments,u=a.CLog,l=2,v=u.log||console.log;for(n(t)?v=1==t?u.error||console.error:3==t?u.warn||console.warn:v:l=1;l<f.length;l++)c.push(f[l]);L?v&&v("[IsLoser]"+c[0],1<c.length?c:""):v.apply(console,c)}};var I=function(){a.CLog.apply(this,arguments)},L=!0;try{L=!console.log.apply}catch(e){}var T=0;function A(e){var t=this;t.id=++T,F();var a={type:"mp3",onProcess:r};for(var o in e)a[o]=e[o];var i=(t.set=a)[l],s=a[u];(i&&!n(i)||s&&!n(s))&&t.CLog(N.G("IllegalArgs-1",[N("VtS4::{1}\u548c{2}\u5fc5\u987b\u662f\u6570\u503c",0,u,l)]),1,e),a[l]=+i||16,a[u]=+s||16e3,t.state=0,t._S=9,t.Sync={O:9,C:9}}a.Sync={O:9,C:9},a.prototype=A.prototype={CLog:I,_streamStore:function(){return this.set.sourceStream?this:a},_streamCtx:function(){var e=this._streamStore().Stream;return e&&e._c},open:function(e,n){var s=this,f=s.set,l=s._streamStore(),p=0;e=e||r;var h=function(e,t){t=!!t,s.CLog(N("5tWi::\u5f55\u97f3open\u5931\u8d25\uff1a")+e+",isUserNotAllow:"+t,1),p&&a.CloseNewCtx(p),n&&n(e,t)};s._streamTag=c;var g=function(){s.CLog("open ok, id:"+s.id+" stream:"+s._streamTag),e(),s._SO=0},d=l.Sync,m=++d.O,_=d.C;if(s._O=s._O_=m,s._SO=s._S,t){var y=s.envCheck({envName:"H5",canProcess:!0});if(y)h(N("A5bm::\u4e0d\u80fd\u5f55\u97f3\uff1a")+y);else if(f.sourceStream){if(s._streamTag="set.sourceStream",!a.GetContext())return void h(N("1iU7::\u4e0d\u652f\u6301\u6b64\u6d4f\u89c8\u5668\u4ece\u6d41\u4e2d\u83b7\u53d6\u5f55\u97f3"));k(l);var b=s.Stream=f.sourceStream;b._RC=f.runningContext,b._call={};try{w(l)}catch(e){return k(l),void h(N("BTW2::\u4ece\u6d41\u4e2d\u6253\u5f00\u5f55\u97f3\u5931\u8d25\uff1a")+e.message)}g()}else{var S=function(e,t){try{window.top.a}catch(e){return void h(N("Nclz::\u65e0\u6743\u5f55\u97f3(\u8de8\u57df\uff0c\u8bf7\u5c1d\u8bd5\u7ed9iframe\u6dfb\u52a0\u9ea6\u514b\u98ce\u8bbf\u95ee\u7b56\u7565\uff0c\u5982{1})",0,'allow="camera;microphone"'))}/Permission|Allow/i.test(e)?h(N("gyO5::\u7528\u6237\u62d2\u7edd\u4e86\u5f55\u97f3\u6743\u9650"),!0):!1===window.isSecureContext?h(N("oWNo::\u6d4f\u89c8\u5668\u7981\u6b62\u4e0d\u5b89\u5168\u9875\u9762\u5f55\u97f3\uff0c\u53ef\u5f00\u542fhttps\u89e3\u51b3")):/Found/i.test(e)?h(t+N("jBa9::\uff0c\u65e0\u53ef\u7528\u9ea6\u514b\u98ce")):h(t)};if(a.IsOpen())g();else if(a.Support()){var x=f.runningContext;x||(x=p=a.GetContext(!0));var M=function(e){setTimeout((function(){e._call={};var t=a.Stream;t&&(k(),e._call=t._call),(a.Stream=e)._c=x,e._RC=f.runningContext,function(){if(_!=d.C||!s._O){var e=N("dFm8::open\u88ab\u53d6\u6d88");return m==d.O?s.close():e=N("VtJO::open\u88ab\u4e2d\u65ad"),h(e),!0}}()||(a.IsOpen()?(t&&s.CLog(N("upb8::\u53d1\u73b0\u540c\u65f6\u591a\u6b21\u8c03\u7528open"),1),w(l,1),g()):h(N("Q1GA::\u5f55\u97f3\u529f\u80fd\u65e0\u6548\uff1a\u65e0\u97f3\u9891\u6d41")))}),100)},I=function(e){var t=e.name||e.message||e.code+":"+e;s.CLog(N("xEQR::\u8bf7\u6c42\u5f55\u97f3\u6743\u9650\u9519\u8bef"),1,e),S(t,N("bDOG::\u65e0\u6cd5\u5f55\u97f3\uff1a")+t)},L=f.audioTrackSet||{};L[u]=x[u];var T={audio:L};try{var A=a.Scope[c](T,M,I)}catch(e){s.CLog(c,3,e),T={audio:!0},A=a.Scope[c](T,M,I)}s.CLog(c+"("+JSON.stringify(T)+") "+C(x)+N("RiWe::\uff0c\u672a\u914d\u7f6enoiseSuppression\u548cechoCancellation\u65f6\u6d4f\u89c8\u5668\u53ef\u80fd\u4f1a\u81ea\u52a8\u6253\u5f00\u964d\u566a\u548c\u56de\u58f0\u6d88\u9664\uff0c\u79fb\u52a8\u7aef\u53ef\u80fd\u4f1a\u964d\u4f4e\u7cfb\u7edf\u64ad\u653e\u97f3\u91cf\uff08\u5173\u95ed\u5f55\u97f3\u540e\u53ef\u6062\u590d\uff09\uff0c\u8bf7\u53c2\u9605\u6587\u6863\u4e2daudioTrackSet\u914d\u7f6e")+"("+i+") LM:"+o+" UA:"+navigator.userAgent),A&&A.then&&A.then(M)[v](I)}else S("",N("COxc::\u6b64\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u5f55\u97f3"))}}else h(N.G("NonBrowser-1",["open"])+N("EMJq::\uff0c\u53ef\u5c1d\u8bd5\u4f7f\u7528RecordApp\u89e3\u51b3\u65b9\u6848")+"("+i+"/tree/master/app-support-sample)")},close:function(e){e=e||r;var t=this,n=t._streamStore();t._stop();var a=" stream:"+t._streamTag,o=n.Sync;if(t._O=0,t._O_!=o.O)return t.CLog(N("hWVz::close\u88ab\u5ffd\u7565\uff08\u56e0\u4e3a\u540c\u65f6open\u4e86\u591a\u4e2arec\uff0c\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u4f1a\u771f\u6b63close\uff09")+a,3),void e();o.C++,k(n),t.CLog("close,"+a),e()},mock:function(e,t){var r=this;return r._stop(),r.isMock=1,r.mockEnvInfo=null,r.buffers=[e],r.recSize=e.length,r._setSrcSR(t),r._streamTag="mock",r},_setSrcSR:function(e){var t=this.set,r=t[u];e<r?t[u]=e:r=0,this[f]=e,this.CLog(f+": "+e+" set."+u+": "+t[u]+(r?" "+N("UHvm::\u5ffd\u7565")+": "+r:""),r?3:0)},envCheck:function(e){var t,r=this.set,n="CPU_BE";if(t||a[n]||"function"!=typeof Int8Array||new Int8Array(new Int32Array([1]).buffer)[0]||(F(n),t=N("Essp::\u4e0d\u652f\u6301{1}\u67b6\u6784",0,n)),!t){var o=r.type,i=this[o+"_envCheck"];r.takeoffEncodeChunk&&(i?e.canProcess||(t=N("7uMV::{1}\u73af\u5883\u4e0d\u652f\u6301\u5b9e\u65f6\u5904\u7406",0,e.envName)):t=N("2XBl::{1}\u7c7b\u578b\u4e0d\u652f\u6301\u8bbe\u7f6etakeoffEncodeChunk",0,o)+(this[o]?"":N("LG7e::(\u672a\u52a0\u8f7d\u7f16\u7801\u5668)"))),!t&&i&&(t=this[o+"_envCheck"](e,r))}return t||""},envStart:function(e,t){var r=this,n=r.set;if(r.isMock=e?1:0,r.mockEnvInfo=e,r.buffers=[],r.recSize=0,e&&(r._streamTag="env$"+e.envName),r.state=1,r.envInLast=0,r.envInFirst=0,r.envInFix=0,r.envInFixTs=[],r._setSrcSR(t),r.engineCtx=0,r[n.type+"_start"]){var a=r.engineCtx=r[n.type+"_start"](n);a&&(a.pcmDatas=[],a.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(e,t){var r=this,n=r.set,o=r.engineCtx;if(1==r.state){var i=r[f],s=e.length,c=a.PowerLevel(t,s),l=r.buffers,v=l.length;l.push(e);var p=l,h=v,g=Date.now(),d=Math.round(s/i*1e3);r.envInLast=g,1==r.buffers.length&&(r.envInFirst=g-d);var m=r.envInFixTs;m.splice(0,0,{t:g,d:d});for(var C=g,_=0,y=0;y<m.length;y++){var w=m[y];if(3e3<g-w.t){m.length=y;break}C=w.t,_+=w.d}var b=m[1],S=g-C;if(S/3<S-_&&(b&&1e3<S||6<=m.length)){var x=g-b.t-d;if(d/5<x){var k=!n.disableEnvInFix;if(r.CLog("["+g+"]"+E.get(N(k?"4Kfd::\u8865\u507f{1}ms":"bM5i::\u672a\u8865\u507f{1}ms",1),[x]),3),r.envInFix+=x,k){var M=new Int16Array(x*i/1e3);s+=M.length,l.push(M)}}}var I=r.recSize,L=s,T=I+L;if(r.recSize=T,o){var A=a.SampleData(l,i,n[u],o.chunkInfo);o.chunkInfo=A,T=(I=o.pcmSize)+(L=A.data.length),o.pcmSize=T,l=o.pcmDatas,v=l.length,l.push(A.data),i=A[u]}var R=Math.round(T/i*1e3),D=l.length,O=p.length,z=function(){for(var e=U?0:-L,t=null==l[0],a=v;a<D;a++){var i=l[a];null==i?t=1:(e+=i.length,o&&i.length&&r[n.type+"_encode"](o,i))}if(t&&o){a=h;for(p[0]&&(a=0);a<O;a++)p[a]=null}t&&(e=U?L:0,l[0]=null),o?o.pcmSize+=e:r.recSize+=e},U=0,F="rec.set.onProcess";try{U=n.onProcess(l,c,R,i,v,z)}catch(e){console.error(F+N("gFUF::\u56de\u8c03\u51fa\u9519\u662f\u4e0d\u5141\u8bb8\u7684\uff0c\u9700\u4fdd\u8bc1\u4e0d\u4f1a\u629b\u5f02\u5e38"),e)}var G=Date.now()-g;if(10<G&&1e3<r.envInFirst-g&&r.CLog(F+N("2ghS::\u4f4e\u6027\u80fd\uff0c\u8017\u65f6{1}ms",0,G),3),!0===U){var W=0;for(y=v;y<D;y++)null==l[y]?W=1:l[y]=new Int16Array(0);W?r.CLog(N("ufqH::\u672a\u8fdb\u5165\u5f02\u6b65\u524d\u4e0d\u80fd\u6e05\u9664buffers"),3):o?o.pcmSize-=L:r.recSize-=L}else z()}else r.state||r.CLog("envIn at state=0",3)},start:function(){var e=this,t=1;if(e.set.sourceStream?e.Stream||(t=0):a.IsOpen()||(t=0),t){var r=e._streamCtx();if(e.CLog(N("kLDN::start \u5f00\u59cb\u5f55\u97f3\uff0c")+C(r)+" stream:"+e._streamTag),e._stop(),e.envStart(null,r[u]),e.state=3,e._SO&&e._SO+1!=e._S)e.CLog(N("Bp2y::start\u88ab\u4e2d\u65ad"),3);else{e._SO=0;var n=function(){3==e.state&&(e.state=1,e.resume())},o="AudioContext resume: ";d(r,(function(t){return t&&e.CLog(o+"wait..."),3==e.state}),(function(t){t&&e.CLog(o+r.state),n()}),(function(t){e.CLog(o+r.state+N("upkE::\uff0c\u53ef\u80fd\u65e0\u6cd5\u5f55\u97f3\uff1a")+t,1),n()}))}}else e.CLog(N("6WmN::start\u5931\u8d25\uff1a\u672aopen"),1)},pause:function(){var e=this,t=e._streamStore().Stream;e.state&&(e.state=2,e.CLog("pause"),t&&delete t._call[e.id])},resume:function(){var e=this,t=e._streamStore().Stream,r="resume(wait ctx)";if(3==e.state)e.CLog(r);else if(e.state){e.state=1,e.CLog("resume"),e.envResume(),t&&(t._call[e.id]=function(t,r){1==e.state&&e.envIn(t,r)},b(t));var n=e._streamCtx();n&&d(n,(function(t){return t&&e.CLog(r+"..."),1==e.state}),(function(a){a&&e.CLog(r+n.state),b(t)}),(function(t){e.CLog(r+n.state+"[err]"+t,1)}))}},_stop:function(e){var t=this,r=t.set;t.isMock||t._S++,t.state&&(t.pause(),t.state=0),!e&&t[r.type+"_stop"]&&(t[r.type+"_stop"](t.engineCtx),t.engineCtx=0)},stop:function(e,t,r){var n,c=this,l=c.set,v=c.envInLast-c.envInFirst,p=v&&c.buffers.length;c.CLog(N("Xq4s::stop \u548cstart\u65f6\u5dee:")+(v?v+"ms "+N("3CQP::\u8865\u507f:")+c.envInFix+"ms envIn:"+p+" fps:"+(p/v*1e3).toFixed(1):"-")+" stream:"+c._streamTag+" ("+i+") LM:"+o);var h=function(){c._stop(),r&&c.close()},g=function(e){c.CLog(N("u8JG::\u7ed3\u675f\u5f55\u97f3\u5931\u8d25\uff1a")+e,1),t&&t(e),h()},d=function(t,r,o){var i="arraybuffer",f="dataType",u="DefaultDataType",v=c[f]||a[u]||"blob",p=f+"="+v,d=t instanceof ArrayBuffer,m=0,C=d?t.byteLength:t.size;if(v==i?d||(m=1):"blob"==v?"function"!=typeof Blob?m=N.G("NonBrowser-1",[p])+N("1skY::\uff0c\u8bf7\u8bbe\u7f6e{1}",0,s+"."+u+'="'+i+'"'):(d&&(t=new Blob([t],{type:r})),t instanceof Blob||(m=1),r=t.type||r):m=N.G("NotSupport-1",[p]),c.CLog(N("Wv7l::\u7ed3\u675f\u5f55\u97f3 \u7f16\u7801\u82b1{1}ms \u97f3\u9891\u65f6\u957f{2}ms \u6587\u4ef6\u5927\u5c0f{3}b",0,Date.now()-n,o,C)+" "+p+","+r),m)g(1!=m?m:N("Vkbd::{1}\u7f16\u7801\u5668\u8fd4\u56de\u7684\u4e0d\u662f{2}",0,l.type,v)+", "+p);else{if(l.takeoffEncodeChunk)c.CLog(N("QWnr::\u542f\u7528takeoffEncodeChunk\u540estop\u8fd4\u56de\u7684blob\u957f\u5ea6\u4e3a0\u4e0d\u63d0\u4f9b\u97f3\u9891\u6570\u636e"),3);else if(C<Math.max(50,o/5))return void g(N("Sz2H::\u751f\u6210\u7684{1}\u65e0\u6548",0,l.type));e&&e(t,o,r),h()}};if(!c.isMock){var m=3==c.state;if(!c.state||m)return void g(N("wf9t::\u672a\u5f00\u59cb\u5f55\u97f3")+(m?N("Dl2c::\uff0c\u5f00\u59cb\u5f55\u97f3\u524d\u65e0\u7528\u6237\u4ea4\u4e92\u5bfc\u81f4AudioContext\u672a\u8fd0\u884c"):""))}c._stop(!0);var C=c.recSize;if(C)if(c[l.type]){if(c.isMock){var _=c.envCheck(c.mockEnvInfo||{envName:"mock",canProcess:!1});if(_)return void g(N("AxOH::\u5f55\u97f3\u9519\u8bef\uff1a")+_)}var y=c.engineCtx;if(c[l.type+"_complete"]&&y){var w=Math.round(y.pcmSize/l[u]*1e3);return n=Date.now(),void c[l.type+"_complete"](y,(function(e,t){d(e,t,w)}),g)}if(n=Date.now(),c.buffers[0]){var b=a.SampleData(c.buffers,c[f],l[u]);l[u]=b[u];var S=b.data;w=Math.round(S.length/l[u]*1e3);c.CLog(N("CxeT::\u91c7\u6837:{1} \u82b1:{2}ms",0,C+"->"+S.length,Date.now()-n)),setTimeout((function(){n=Date.now(),c[l.type](S,(function(e,t){d(e,t,w)}),(function(e){g(e)}))}))}else g(N("xkKd::\u97f3\u9891buffers\u88ab\u91ca\u653e"))}else g(N("xGuI::\u672a\u52a0\u8f7d{1}\u7f16\u7801\u5668\uff0c\u8bf7\u5c1d\u8bd5\u5230{2}\u7684src/engine\u5185\u627e\u5230{1}\u7684\u7f16\u7801\u5668\u5e76\u52a0\u8f7d",0,l.type,s));else g(N("Ltz3::\u672a\u91c7\u96c6\u5230\u5f55\u97f3"))}};var R=function(e,t){t.pos||(t.pos=[0],t.tracks={},t.bytes=[]);var r=t.tracks,n=[t.pos[0]],a=function(){t.pos[0]=n[0]},o=t.bytes.length,i=new Uint8Array(o+e.length);if(i.set(t.bytes),i.set(e,o),t.bytes=i,!t._ht){if(z(i,n),U(i,n),!D(z(i,n),[24,83,128,103]))return;for(z(i,n);n[0]<i.length;){var s=z(i,n),c=U(i,n),f=[0],l=0;if(!c)return;if(D(s,[22,84,174,107])){for(;f[0]<c.length;){var v=z(c,f),p=U(c,f),h=[0],g={channels:0,sampleRate:0};if(D(v,[174]))for(;h[0]<p.length;){var d=z(p,h),m=U(p,h),C=[0];if(D(d,[215])){var _=O(m);g.number=_,r[_]=g}else if(D(d,[131])){1==(_=O(m))?g.type="video":2==_?(g.type="audio",l||(t.track0=g),g.idx=l++):g.type="Type-"+_}else if(D(d,[134])){for(var y="",w=0;w<m.length;w++)y+=String.fromCharCode(m[w]);g.codec=y}else if(D(d,[225]))for(;C[0]<m.length;){var b=z(m,C),S=U(m,C);if(D(b,[181])){_=0;var x=new Uint8Array(S.reverse()).buffer;4==S.length?_=new Float32Array(x)[0]:8==S.length?_=new Float64Array(x)[0]:I("WebM Track !Float",1,S),g[u]=Math.round(_)}else D(b,[98,100])?g.bitDepth=O(S):D(b,[159])&&(g.channels=O(S))}}}t._ht=1,I("WebM Tracks",r),a();break}}}var k=t.track0;if(k){if(16==k.bitDepth&&/FLOAT/i.test(k.codec)&&(k.bitDepth=32,I("WebM 16->32 bit",3)),k[u]!=t[u]||32!=k.bitDepth||k.channels<1||!/(\b|_)PCM\b/i.test(k.codec))return t.bytes=[],t.bad||I("WebM Track Unexpected",3,t),-(t.bad=1);for(var M=[],L=0;n[0]<i.length;){v=z(i,n);if(!(p=U(i,n)))break;if(D(v,[163])){var T=15&p[0];if(g=r[T]){if(0===g.idx){var A=new Uint8Array(p.length-4);for(w=4;w<p.length;w++)A[w-4]=p[w];M.push(A),L+=A.length}}else I("WebM !Track"+T,1,r)}a()}if(L){var R=new Uint8Array(i.length-t.pos[0]);R.set(i.subarray(t.pos[0])),t.bytes=R,t.pos[0]=0;A=new Uint8Array(L),w=0;for(var E=0;w<M.length;w++)A.set(M[w],E),E+=M[w].length;x=new Float32Array(A.buffer);if(1<k.channels){var N=[];for(w=0;w<x.length;)N.push(x[w]),w+=k.channels;x=new Float32Array(N)}return x}}},D=function(e,t){if(!e||e.length!=t.length)return!1;if(1==e.length)return e[0]==t[0];for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0},O=function(e){for(var t="",r=0;r<e.length;r++){var n=e[r];t+=(n<16?"0":"")+n.toString(16)}return parseInt(t,16)||0},z=function(e,t,r){var n=t[0];if(!(n>=e.length)){var a=("0000000"+e[n].toString(2)).substr(-8),o=/^(0*1)(\d*)$/.exec(a);if(o){var i=o[1].length,s=[];if(!(n+i>e.length)){for(var c=0;c<i;c++)s[c]=e[n],n++;return r&&(s[0]=parseInt(o[2]||"0",2)),t[0]=n,s}}}},U=function(e,t){var r=z(e,t,1);if(r){var n=O(r),a=t[0],o=[];if(n<2147483647){if(a+n>e.length)return;for(var i=0;i<n;i++)o[i]=e[a],a++}return t[0]=a,o}},E=a.i18n={lang:"zh-CN",alias:{"zh-CN":"zh","en-US":"en"},locales:{},data:{},put:function(e,t){var r=s+".i18n.put: ",n=e.overwrite;n=null==n||n;var a=e.lang;if(!(a=E.alias[a]||a))throw new Error(r+"set.lang?");var o=E.locales[a];o||(o={},E.locales[a]=o);for(var i,c=/^([\w\-]+):/,f=0;f<t.length;f++){var u=t[f];if(i=c.exec(u)){var l=i[1];u=u.substr(l.length+1);!n&&o[l]||(o[l]=u)}else I(r+"'key:'? "+u,3,e)}},get:function(){return E.v_G.apply(null,arguments)},v_G:function(e,t,r){t=t||[],r=r||E.lang,r=E.alias[r]||r;var n=E.locales[r],a=n&&n[e]||"";return a||"zh"==r?(E.lastLang=r,"=Empty"==a?"":a.replace(/\{(\d+)(\!?)\}/g,(function(r,n,o){return r=t[(n=+n||0)-1],(n<1||n>t.length)&&(r="{?}",I("i18n["+e+"] no {"+n+"}: "+a,3)),o?"":r}))):"en"==r?E.v_G(e,t,"zh"):E.v_G(e,t,"en")},$T:function(){return E.v_T.apply(null,arguments)},v_T:function(){for(var e,t=arguments,r="",a=[],o=0,i=s+".i18n.$T:",c=/^([\w\-]*):/,f=0;f<t.length;f++){var u=t[f];if(0==f){if(!(r=(e=c.exec(u))&&e[1]))throw new Error(i+"0 'key:'?");u=u.substr(r.length+1)}if(-1===o)a.push(u);else{if(o)throw new Error(i+" bad args");if(0===u)o=-1;else if(n(u)){if(u<1)throw new Error(i+" bad args");o=u}else{var l=1==f?"en":f?"":"zh";if((e=c.exec(u))&&(l=e[1]||l,u=u.substr(e[1].length+1)),!e||!l)throw new Error(i+f+" 'lang:'?");E.put({lang:l,overwrite:!1},[r+":"+u])}}}return r?0<o?r:E.v_G(r,a):""}},N=E.$T;N.G=E.get,N("NonBrowser-1::\u975e\u6d4f\u89c8\u5668\u73af\u5883\uff0c\u4e0d\u652f\u6301{1}",1),N("IllegalArgs-1::\u53c2\u6570\u9519\u8bef\uff1a{1}",1),N("NeedImport-2::\u8c03\u7528{1}\u9700\u8981\u5148\u5bfc\u5165{2}",2),N("NotSupport-1::\u4e0d\u652f\u6301\uff1a{1}",1),a.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var F=a.Traffic=function(e){if(t){e=e?"/"+s+"/Report/"+e:"";var r=a.TrafficImgUrl;if(r){var n=a.Traffic,o=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],i=o[1]||"http://file/",c=(o[0]||i)+e;if(0==r.indexOf("//")&&(r=/^https:/i.test(c)?"https:"+r:"http:"+r),e&&(r=r+"&cu="+encodeURIComponent(i+e)),!n[c])n[c]=1,(new Image).src=r,I("Traffic Analysis Image: "+(e||s+".TrafficImgUrl="+a.TrafficImgUrl))}}};p&&(I(N("8HO5::\u8986\u76d6\u5bfc\u5165{1}",0,s),1),p.Destroy()),e[s]=a}(o,a),void 0!==(n=function(){return o.Recorder}.call(t,r,t,e))&&(e.exports=n),e.exports&&(e.exports=o.Recorder)}(),function(){var e=("object"==typeof window&&!!window.document?window:Object).Recorder;!function(e,t,r){"use strict";e.prototype.enc_wav={stable:!0,fast:!0,getTestMsg:function(){return r("gPSE::\u652f\u6301\u4f4d\u65708\u4f4d\u300116\u4f4d\uff08\u586b\u5728\u6bd4\u7279\u7387\u91cc\u9762\uff09\uff0c\u91c7\u6837\u7387\u53d6\u503c\u65e0\u9650\u5236\uff1b\u6b64\u7f16\u7801\u5668\u4ec5\u5728pcm\u6570\u636e\u524d\u52a0\u4e86\u4e00\u4e2a44\u5b57\u8282\u7684wav\u5934\uff0c\u7f16\u7801\u51fa\u6765\u768416\u4f4dwav\u6587\u4ef6\u53bb\u6389\u5f00\u5934\u768444\u5b57\u8282\u5373\u53ef\u5f97\u5230pcm\uff08\u6ce8\uff1a\u5176\u4ed6wav\u7f16\u7801\u5668\u53ef\u80fd\u4e0d\u662f44\u5b57\u8282\uff09")}},e.prototype.wav=function(t,n,a){var o=this.set;!function(t){var n=t.bitRate,a=8==n?8:16;n!=a&&e.CLog(r("wyw9::WAV Info: \u4e0d\u652f\u6301{1}\u4f4d\uff0c\u5df2\u66f4\u65b0\u6210{2}\u4f4d",0,n,a),3),t.bitRate=a}(o);var i=t.length,s=o.sampleRate,c=o.bitRate,f=i*(c/8),u=e.wav_header(1,1,s,c,f),l=u.length,v=new Uint8Array(l+f);if(v.set(u),8==c)for(var p=0;p<i;p++){var h=128+(t[p]>>8);v[l++]=h}else(v=new Int16Array(v.buffer)).set(t,l/2);n(v.buffer,"audio/wav")},e.wav_header=function(e,t,r,n,a){var o=1==e?0:2,i=new ArrayBuffer(44+o),s=new DataView(i),c=0,f=function(e){for(var t=0;t<e.length;t++,c++)s.setUint8(c,e.charCodeAt(t))},u=function(e){s.setUint16(c,e,!0),c+=2},l=function(e){s.setUint32(c,e,!0),c+=4};return f("RIFF"),l(36+o+a),f("WAVE"),f("fmt "),l(16+o),u(e),u(t),l(r),l(r*(t*n/8)),u(t*n/8),u(n),1!=e&&u(0),f("data"),l(a),new Uint8Array(i)}}(e,0,e.i18n.$T)}()},195:(e,t,r)=>{var n;!function(){var a="object"==typeof window&&!!window.document,o=a?window:Object;!function(e,t){"use strict";var r=function(){},n=function(e){return"number"==typeof e},a=function(e){return new A(e)},o=a.LM="2024-04-09 19:15",i="https://github.com/xiangyuecn/Recorder",s="Recorder",c="getUserMedia",f="srcSampleRate",u="sampleRate",l="bitRate",v="catch",p=e[s];if(p&&p.LM==o)return void p.CLog(p.i18n.$T("K8zP::\u91cd\u590d\u5bfc\u5165{1}",0,s),3);a.IsOpen=function(){var e=a.Stream;if(e){var t=(e.getTracks&&e.getTracks()||e.audioTracks||[])[0];if(t){var r=t.readyState;return"live"==r||r==t.LIVE}}return!1},a.BufferSize=4096,a.Destroy=function(){for(var e in I(s+" Destroy"),k(),h)h[e]()};var h={};a.BindDestroy=function(e,t){h[e]=t},a.Support=function(){if(!t)return!1;var e=navigator.mediaDevices||{};return e[c]||(e=navigator)[c]||(e[c]=e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia),!!e[c]&&(a.Scope=e,!!a.GetContext())},a.GetContext=function(e){if(!t)return null;var r=window.AudioContext;if(r||(r=window.webkitAudioContext),!r)return null;var n=a.Ctx;if(n&&"closed"!=n.state||(n=a.Ctx=new r,a.NewCtxs=a.NewCtxs||[],a.BindDestroy("Ctx",(function(){var e=a.Ctx;e&&e.close&&(g(e),a.Ctx=0);var t=a.NewCtxs;a.NewCtxs=[];for(var r=0;r<t.length;r++)g(t[r])}))),e&&n.close)try{n=new r,a.NewCtxs.push(n)}catch(o){I("GetContext tryNew Error",1,o)}return n},a.CloseNewCtx=function(e){if(e&&e!=a.Ctx){g(e);for(var t=a.NewCtxs||[],r=t.length,n=0;n<t.length;n++)if(t[n]==e){t.splice(n,1);break}I(N("mSxV::\u5269{1}\u4e2aGetContext\u672aclose",0,r+"-1="+t.length),t.length?3:0)}};var g=function(e){if(e&&e.close){e._isC=1;try{e.close()}catch(t){I("ctx close err",1,t)}}},d=a.ResumeCtx=function(e,t,r,n){var a=0,o=0,i=0,s=0,c="EventListener",f="ResumeCtx ",u=function(t,f){o&&l(),a||(a=1,t&&n(t,s),f&&r(s)),f&&(!e._LsSC&&e["add"+c]&&e["add"+c]("statechange",p),e._LsSC=1,i=1)},l=function(e){if(!e||!o){o=e?1:0;for(var t=["focus","mousedown","mouseup","touchstart","touchend"],r=0;r<t.length;r++)window[(e?"add":"remove")+c](t[r],p,!0)}},p=function(){var r=e.state,n=m(r);if(!a&&!t(n?++s:s))return u();n?(i&&I(f+"sc "+r,3),l(1),e.resume().then((function(){i&&I(f+"sc "+e.state),u(0,1)}))[v]((function(t){I(f+"error",1,t),m(e.state)||u(t.message||"error")}))):"closed"==r?(i&&!e._isC&&I(f+"sc "+r,1),u("ctx closed")):u(0,1)};p()},m=a.CtxSpEnd=function(e){return"suspended"==e||"interrupted"==e},C=function(e){var t=e.state,r="ctx.state="+t;return m(t)&&(r+=N("nMIy::\uff08\u6ce8\u610f\uff1actx\u4e0d\u662frunning\u72b6\u6001\uff0crec.open\u548cstart\u81f3\u5c11\u8981\u6709\u4e00\u4e2a\u5728\u7528\u6237\u64cd\u4f5c(\u89e6\u6478\u3001\u70b9\u51fb\u7b49)\u65f6\u8fdb\u884c\u8c03\u7528\uff0c\u5426\u5219\u5c06\u5728rec.start\u65f6\u5c1d\u8bd5\u8fdb\u884cctx.resume\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u517c\u5bb9\u6027\u95ee\u9898(\u4ec5iOS)\uff0c\u8bf7\u53c2\u9605\u6587\u6863\u4e2drunningContext\u914d\u7f6e\uff09")),r},_="ConnectEnableWebM";a[_]=!0;var y="ConnectEnableWorklet";a[y]=!1;var w=function(e,t){var r=e.BufferSize||a.BufferSize,n=e.Stream,o=n._RC||n._c||a.GetContext(!0);n._c=o;var i,c,f,l=function(e){var t=n._m=o.createMediaStreamSource(n),r=o.destination,a="createMediaStreamDestination";o[a]&&(r=n._d=o[a]()),t.connect(e),e.connect(r)},p="",h=n._call,g=function(e){for(var t in h){for(var r=e.length,n=new Int16Array(r),a=0,o=0;o<r;o++){var i=Math.max(-1,Math.min(1,e[o]));i=i<0?32768*i:32767*i,n[o]=i,a+=Math.abs(i)}for(var s in h)h[s](n,a);return}},m="ScriptProcessor",C="audioWorklet",w=s+" "+C,b="RecProc",k="MediaRecorder",M=k+".WebM.PCM",L=o.createScriptProcessor||o.createJavaScriptNode,T=N("ZGlf::\u3002\u7531\u4e8e{1}\u5185\u90e81\u79d2375\u6b21\u56de\u8c03\uff0c\u5728\u79fb\u52a8\u7aef\u53ef\u80fd\u4f1a\u6709\u6027\u80fd\u95ee\u9898\u5bfc\u81f4\u56de\u8c03\u4e22\u5931\u5f55\u97f3\u53d8\u77ed\uff0cPC\u7aef\u65e0\u5f71\u54cd\uff0c\u6682\u4e0d\u5efa\u8bae\u5f00\u542f{1}\u3002",0,C),A=function(){c=n.isWorklet=!1,S(n),I(N("7TU0::Connect\u91c7\u7528\u8001\u7684{1}\uff0c",0,m)+E.get(a[y]?N("JwCL::\u4f46\u5df2\u8bbe\u7f6e{1}\u5c1d\u8bd5\u542f\u7528{2}",2):N("VGjB::\u53ef\u8bbe\u7f6e{1}\u5c1d\u8bd5\u542f\u7528{2}",2),[s+"."+y+"=true",C])+p+T,3);var e=n._p=L.call(o,r,1,1);l(e),e.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);g(t)}},D=function(){i=n.isWebM=!1,x(n),c=n.isWorklet=!L||a[y];var e=window.AudioWorkletNode;if(c&&o[C]&&e){var t=function(){var e=function(e){return e.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,w)},t="class "+b+" extends AudioWorkletProcessor{";return t+="constructor "+e((function(e){DEL_super(e);var t=this,r=e.processorOptions.bufferSize;t.bufferSize=r,t.buffer=new Float32Array(2*r),t.pos=0,t.port.onmessage=function(e){e.data.kill&&(t.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",e)})),t+="process "+e((function(e,t,r){var n=this,a=n.bufferSize,o=n.buffer,i=n.pos;if((e=(e[0]||[])[0]||[]).length){o.set(e,i);var s=~~((i+=e.length)/a)*a;if(s){this.port.postMessage({val:o.slice(0,s)});var c=o.subarray(s,i);(o=new Float32Array(2*a)).set(c),i=c.length,n.buffer=o}n.pos=i}return!n.kill})),t=(t+='}try{registerProcessor("'+b+'", '+b+')}catch(e){$C.error("'+w+' Reg Error",e)}').replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(t)))},u=function(){return c&&n._na},h=n._na=function(){""!==f&&(clearTimeout(f),f=setTimeout((function(){f=0,u()&&(I(N("MxX1::{1}\u672a\u8fd4\u56de\u4efb\u4f55\u97f3\u9891\uff0c\u6062\u590d\u4f7f\u7528{2}",0,C,m),3),L&&A())}),500))},_=function(){if(u()){var t=n._n=new e(o,b,{processorOptions:{bufferSize:r}});l(t),t.port.onmessage=function(e){f&&(clearTimeout(f),f=""),u()?g(e.data.val):c||I(N("XUap::{1}\u591a\u4f59\u56de\u8c03",0,C),3)},I(N("yOta::Connect\u91c7\u7528{1}\uff0c\u8bbe\u7f6e{2}\u53ef\u6062\u590d\u8001\u5f0f{3}",0,C,s+"."+y+"=false",m)+p+T,3)}},S=function(){if(u())if(o[b])_();else{var e=t();o[C].addModule(e).then((function(e){u()&&(o[b]=1,_(),f&&h())}))[v]((function(e){I(C+".addModule Error",1,e),u()&&A()}))}};d(o,(function(){return u()}),S,S)}else A()};(function(){var e=window[k],c="ondataavailable",l="audio/webm; codecs=pcm";i=n.isWebM=a[_];var v=e&&c in e.prototype&&e.isTypeSupported(l);if(p=v?"":N("VwPd::\uff08\u6b64\u6d4f\u89c8\u5668\u4e0d\u652f\u6301{1}\uff09",0,M),t&&i&&v){var h=function(){return i&&n._ra},d=(n._ra=function(){""!==f&&(clearTimeout(f),f=setTimeout((function(){h()&&(I(N("vHnb::{1}\u672a\u8fd4\u56de\u4efb\u4f55\u97f3\u9891\uff0c\u964d\u7ea7\u4f7f\u7528{2}",0,k,C),3),D())}),500))},Object.assign({mimeType:l},a.ConnectWebMOptions)),y=n._r=new e(n,d),w=n._rd={sampleRate:o[u]};y[c]=function(e){var t=new FileReader;t.onloadend=function(){if(h()){var e=R(new Uint8Array(t.result),w);if(!e)return;if(-1==e)return void D();f&&(clearTimeout(f),f=""),g(e)}else i||I(N("O9P7::{1}\u591a\u4f59\u56de\u8c03",0,k),3)},t.readAsArrayBuffer(e.data)},y.start(~~(r/48)),I(N("LMEm::Connect\u91c7\u7528{1}\uff0c\u8bbe\u7f6e{2}\u53ef\u6062\u590d\u4f7f\u7528{3}\u6216\u8001\u5f0f{4}",0,M,s+"."+_+"=false",C,m))}else D()})()},b=function(e){e._na&&e._na(),e._ra&&e._ra()},S=function(e){e._na=null,e._n&&(e._n.port.postMessage({kill:!0}),e._n.disconnect(),e._n=null)},x=function(e){if(e._ra=null,e._r){try{e._r.stop()}catch(t){I("mr stop err",1,t)}e._r=null}},k=function(e){var t=(e=e||a)==a,r=e.Stream;r&&(r._m&&(r._m.disconnect(),r._m=null),!r._RC&&r._c&&a.CloseNewCtx(r._c),r._RC=null,r._c=null,r._d&&(M(r._d.stream),r._d=null),r._p&&(r._p.disconnect(),r._p.onaudioprocess=r._p=null),S(r),x(r),t&&M(r)),e.Stream=0},M=a.StopS_=function(e){for(var t=e.getTracks&&e.getTracks()||e.audioTracks||[],r=0;r<t.length;r++){var n=t[r];n.stop&&n.stop()}e.stop&&e.stop()};a.SampleData=function(e,t,r,n,o){var i="SampleData";n||(n={});var s=n.index||0,c=n.offset||0,f=n.filter;if(f&&f.fn&&f.sr!=t&&(f=null,I(N("d48C::{1}\u7684filter\u91c7\u6837\u7387\u53d8\u4e86\uff0c\u91cd\u8bbe\u6ee4\u6ce2",0,i),3)),!f){var u=r>3*t/4?0:r/2*3/4;f={fn:u?a.IIRFilter(!0,t,u):0}}f.sr=t;var l=f.fn,v=n.frameNext||[];o||(o={});var p=o.frameSize||1;o.frameType&&(p="mp3"==o.frameType?1152:1);var h=e.length;s>h+1&&I(N("tlbC::{1}\u4f3c\u4e4e\u4f20\u5165\u4e86\u672a\u91cd\u7f6echunk {2}",0,i,s+">"+h),3);for(var g=0,d=s;d<h;d++)g+=e[d].length;g=Math.max(0,g-Math.floor(c));var m=t/r;m>1?g=Math.floor(g/m):(m=1,r=t),g+=v.length;var C=new Int16Array(g),_=0;for(d=0;d<v.length;d++)C[_]=v[d],_++;for(;s<h;s++){for(var y=e[s],w=(d=c,y.length),b=l&&l.Embed,S=0,x=0,k=0,M=0,L=0,T=0;L<w;L++,T++)if(T<w&&(b?(k=y[T],M=b.b0*k+b.b1*b.x1+b.b0*b.x2-b.a1*b.y1-b.a2*b.y2,b.x2=b.x1,b.x1=k,b.y2=b.y1,b.y1=M):M=l?l(y[T]):y[T]),S=x,x=M,0!=T){var A=Math.floor(d);if(L==A){var R=S+((Math.ceil(d)<w?x:S)-S)*(d-A);R>32767?R=32767:R<-32768&&(R=-32768),C[_]=R,_++,d+=m}}else L--;c=Math.max(0,d-w)}v=null;var D=C.length%p;if(D>0){var O=2*(C.length-D);v=new Int16Array(C.buffer.slice(O)),C=new Int16Array(C.buffer.slice(0,O))}return{index:s,offset:c,filter:f,frameNext:v,sampleRate:r,data:C}},a.IIRFilter=function(e,t,r){var n=2*Math.PI*r/t,a=Math.sin(n),o=Math.cos(n),i=a/2,s=1+i,c=-2*o/s,f=(1-i)/s;if(e)var u=(1-o)/2/s,l=(1-o)/s;else u=(1+o)/2/s,l=-(1+o)/s;var v=0,p=0,h=0,g=0,d=0,m=function(e){return h=u*e+l*v+u*p-c*g-f*d,p=v,v=e,d=g,g=h,h};return m.Embed={x1:0,x2:0,y1:0,y2:0,b0:u,b1:l,a1:c,a2:f},m},a.PowerLevel=function(e,t){var r=e/t||0;return r<1251?Math.round(r/1250*10):Math.round(Math.min(100,Math.max(0,100*(1+Math.log(r/1e4)/Math.log(10)))))},a.PowerDBFS=function(e){var t=Math.max(.1,e||0),r=32767;return t=Math.min(t,r),t=20*Math.log(t/r)/Math.log(10),Math.max(-100,Math.round(t))},a.CLog=function(e,t){if("object"==typeof console){var r=new Date,o=("0"+r.getMinutes()).substr(-2)+":"+("0"+r.getSeconds()).substr(-2)+"."+("00"+r.getMilliseconds()).substr(-3),i=this&&this.envIn&&this.envCheck&&this.id,c=["["+o+" "+s+(i?":"+i:"")+"]"+e],f=arguments,u=a.CLog,l=2,v=u.log||console.log;for(n(t)?v=1==t?u.error||console.error:3==t?u.warn||console.warn:v:l=1;l<f.length;l++)c.push(f[l]);L?v&&v("[IsLoser]"+c[0],c.length>1?c:""):v.apply(console,c)}};var I=function(){a.CLog.apply(this,arguments)},L=!0;try{L=!console.log.apply}catch(G){}var T=0;function A(e){var t=this;t.id=++T,F();var a={type:"mp3",onProcess:r};for(var o in e)a[o]=e[o];t.set=a;var i=a[l],s=a[u];(i&&!n(i)||s&&!n(s))&&t.CLog(N.G("IllegalArgs-1",[N("VtS4::{1}\u548c{2}\u5fc5\u987b\u662f\u6570\u503c",0,u,l)]),1,e),a[l]=+i||16,a[u]=+s||16e3,t.state=0,t._S=9,t.Sync={O:9,C:9}}a.Sync={O:9,C:9},a.prototype=A.prototype={CLog:I,_streamStore:function(){return this.set.sourceStream?this:a},_streamCtx:function(){var e=this._streamStore().Stream;return e&&e._c},open:function(e,n){var s=this,f=s.set,l=s._streamStore(),p=0;e=e||r;var h=function(e,t){t=!!t,s.CLog(N("5tWi::\u5f55\u97f3open\u5931\u8d25\uff1a")+e+",isUserNotAllow:"+t,1),p&&a.CloseNewCtx(p),n&&n(e,t)};s._streamTag=c;var g=function(){s.CLog("open ok, id:"+s.id+" stream:"+s._streamTag),e(),s._SO=0},d=l.Sync,m=++d.O,_=d.C;s._O=s._O_=m,s._SO=s._S;var y=function(){if(_!=d.C||!s._O){var e=N("dFm8::open\u88ab\u53d6\u6d88");return m==d.O?s.close():e=N("VtJO::open\u88ab\u4e2d\u65ad"),h(e),!0}};if(t){var b=s.envCheck({envName:"H5",canProcess:!0});if(b)h(N("A5bm::\u4e0d\u80fd\u5f55\u97f3\uff1a")+b);else if(f.sourceStream){if(s._streamTag="set.sourceStream",!a.GetContext())return void h(N("1iU7::\u4e0d\u652f\u6301\u6b64\u6d4f\u89c8\u5668\u4ece\u6d41\u4e2d\u83b7\u53d6\u5f55\u97f3"));k(l);var S=s.Stream=f.sourceStream;S._RC=f.runningContext,S._call={};try{w(l)}catch(G){return k(l),void h(N("BTW2::\u4ece\u6d41\u4e2d\u6253\u5f00\u5f55\u97f3\u5931\u8d25\uff1a")+G.message)}g()}else{var x=function(e,t){try{window.top.a}catch(G){return void h(N("Nclz::\u65e0\u6743\u5f55\u97f3(\u8de8\u57df\uff0c\u8bf7\u5c1d\u8bd5\u7ed9iframe\u6dfb\u52a0\u9ea6\u514b\u98ce\u8bbf\u95ee\u7b56\u7565\uff0c\u5982{1})",0,'allow="camera;microphone"'))}/Permission|Allow/i.test(e)?h(N("gyO5::\u7528\u6237\u62d2\u7edd\u4e86\u5f55\u97f3\u6743\u9650"),!0):!1===window.isSecureContext?h(N("oWNo::\u6d4f\u89c8\u5668\u7981\u6b62\u4e0d\u5b89\u5168\u9875\u9762\u5f55\u97f3\uff0c\u53ef\u5f00\u542fhttps\u89e3\u51b3")):/Found/i.test(e)?h(t+N("jBa9::\uff0c\u65e0\u53ef\u7528\u9ea6\u514b\u98ce")):h(t)};if(a.IsOpen())g();else if(a.Support()){var M=f.runningContext;M||(M=p=a.GetContext(!0));var I=function(e){setTimeout((function(){e._call={};var t=a.Stream;t&&(k(),e._call=t._call),a.Stream=e,e._c=M,e._RC=f.runningContext,y()||(a.IsOpen()?(t&&s.CLog(N("upb8::\u53d1\u73b0\u540c\u65f6\u591a\u6b21\u8c03\u7528open"),1),w(l,1),g()):h(N("Q1GA::\u5f55\u97f3\u529f\u80fd\u65e0\u6548\uff1a\u65e0\u97f3\u9891\u6d41")))}),100)},L=function(e){var t=e.name||e.message||e.code+":"+e;s.CLog(N("xEQR::\u8bf7\u6c42\u5f55\u97f3\u6743\u9650\u9519\u8bef"),1,e),x(t,N("bDOG::\u65e0\u6cd5\u5f55\u97f3\uff1a")+t)},T=f.audioTrackSet||{};T[u]=M[u];var A={audio:T};try{var R=a.Scope[c](A,I,L)}catch(G){s.CLog(c,3,G),A={audio:!0},R=a.Scope[c](A,I,L)}s.CLog(c+"("+JSON.stringify(A)+") "+C(M)+N("RiWe::\uff0c\u672a\u914d\u7f6enoiseSuppression\u548cechoCancellation\u65f6\u6d4f\u89c8\u5668\u53ef\u80fd\u4f1a\u81ea\u52a8\u6253\u5f00\u964d\u566a\u548c\u56de\u58f0\u6d88\u9664\uff0c\u79fb\u52a8\u7aef\u53ef\u80fd\u4f1a\u964d\u4f4e\u7cfb\u7edf\u64ad\u653e\u97f3\u91cf\uff08\u5173\u95ed\u5f55\u97f3\u540e\u53ef\u6062\u590d\uff09\uff0c\u8bf7\u53c2\u9605\u6587\u6863\u4e2daudioTrackSet\u914d\u7f6e")+"("+i+") LM:"+o+" UA:"+navigator.userAgent),R&&R.then&&R.then(I)[v](L)}else x("",N("COxc::\u6b64\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u5f55\u97f3"))}}else h(N.G("NonBrowser-1",["open"])+N("EMJq::\uff0c\u53ef\u5c1d\u8bd5\u4f7f\u7528RecordApp\u89e3\u51b3\u65b9\u6848")+"("+i+"/tree/master/app-support-sample)")},close:function(e){e=e||r;var t=this,n=t._streamStore();t._stop();var a=" stream:"+t._streamTag,o=n.Sync;if(t._O=0,t._O_!=o.O)return t.CLog(N("hWVz::close\u88ab\u5ffd\u7565\uff08\u56e0\u4e3a\u540c\u65f6open\u4e86\u591a\u4e2arec\uff0c\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u4f1a\u771f\u6b63close\uff09")+a,3),void e();o.C++,k(n),t.CLog("close,"+a),e()},mock:function(e,t){var r=this;return r._stop(),r.isMock=1,r.mockEnvInfo=null,r.buffers=[e],r.recSize=e.length,r._setSrcSR(t),r._streamTag="mock",r},_setSrcSR:function(e){var t=this,r=t.set,n=r[u];n>e?r[u]=e:n=0,t[f]=e,t.CLog(f+": "+e+" set."+u+": "+r[u]+(n?" "+N("UHvm::\u5ffd\u7565")+": "+n:""),n?3:0)},envCheck:function(e){var t,r=this,n=r.set,o="CPU_BE";if(t||a[o]||"function"!=typeof Int8Array||new Int8Array(new Int32Array([1]).buffer)[0]||(F(o),t=N("Essp::\u4e0d\u652f\u6301{1}\u67b6\u6784",0,o)),!t){var i=n.type,s=r[i+"_envCheck"];n.takeoffEncodeChunk&&(s?e.canProcess||(t=N("7uMV::{1}\u73af\u5883\u4e0d\u652f\u6301\u5b9e\u65f6\u5904\u7406",0,e.envName)):t=N("2XBl::{1}\u7c7b\u578b\u4e0d\u652f\u6301\u8bbe\u7f6etakeoffEncodeChunk",0,i)+(r[i]?"":N("LG7e::(\u672a\u52a0\u8f7d\u7f16\u7801\u5668)"))),!t&&s&&(t=r[i+"_envCheck"](e,n))}return t||""},envStart:function(e,t){var r=this,n=r.set;if(r.isMock=e?1:0,r.mockEnvInfo=e,r.buffers=[],r.recSize=0,e&&(r._streamTag="env$"+e.envName),r.state=1,r.envInLast=0,r.envInFirst=0,r.envInFix=0,r.envInFixTs=[],r._setSrcSR(t),r.engineCtx=0,r[n.type+"_start"]){var a=r.engineCtx=r[n.type+"_start"](n);a&&(a.pcmDatas=[],a.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(e,t){var r=this,n=r.set,o=r.engineCtx;if(1==r.state){var i=r[f],s=e.length,c=a.PowerLevel(t,s),l=r.buffers,v=l.length;l.push(e);var p=l,h=v,g=Date.now(),d=Math.round(s/i*1e3);r.envInLast=g,1==r.buffers.length&&(r.envInFirst=g-d);var m=r.envInFixTs;m.splice(0,0,{t:g,d:d});for(var C=g,_=0,y=0;y<m.length;y++){var w=m[y];if(g-w.t>3e3){m.length=y;break}C=w.t,_+=w.d}var b=m[1],S=g-C;if(S-_>S/3&&(b&&S>1e3||m.length>=6)){var x=g-b.t-d;if(x>d/5){var k=!n.disableEnvInFix;if(r.CLog("["+g+"]"+E.get(N(k?"4Kfd::\u8865\u507f{1}ms":"bM5i::\u672a\u8865\u507f{1}ms",1),[x]),3),r.envInFix+=x,k){var M=new Int16Array(x*i/1e3);s+=M.length,l.push(M)}}}var I=r.recSize,L=s,T=I+L;if(r.recSize=T,o){var A=a.SampleData(l,i,n[u],o.chunkInfo);o.chunkInfo=A,T=(I=o.pcmSize)+(L=A.data.length),o.pcmSize=T,l=o.pcmDatas,v=l.length,l.push(A.data),i=A[u]}var R=Math.round(T/i*1e3),D=l.length,O=p.length,z=function(){for(var e=U?0:-L,t=null==l[0],a=v;a<D;a++){var i=l[a];null==i?t=1:(e+=i.length,o&&i.length&&r[n.type+"_encode"](o,i))}if(t&&o){a=h;for(p[0]&&(a=0);a<O;a++)p[a]=null}t&&(e=U?L:0,l[0]=null),o?o.pcmSize+=e:r.recSize+=e},U=0,F="rec.set.onProcess";try{U=n.onProcess(l,c,R,i,v,z)}catch(G){console.error(F+N("gFUF::\u56de\u8c03\u51fa\u9519\u662f\u4e0d\u5141\u8bb8\u7684\uff0c\u9700\u4fdd\u8bc1\u4e0d\u4f1a\u629b\u5f02\u5e38"),G)}var W=Date.now()-g;if(W>10&&r.envInFirst-g>1e3&&r.CLog(F+N("2ghS::\u4f4e\u6027\u80fd\uff0c\u8017\u65f6{1}ms",0,W),3),!0===U){var P=0;for(y=v;y<D;y++)null==l[y]?P=1:l[y]=new Int16Array(0);P?r.CLog(N("ufqH::\u672a\u8fdb\u5165\u5f02\u6b65\u524d\u4e0d\u80fd\u6e05\u9664buffers"),3):o?o.pcmSize-=L:r.recSize-=L}else z()}else r.state||r.CLog("envIn at state=0",3)},start:function(){var e=this,t=1;if(e.set.sourceStream?e.Stream||(t=0):a.IsOpen()||(t=0),t){var r=e._streamCtx();if(e.CLog(N("kLDN::start \u5f00\u59cb\u5f55\u97f3\uff0c")+C(r)+" stream:"+e._streamTag),e._stop(),e.envStart(null,r[u]),e.state=3,e._SO&&e._SO+1!=e._S)e.CLog(N("Bp2y::start\u88ab\u4e2d\u65ad"),3);else{e._SO=0;var n=function(){3==e.state&&(e.state=1,e.resume())},o="AudioContext resume: ";d(r,(function(t){return t&&e.CLog(o+"wait..."),3==e.state}),(function(t){t&&e.CLog(o+r.state),n()}),(function(t){e.CLog(o+r.state+N("upkE::\uff0c\u53ef\u80fd\u65e0\u6cd5\u5f55\u97f3\uff1a")+t,1),n()}))}}else e.CLog(N("6WmN::start\u5931\u8d25\uff1a\u672aopen"),1)},pause:function(){var e=this,t=e._streamStore().Stream;e.state&&(e.state=2,e.CLog("pause"),t&&delete t._call[e.id])},resume:function(){var e=this,t=e._streamStore().Stream,r="resume",n=r+"(wait ctx)";if(3==e.state)e.CLog(n);else if(e.state){e.state=1,e.CLog(r),e.envResume(),t&&(t._call[e.id]=function(t,r){1==e.state&&e.envIn(t,r)},b(t));var a=e._streamCtx();a&&d(a,(function(t){return t&&e.CLog(n+"..."),1==e.state}),(function(r){r&&e.CLog(n+a.state),b(t)}),(function(t){e.CLog(n+a.state+"[err]"+t,1)}))}},_stop:function(e){var t=this,r=t.set;t.isMock||t._S++,t.state&&(t.pause(),t.state=0),!e&&t[r.type+"_stop"]&&(t[r.type+"_stop"](t.engineCtx),t.engineCtx=0)},stop:function(e,t,r){var n,c=this,l=c.set,v=c.envInLast-c.envInFirst,p=v&&c.buffers.length;c.CLog(N("Xq4s::stop \u548cstart\u65f6\u5dee:")+(v?v+"ms "+N("3CQP::\u8865\u507f:")+c.envInFix+"ms envIn:"+p+" fps:"+(p/v*1e3).toFixed(1):"-")+" stream:"+c._streamTag+" ("+i+") LM:"+o);var h=function(){c._stop(),r&&c.close()},g=function(e){c.CLog(N("u8JG::\u7ed3\u675f\u5f55\u97f3\u5931\u8d25\uff1a")+e,1),t&&t(e),h()},d=function(t,r,o){var i="blob",f="arraybuffer",u="dataType",v="DefaultDataType",p=c[u]||a[v]||i,d=u+"="+p,m=t instanceof ArrayBuffer,C=0,_=m?t.byteLength:t.size;if(p==f?m||(C=1):p==i?"function"!=typeof Blob?C=N.G("NonBrowser-1",[d])+N("1skY::\uff0c\u8bf7\u8bbe\u7f6e{1}",0,s+"."+v+'="'+f+'"'):(m&&(t=new Blob([t],{type:r})),t instanceof Blob||(C=1),r=t.type||r):C=N.G("NotSupport-1",[d]),c.CLog(N("Wv7l::\u7ed3\u675f\u5f55\u97f3 \u7f16\u7801\u82b1{1}ms \u97f3\u9891\u65f6\u957f{2}ms \u6587\u4ef6\u5927\u5c0f{3}b",0,Date.now()-n,o,_)+" "+d+","+r),C)g(1!=C?C:N("Vkbd::{1}\u7f16\u7801\u5668\u8fd4\u56de\u7684\u4e0d\u662f{2}",0,l.type,p)+", "+d);else{if(l.takeoffEncodeChunk)c.CLog(N("QWnr::\u542f\u7528takeoffEncodeChunk\u540estop\u8fd4\u56de\u7684blob\u957f\u5ea6\u4e3a0\u4e0d\u63d0\u4f9b\u97f3\u9891\u6570\u636e"),3);else if(_<Math.max(50,o/5))return void g(N("Sz2H::\u751f\u6210\u7684{1}\u65e0\u6548",0,l.type));e&&e(t,o,r),h()}};if(!c.isMock){var m=3==c.state;if(!c.state||m)return void g(N("wf9t::\u672a\u5f00\u59cb\u5f55\u97f3")+(m?N("Dl2c::\uff0c\u5f00\u59cb\u5f55\u97f3\u524d\u65e0\u7528\u6237\u4ea4\u4e92\u5bfc\u81f4AudioContext\u672a\u8fd0\u884c"):""))}c._stop(!0);var C=c.recSize;if(C)if(c[l.type]){if(c.isMock){var _=c.envCheck(c.mockEnvInfo||{envName:"mock",canProcess:!1});if(_)return void g(N("AxOH::\u5f55\u97f3\u9519\u8bef\uff1a")+_)}var y=c.engineCtx;if(c[l.type+"_complete"]&&y){var w=Math.round(y.pcmSize/l[u]*1e3);return n=Date.now(),void c[l.type+"_complete"](y,(function(e,t){d(e,t,w)}),g)}if(n=Date.now(),c.buffers[0]){var b=a.SampleData(c.buffers,c[f],l[u]);l[u]=b[u];var S=b.data;w=Math.round(S.length/l[u]*1e3);c.CLog(N("CxeT::\u91c7\u6837:{1} \u82b1:{2}ms",0,C+"->"+S.length,Date.now()-n)),setTimeout((function(){n=Date.now(),c[l.type](S,(function(e,t){d(e,t,w)}),(function(e){g(e)}))}))}else g(N("xkKd::\u97f3\u9891buffers\u88ab\u91ca\u653e"))}else g(N("xGuI::\u672a\u52a0\u8f7d{1}\u7f16\u7801\u5668\uff0c\u8bf7\u5c1d\u8bd5\u5230{2}\u7684src/engine\u5185\u627e\u5230{1}\u7684\u7f16\u7801\u5668\u5e76\u52a0\u8f7d",0,l.type,s));else g(N("Ltz3::\u672a\u91c7\u96c6\u5230\u5f55\u97f3"))}};var R=function(e,t){t.pos||(t.pos=[0],t.tracks={},t.bytes=[]);var r=t.tracks,n=[t.pos[0]],a=function(){t.pos[0]=n[0]},o=t.bytes.length,i=new Uint8Array(o+e.length);if(i.set(t.bytes),i.set(e,o),t.bytes=i,!t._ht){if(z(i,n),U(i,n),!D(z(i,n),[24,83,128,103]))return;for(z(i,n);n[0]<i.length;){var s=z(i,n),c=U(i,n),f=[0],l=0;if(!c)return;if(D(s,[22,84,174,107])){for(;f[0]<c.length;){var v=z(c,f),p=U(c,f),h=[0],g={channels:0,sampleRate:0};if(D(v,[174]))for(;h[0]<p.length;){var d=z(p,h),m=U(p,h),C=[0];if(D(d,[215])){var _=O(m);g.number=_,r[_]=g}else if(D(d,[131])){1==(_=O(m))?g.type="video":2==_?(g.type="audio",l||(t.track0=g),g.idx=l++):g.type="Type-"+_}else if(D(d,[134])){for(var y="",w=0;w<m.length;w++)y+=String.fromCharCode(m[w]);g.codec=y}else if(D(d,[225]))for(;C[0]<m.length;){var b=z(m,C),S=U(m,C);if(D(b,[181])){_=0;var x=new Uint8Array(S.reverse()).buffer;4==S.length?_=new Float32Array(x)[0]:8==S.length?_=new Float64Array(x)[0]:I("WebM Track !Float",1,S),g[u]=Math.round(_)}else D(b,[98,100])?g.bitDepth=O(S):D(b,[159])&&(g.channels=O(S))}}}t._ht=1,I("WebM Tracks",r),a();break}}}var k=t.track0;if(k){if(16==k.bitDepth&&/FLOAT/i.test(k.codec)&&(k.bitDepth=32,I("WebM 16->32 bit",3)),k[u]!=t[u]||32!=k.bitDepth||k.channels<1||!/(\b|_)PCM\b/i.test(k.codec))return t.bytes=[],t.bad||I("WebM Track Unexpected",3,t),t.bad=1,-1;for(var M=[],L=0;n[0]<i.length;){v=z(i,n);if(!(p=U(i,n)))break;if(D(v,[163])){var T=15&p[0];if(g=r[T]){if(0===g.idx){var A=new Uint8Array(p.length-4);for(w=4;w<p.length;w++)A[w-4]=p[w];M.push(A),L+=A.length}}else I("WebM !Track"+T,1,r)}a()}if(L){var R=new Uint8Array(i.length-t.pos[0]);R.set(i.subarray(t.pos[0])),t.bytes=R,t.pos[0]=0;A=new Uint8Array(L),w=0;for(var E=0;w<M.length;w++)A.set(M[w],E),E+=M[w].length;x=new Float32Array(A.buffer);if(k.channels>1){var N=[];for(w=0;w<x.length;)N.push(x[w]),w+=k.channels;x=new Float32Array(N)}return x}}},D=function(e,t){if(!e||e.length!=t.length)return!1;if(1==e.length)return e[0]==t[0];for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0},O=function(e){for(var t="",r=0;r<e.length;r++){var n=e[r];t+=(n<16?"0":"")+n.toString(16)}return parseInt(t,16)||0},z=function(e,t,r){var n=t[0];if(!(n>=e.length)){var a=("0000000"+e[n].toString(2)).substr(-8),o=/^(0*1)(\d*)$/.exec(a);if(o){var i=o[1].length,s=[];if(!(n+i>e.length)){for(var c=0;c<i;c++)s[c]=e[n],n++;return r&&(s[0]=parseInt(o[2]||"0",2)),t[0]=n,s}}}},U=function(e,t){var r=z(e,t,1);if(r){var n=O(r),a=t[0],o=[];if(n<2147483647){if(a+n>e.length)return;for(var i=0;i<n;i++)o[i]=e[a],a++}return t[0]=a,o}},E=a.i18n={lang:"zh-CN",alias:{"zh-CN":"zh","en-US":"en"},locales:{},data:{},put:function(e,t){var r=s+".i18n.put: ",n=e.overwrite;n=null==n||n;var a=e.lang;if(!(a=E.alias[a]||a))throw new Error(r+"set.lang?");var o=E.locales[a];o||(o={},E.locales[a]=o);for(var i,c=/^([\w\-]+):/,f=0;f<t.length;f++){var u=t[f];if(i=c.exec(u)){var l=i[1];u=u.substr(l.length+1);!n&&o[l]||(o[l]=u)}else I(r+"'key:'? "+u,3,e)}},get:function(){return E.v_G.apply(null,arguments)},v_G:function(e,t,r){t=t||[],r=r||E.lang,r=E.alias[r]||r;var n=E.locales[r],a=n&&n[e]||"";return a||"zh"==r?(E.lastLang=r,"=Empty"==a?"":a.replace(/\{(\d+)(\!?)\}/g,(function(r,n,o){return r=t[(n=+n||0)-1],(n<1||n>t.length)&&(r="{?}",I("i18n["+e+"] no {"+n+"}: "+a,3)),o?"":r}))):"en"==r?E.v_G(e,t,"zh"):E.v_G(e,t,"en")},$T:function(){return E.v_T.apply(null,arguments)},v_T:function(){for(var e,t=arguments,r="",a=[],o=0,i=s+".i18n.$T:",c=/^([\w\-]*):/,f=0;f<t.length;f++){var u=t[f];if(0==f){if(!(r=(e=c.exec(u))&&e[1]))throw new Error(i+"0 'key:'?");u=u.substr(r.length+1)}if(-1===o)a.push(u);else{if(o)throw new Error(i+" bad args");if(0===u)o=-1;else if(n(u)){if(u<1)throw new Error(i+" bad args");o=u}else{var l=1==f?"en":f?"":"zh";if((e=c.exec(u))&&(l=e[1]||l,u=u.substr(e[1].length+1)),!e||!l)throw new Error(i+f+" 'lang:'?");E.put({lang:l,overwrite:!1},[r+":"+u])}}}return r?o>0?r:E.v_G(r,a):""}},N=E.$T;N.G=E.get,N("NonBrowser-1::\u975e\u6d4f\u89c8\u5668\u73af\u5883\uff0c\u4e0d\u652f\u6301{1}",1),N("IllegalArgs-1::\u53c2\u6570\u9519\u8bef\uff1a{1}",1),N("NeedImport-2::\u8c03\u7528{1}\u9700\u8981\u5148\u5bfc\u5165{2}",2),N("NotSupport-1::\u4e0d\u652f\u6301\uff1a{1}",1),a.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var F=a.Traffic=function(e){if(t){e=e?"/"+s+"/Report/"+e:"";var r=a.TrafficImgUrl;if(r){var n=a.Traffic,o=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],i=o[1]||"http://file/",c=(o[0]||i)+e;if(0==r.indexOf("//")&&(r=/^https:/i.test(c)?"https:"+r:"http:"+r),e&&(r=r+"&cu="+encodeURIComponent(i+e)),!n[c])n[c]=1,(new Image).src=r,I("Traffic Analysis Image: "+(e||s+".TrafficImgUrl="+a.TrafficImgUrl))}}};p&&(I(N("8HO5::\u8986\u76d6\u5bfc\u5165{1}",0,s),1),p.Destroy());e[s]=a}(o,a),void 0===(n=function(){return o.Recorder}.call(t,r,t,e))||(e.exports=n),e.exports&&(e.exports=o.Recorder)}()},1933:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});const n={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var a,o=new Uint8Array(16);function i(){if(!a&&!(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(o)}for(var s=[],c=0;c<256;++c)s.push((c+256).toString(16).slice(1));function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}const u=function(e,t,r){if(n.randomUUID&&!t&&!e)return n.randomUUID();var a=(e=e||{}).random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=a[o];return t}return f(a)}}}]);
//# sourceMappingURL=232.e638e4c8.chunk.js.map